(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{1265:function(a,e,t){"use strict";t.r(e);var n=t(227),r=t(8),o=t(9),i=t(15),l=t(11),c=t(10),s=t(1),d=t.n(s),m=t(33),b=t(76),u=t(31),g=t(60),p=t(19),h=t(29),k=t(36),f=t(7),v=t(69),_=t.n(v),E=t(100),O=t(141),j=t.n(O),y=t(320),N=t(321),S=t(138),B=t(22),D=t(5),w=t(108),T=t.n(w),K=Object(S.createNumberMask)({prefix:"Rp. ",locale:"kr-KO"}),C=function(a){Object(l.a)(t,a);var e=Object(c.a)(t);function t(a){var n;return Object(r.a)(this,t),(n=e.call(this,a)).tgl_awalChange=function(a){n.setState({tgl_awal:a})},n.tgl_akhirChange=function(a){n.setState({tgl_akhir:a})},n.getValue=function(){var a=Object(E.a)(_.a.mark(function a(e){var t,r;return _.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.target.files[0],a.next=4,Object(D.r)(t);case 4:r=a.sent,n.props.dispatch(Object(k.t)(r)),n.props.change("foto",r),a.next=11;break;case 9:a.prev=9,a.t0=a.catch(0);case 11:case"end":return a.stop()}},a,null,[[0,9]])}));return function(e){return a.apply(this,arguments)}}(),n.state={visible:!0,ModalWebCam:!1,isLoadingBaki:!1,isLoadingJenis:!1,tgl_awal:new Date,tgl_akhir:new Date,databaki:[],DataGroup:[],DataJenis:[],loadimage:T.a},n}return Object(o.a)(t,[{key:"showModalWebcam",value:function(){this.props.dispatch(Object(k.t)(!1)),this.props.dispatch(Object(f.Rb)()),this.setState({ModalWebCam:!0})}},{key:"handleTakePhoto",value:function(){var a=Object(E.a)(_.a.mark(function a(e){var t,n;return _.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=Object(D.c)(e),a.next=4,Object(D.r)(t);case 4:n=a.sent,console.log(n),this.props.dispatch(Object(k.t)(n)),this.props.change("foto",n),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:case"end":return a.stop()}},a,this,[[0,10]])}));return function(e){return a.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var a=this;Object(p.c)("group/get/all").then(function(e){a.setState({DataGroup:e.data})}).catch(function(a){console.log(a)})}},{key:"getJenis",value:function(a){var e=this;this.setState({isLoadingJenis:!0}),Object(p.c)("jenis/get/by-kode-kategori/"+a).then(function(a){e.setState({DataJenis:a.data})}).then(function(a){e.setState({isLoadingJenis:!1})}).catch(function(a){Object(h.b)(a.data),console.log(a)})}},{key:"getBaki",value:function(a){var e=this;this.setState({isLoadingBaki:!0}),Object(p.c)("baki/get/by-kode-baki/"+a).then(function(a){e.setState({databaki:""===a.data?[]:[a.data]})}).then(function(a){e.setState({isLoadingBaki:!1})}).catch(function(a){Object(h.b)(a.data),console.log(a)})}},{key:"loadcamera",value:function(){var a=this;return d.a.createElement(j.a,{onTakePhoto:function(e){a.handleTakePhoto(e)}})}},{key:"render",value:function(){var a=this;return d.a.createElement(d.a.Fragment,null,d.a.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-8"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-6"},d.a.createElement(y.a,{readOnly:!0,name:"foto",type:"hidden",component:B.b}),d.a.createElement(y.a,{readOnly:!0,name:"kode_barcode",component:B.e,label:"Kode Barcode",placeholder:"Masukan Kode Barcode"})),d.a.createElement("div",{className:"col-lg-6"},d.a.createElement(y.a,{name:"nama_barang",component:B.e,label:"Nama Barang",placeholder:"Masukan Nama Barang"}))),d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-8"},d.a.createElement(y.a,{name:"nama_atribut",component:B.e,label:"Nama Atribut",placeholder:"Masukan Nama Atribut"})),d.a.createElement("div",{className:"col-lg-4"},d.a.createElement(y.a,Object.assign({name:"harga_atribut",component:B.e,label:"Harga Atribut"},K,{placeholder:"Masukan Harga Atribut"})))),d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-6"},d.a.createElement(y.a,{name:"kadar",component:B.e,label:"Kadar",placeholder:"Masukan Kadar"})),d.a.createElement("div",{className:"col-lg-6"},d.a.createElement(y.a,{name:"kadar_cetak",component:B.e,label:"Kadar Cetak",placeholder:"Masukan Kadar Cetak"})),d.a.createElement("div",{className:"col-lg-6"},d.a.createElement(y.a,{name:"kode_intern",component:B.e,label:"Kode Intern",placeholder:"Masukan Kode Intern"})),d.a.createElement("div",{className:"col-lg-6"},d.a.createElement("div",{className:"form-group"},d.a.createElement("label",null," \xa0 "),!0===this.props.isLoading?d.a.createElement(D.d,{className:"btn btn-block btn-primary",text:"Sedang Menyimpan Data"}):d.a.createElement(d.a.Fragment,null,d.a.createElement("button",{type:"submit",className:"btn btn-block btn-primary"},"Simpan Barang")))))),d.a.createElement("div",{className:"col-lg-4"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-4"},!0===this.state.ModalWebCam&&!1===this.props.setCamera?d.a.createElement("div",{className:"container"},this.loadcamera()):d.a.createElement(d.a.Fragment,null,d.a.createElement("img",{src:void 0===this.props.foto?!1===this.props.setCamera?T.a:this.props.setCamera:this.props.setCamera?this.props.setCamera:this.props.foto,alt:"img",height:"245px",width:"355px"})))),d.a.createElement("div",{className:"row mt-2"},d.a.createElement("div",{className:"col-lg-12 mb-8"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-8"},d.a.createElement("div",{className:"input-group"},d.a.createElement("div",{className:"custom-file"},d.a.createElement("input",{type:"file",name:"photo",autoComplete:"off",className:"custom-file-input",id:"exampleInputFile",onChange:function(e){return a.getValue(e)}}),d.a.createElement("label",{className:"custom-file-label",htmlFor:"exampleInputFile"},"Pilih gambar")))),d.a.createElement("div",{className:"col-4"},d.a.createElement("button",{className:"btn btn-block btn-primary",type:"button",onClick:function(){return a.showModalWebcam()}}," ","WebCam"," ")))))))))}}]),t}(s.Component);C=Object(N.a)({form:"HeadEditDataBarang",enableReinitialize:!0})(C);var M=Object(u.b)(function(a){return{initialValues:{foto:a.databarang.showEditBarang.foto,kode_barcode:a.databarang.showEditBarang.kode_barcode,nama_barang:a.databarang.showEditBarang.nama_barang,nama_atribut:a.databarang.showEditBarang.nama_atribut,harga_atribut:a.databarang.showEditBarang.harga_atribut,kode_intern:a.databarang.showEditBarang.kode_intern,kadar:a.databarang.showEditBarang.kadar,kadar_cetak:a.databarang.showEditBarang.kadar_cetak},foto:a.databarang.showEditBarang.foto,setCamera:a.databarang.setCamera,hideModal:a.datamaster.modalDialog}},null)(C),F=t(224),x=t(46),J=t(66),A=t.n(J),L=t(0),G=t(1152),I=t(207),P=t(675),R=t(673),q=t(674),W=function(a){Object(l.a)(t,a);var e=Object(c.a)(t);function t(a){var n;return Object(r.a)(this,t),(n=e.call(this,a)).state={},n}return Object(o.a)(t,[{key:"handleTakePhoto",value:function(a){this.props.dispatch(Object(k.t)(a))}},{key:"loadcamera",value:function(){var a=this;return d.a.createElement(j.a,{onTakePhoto:function(e){a.handleTakePhoto(e)}})}},{key:"render",value:function(){var a=this;return d.a.createElement(P.a,{backdrop:"static",keyboard:!1,isOpen:this.props.isOpen,toggle:function(){return a.props.dispatch(Object(f.Mb)())}},d.a.createElement(R.a,null," ",this.props.title," "),d.a.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off"},d.a.createElement(q.a,null,d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"container"},this.loadcamera())),d.a.createElement("button",{className:"btn btn-white",onClick:function(){return a.props.dispatch(Object(f.Mb)())},type:"button",disabled:this.props.isLoading},d.a.createElement("i",{className:"fa fa-arrow-left"})," Kembali"))))}}]),t}(s.Component);W=Object(N.a)({form:"ModalWebCam",enableReinitialize:!0})(W);var H=Object(u.b)(function(a){return{setCamera:a.databarang.setCamera,hideModal:a.datamaster.modalDialog}},null)(W),Y=t(56),V=Object(L.y)({prefix:"Rp. ",locale:"id-ID"}),z=function(a){Object(l.a)(t,a);var e=Object(c.a)(t);function t(a){var n;return Object(r.a)(this,t),(n=e.call(this,a)).onValChange=function(a){n.setState({name_type:a.target.value}),Object(L.Q)("kadar_type",a.target.value)},n.getValue=function(){var a=Object(E.a)(_.a.mark(function a(e){var t,r;return _.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.target.files[0],a.next=3,Object(D.b)(t);case 3:r=a.sent,n.props.dispatch(Object(I.e)(r));case 5:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}(),n.state={visible:!0,ModalWebCam:!1,isLoadingBaki:!1,isLoadingJenis:!1,showModalForm:!1,loadingData:!1,cekStatus:!1,tgl_awal:new Date,tgl_akhir:new Date,databaki:[],DataLabeling:[],DataGroup:[],DataJenis:[],DataGudang:[],loadimage:L.L,name_type:"SP"},n}return Object(o.a)(t,[{key:"loadcamera",value:function(){var a=this;return L.o.createElement(L.a,{onTakePhoto:function(e){a.handleTakePhoto(e)}})}},{key:"handleTakePhoto",value:function(a){this.props.dispatch(Object(I.e)(a)),this.props.change("foto",a),document.getElementById("ongkos").focus()}},{key:"shofFormModal",value:function(a){this.setState({showModalForm:a}),this.props.dispatch(Object(L.bb)())}},{key:"getDataDetailBarangBos",value:function(a){var e=this;clearTimeout(this.delayTimer),this.delayTimer=setTimeout(function(){if(e.setState({loadingData:!0}),void 0===e.state.stock_input)return e.setState({loadingData:!1}),Object(h.e)("info","Stock Input Belum Dipilih"),!1;e.setState({no_kirim:a.trim()}),Object(L.G)("kirim-labeling/jenises?no_kirim="+a.trim()+"&kode_toko="+e.state.stock_input).then(function(a){if(0===a.data.length)e.setState({loadingData:!1}),Object(h.e)("info","No Kirim Barang Sudah Tidak Ada");else{var t=[];a.data.forEach(function(a){var e={value:a.kode_dept,name:a.kode_dept};t.push(e)}),e.setState({DataJenis:t,loadingData:!1})}}).catch(function(a){var t;Object(h.e)("info",(null===(t=a.response)||void 0===t?void 0:t.data.message)||"Gagal Mengirim Data Keserver"),e.setState({loadingData:!1})})},1500)}},{key:"FormBatal",value:function(a){!0===a?(this.props.dispatch(Object(L.K)()),this.props.dispatch(Object(L.Z)("TambahBarangBanyak"))):(this.props.dispatch(Object(L.K)()),this.props.dispatch(Object(L.Z)("FormDataAtribut")))}},{key:"resetKamera",value:function(){this.props.change("foto",""),this.props.dispatch(Object(I.e)(!1))}},{key:"componentDidMount",value:function(){var a=this;G.io.connect("http://147.139.193.169:5011/api/v1/".replace("/api/v1/","")).on("timbangan",function(e){Object(D.l)().user_id===e.user_id&&a.props.change("berat_asli",e.value)}),Object(L.D)("baki/get/all").then(function(e){a.setState({DataLabeling:e.data})}),Object(L.D)("gudang/get/all").then(function(e){a.setState({DataGudang:e.data})}),this.props.change("jumlah_barang",1),Object(D.s)("dataattr",[]),Object(L.Q)("kadar_type",this.state.name_type),Object(L.Q)("pabrik","-"),this.props.dispatch(Object(f.Gb)()),this.props.dispatch(Object(f.Eb)()),this.props.dispatch(Object(f.y)()),this.props.dispatch(Object(f.wb)()),this.props.dispatch(Object(f.ub)()),this.props.dispatch(Object(f.sb)())}},{key:"simpanDataAtrr",value:function(a){var e=this,t={level1:a.level1||"",level2:a.level2||"",level3:a.level3||"",level4:a.level4||"",custome:a.custome||"",kadar:a.kadar||"",pabrik:a.pabrik||"",model:a.model||!1};Object(D.s)("dataattr",t),Object(h.d)("Berhasil Menambahkan Data Attribut !").then(function(){return e.props.dispatch(Object(L.K)())})}},{key:"tampilModalWebCam",value:function(){this.props.dispatch(Object(I.e)(!1)),this.props.dispatch(Object(f.Ub)(!0)),this.setState({ModalWebCam:!0})}},{key:"checkQty",value:function(a){if(""!==a){var e=document.getElementById("qty").value;if(""===e)return this.setState({cekStatus:!0}),Object(h.e)("info","Qty Tidak Boleh Kosong"),this.props.change("jumlah_barang",0),!1;if(this.setState({cekStatus:!1}),parseInt(a)>parseInt(e))return this.setState({cekStatus:!0}),Object(h.e)("info","Jumlah Tidak Boleh Lebih Dari Qty"),this.props.change("jumlah_barang",0),!1;this.setState({cekStatus:!1})}}},{key:"carikategori",value:function(a){var e=this;Object(L.E)("kirim-labeling?kode_toko="+this.state.stock_input+"&no_kirim="+this.state.no_kirim+"&kode_dept="+a).then(function(a){document.getElementById("sales_pabrik_bos").focus(),e.props.change("kode_group",a.data.kode_group),e.props.change("qty_bos",a.data.stock_akhir),e.props.change("berat_bos",a.data.berat_akhir.toFixed(3)),e.props.change("sales_pabrik_bos",void 0===a.data.sales_parbik?"-":a.data.sales_parbik)}).catch(function(a){var e;console.log(a),Object(h.e)("info",(null===(e=a.response)||void 0===e?void 0:e.data.message)||"Terjadi Kesalahan Saat Request Data")})}},{key:"showModalWebcam",value:function(){this.props.dispatch(Object(L.bb)())}},{key:"render",value:function(){var a=this;return L.o.createElement(L.l,null,L.o.createElement(L.n,null,"Tambah Data Barang"),L.o.createElement(L.m,null,L.o.createElement("form",{onSubmit:this.props.handleSubmit},L.o.createElement("div",{className:"row"},L.o.createElement("div",{className:"col-lg-4"},L.o.createElement(L.d,{name:"kode_gudang",component:L.r,onChange:function(e){a.setState({gudangSelected:e})},options:this.state.DataGudang.filter(function(a){return void 0!==a.kode_gudang&&"BELI"!==a.kode_gudang&&"CUCI"!==a.kode_gudang&&"TITIP"!==a.kode_gudang&&"REPARASI"!==a.kode_gudang}).map(function(a){return{value:a.kode_gudang,name:a.kode_gudang+" - "+a.nama_gudang}}),label:"Kode Gudang",placeholder:"Pilih Kode Gudang"})),L.o.createElement("div",{className:"col-lg-4"},!1===this.state.isLoadingBaki?L.o.createElement(L.d,{label:"Kode Baki",name:"kode_baki",options:this.props.DataBaki.filter(function(e){return"TITIPJUAL"!==e.kode_baki&&e.kode_gudang===a.state.gudangSelected}).map(function(a){return{value:a.kode_baki,name:a.kode_baki+" - "+a.nama_baki}||[]}),placeholder:"Silahkan Pilih Kode Baki",component:L.r}):L.o.createElement(L.s,{label:"Kode Baki"})),L.o.createElement("div",{className:"col-lg-4"},L.o.createElement(L.d,{name:"kode_group",component:L.r,onChange:function(e){a.setState({groupSelected:e})},options:this.props.DataGroup.filter(function(a){return void 0!==a.kode_group}).map(function(a){return{value:a.kode_group,name:a.kode_group+" - "+a.nama_group}}),label:"Kode Group",placeholder:"Pilih Kode Group"})),L.o.createElement("div",{className:"col-lg-4"},!1===this.state.isLoadingJenis?L.o.createElement(L.d,{label:"Kode Jenis",name:"kode_dept",options:this.props.DataJenis.filter(function(e){return e.kode_group===a.state.groupSelected}).map(function(a){return{value:a.kode_dept,name:a.kode_dept+" - "+a.nama_dept}}),placeholder:"Silahkan Pilih Kode Jenis",component:L.r}):L.o.createElement(L.s,{label:"Kode Jenis"}))),L.o.createElement("div",{className:"row"},L.o.createElement("div",{className:"col-lg-8"},L.o.createElement("div",{className:"row"},L.o.createElement("div",{className:"col-lg-8"},L.o.createElement(L.d,{name:"nama_barang",component:L.q,label:"Nama Barang",placeholder:"Masukan Nama Barang"})),L.o.createElement("div",{className:"col-lg-4"},L.o.createElement(L.d,{name:"kadar_modal",component:L.q,label:"Kadar Modal",placeholder:"Masukan Kadar Modal",normalize:Y.b}))),L.o.createElement("div",{className:"row"},L.o.createElement("div",{className:"col-lg-8"},L.o.createElement(L.d,{name:"nama_atribut",component:L.q,label:"Nama Atribut",placeholder:"Masukan Nama Atribut"})),L.o.createElement("div",{className:"col-lg-4"},L.o.createElement(L.d,Object.assign({name:"harga_atribut",component:L.q,label:"Harga Atribut",placeholder:"Masukan Harga Atribut"},V)))),L.o.createElement("div",{className:"row"},L.o.createElement("div",{className:"col-lg-8"},L.o.createElement(L.d,{name:"berat_asli",component:L.q,label:"Berat Asli",placeholder:"Masukan Berat Asli",normalize:L.e}))),L.o.createElement("div",{className:"row"},L.o.createElement("div",{className:"col-lg-6 d-none"},L.o.createElement(L.d,Object.assign({name:"ongkos",component:L.q,label:"Ongkos",placeholder:"Masukan Ongkos"},V))),L.o.createElement("div",{className:"col-lg-6"},L.o.createElement(L.d,{name:"is_markis",component:L.r,options:[{value:"TRUE",name:"MARKIS"},{value:"FALSE",name:"NORMAL"}],label:"Markis",placeholder:"pilih Markis"})),L.o.createElement("div",{className:"col-lg-6"},L.o.createElement(L.d,{name:"kode_intern",component:L.q,label:"Kode Intern",placeholder:"Masukan Kode Intern"})))),L.o.createElement("div",{className:"col-lg-4"},L.o.createElement("div",{className:"row"},L.o.createElement("div",{className:"col-lg-4"},L.o.createElement("img",{src:!1===this.props.setCamera?"http://54.151.162.118/nagagold_dev/assets/NsiPic/temp.jpg":this.props.setCamera,alt:"img",height:"210px",width:"305px"}))),L.o.createElement("div",{className:"row"},L.o.createElement("div",{className:"col-lg-12 mb-8"},L.o.createElement("br",null),L.o.createElement("label",null," \xa0 "),L.o.createElement("div",{className:"row"},L.o.createElement("div",{className:"col-8"},L.o.createElement("div",{className:"input-group"},L.o.createElement("div",{className:"custom-file"},L.o.createElement("input",{type:"file",name:"photo",autoComplete:"off",className:"custom-file-input",id:"exampleInputFile",onChange:function(e){return a.getValue(e)}}),L.o.createElement("label",{className:"custom-file-label",htmlFor:"exampleInputFile"},"Pilih gambar")))),L.o.createElement("div",{className:"col-4"},L.o.createElement("button",{type:"button",className:"btn btn-block btn-primary",onClick:function(){return a.showModalWebcam()}}," ","WebCam"," "))))))),L.o.createElement("div",{className:"row d-none"},L.o.createElement("div",{className:"col-lg-6"},L.o.createElement(L.d,{readOnly:"readonly",name:"kode_barang",component:L.q,label:"Kode barang",placeholder:"Masukan Kode barang"})),L.o.createElement("div",{className:"col-lg-6"},L.o.createElement(L.d,{readOnly:"readonly",name:"total_harga",component:L.q,label:"Total Harga",placeholder:"Masukan Total Harga"}))),L.o.createElement("div",{className:"row justify-content-end"},L.o.createElement("div",{className:"col-lg-3 text-right"},L.o.createElement("button",{type:"submit",className:"btn btn-primary mt-1 btn-block"},"Simpan")),L.o.createElement("div",{className:"col-lg-3"},L.o.createElement("button",{type:"button",onClick:function(){return a.props.kembali()},className:"btn btn-warning mt-1 btn-block"},"Kembali"))),L.o.createElement(H,{isLoading:this.state.isLoading,title:"Ambil Foto",isOpen:this.props.hideModal,onSubmit:function(e){return a.handleSubmit(e)}}))))}}]),t}(L.b);z=Object(L.Y)({form:"FormTambahDataBarang",enableReinitialize:!0})(z);var Q=Object(L.w)(function(a){var e=Object(D.i)("dataattr"),t="-",n="";return e.model&&(n="MDL"),0!==e.length&&(t=n+" "+e.level1+" "+e.level2+" "+e.level3+" "+e.level4+" "+e.pabrik),{modalwebcam:a.datamaster.showModalWebcam,foto:a.databarang.showEditBarang.foto,isLoading:a.datamaster.isLoading,setCamera:a.databarang.setCamera,hideModal:a.datamaster.modalDialog,DataGroup:a.datamaster.GetDataGroup,DataJenis:a.datamaster.getDataJenis,DataGudang:a.datamaster.getDataGudang,DataBaki:a.datamaster.getDataBaki,initialValues:{atribut:t,is_markis:"FALSE"}}})(z),U=Object(s.lazy)(function(){return t.e(45).then(t.bind(null,1234))}),Z=function(a){Object(l.a)(t,a);var e=Object(c.a)(t);function t(a){var n;return Object(r.a)(this,t),(n=e.call(this,a)).state={isEdit:!1,modalDialog:!1,formTambahBarang:!1,setfocus:!1,formEdit:!1,simpanBarang:!1,loadingData:!1,databarang:[]},n.handleSubmit=n.handleSubmit.bind(Object(i.a)(n)),n}return Object(o.a)(t,[{key:"getBarangKodeBaki",value:function(a){var e=this;this.delayTimer&&clearTimeout(this.delayTimer),this.delayTimer=setTimeout(function(){if(Object(D.o)("databarangall",JSON.stringify([])),e.setState({loadingData:!0}),""===a)return e.setState({loadingData:!1,databarang:[]}),!1;Object(p.c)("barang/get/by-kode-baki?limit=1000&kode_baki="+a).then(function(a){0===a.data.length?(e.setState({databarang:[]}),Object(D.o)("databarangall",JSON.stringify([])),Object(h.e)("info","Kode Baki Yang Dicari Tidak Ada")):(e.setState({databarang:a.data}),Object(D.o)("databarangall",JSON.stringify(a.data))),e.setState({loadingData:!1})}).catch(function(a){e.setState({loadingData:!1,databarang:[]}),Object(p.a)(a.message)&&(e.setState({loadingData:!1,databarang:[]}),Object(D.o)("databarangall",JSON.stringify([])),Object(h.e)("info","Kode Baki Yang Dicari Tidak Ada"))})},1500)}},{key:"showEditBarang",value:function(a){var e=this;Object(D.h)("foto_produk/"+a.kode_barcode).then(function(t){var n={foto:t,kode_barcode:a.kode_barcode,nama_barang:a.nama_barang,nama_atribut:a.nama_atribut,harga_atribut:a.harga_atribut,kode_intern:a.kode_intern,kadar:a.kadar,kadar_cetak:a.kadar_cetak};e.props.dispatch(Object(k.x)(n)),setTimeout(function(){e.props.dispatch(Object(f.Rb)())},500)}).catch(function(t){var n={kode_barcode:a.kode_barcode,nama_barang:a.nama_barang,nama_atribut:a.nama_atribut,harga_atribut:a.harga_atribut,kode_intern:a.kode_intern,kadar:a.kadar,kadar_cetak:a.kadar_cetak};e.props.dispatch(Object(k.x)(n)),setTimeout(function(){e.props.dispatch(Object(f.Rb)())},500)})}},{key:"getKodeBarcode",value:function(a){var e=this;this.delayTimer&&clearTimeout(this.delayTimer),this.delayTimer=setTimeout(function(){if(Object(D.o)("databarangall",JSON.stringify([])),e.setState({loadingData:!0}),""===a)return e.setState({loadingData:!1,databarang:[]}),!1;Object(p.c)("barang/open/kode-barcode?limit=1000&kode_barcode="+a).then(function(a){0===a.data.length?(e.setState({databarang:[]}),Object(D.o)("databarangall",JSON.stringify([])),Object(h.e)("info","Kode Barcode Yang Dicari Tidak Ada")):(e.setState({databarang:a.data}),Object(D.o)("databarangall",JSON.stringify(a.data))),e.setState({loadingData:!1})}).catch(function(a){e.setState({loadingData:!1,databarang:[]}),Object(p.a)(a.message)&&(e.setState({loadingData:!1,databarang:[]}),Object(D.o)("databarangall",JSON.stringify([])),Object(h.e)("info","Kode Barcode Yang Dicari Tidak Ada"))})},1500)}},{key:"getNamaBarang",value:function(a){var e=this;this.delayTimer&&clearTimeout(this.delayTimer),this.delayTimer=setTimeout(function(){if(Object(D.o)("databarangall",JSON.stringify([])),e.setState({loadingData:!0}),""===a)return e.setState({loadingData:!1,databarang:[]}),!1;Object(p.c)("barang/get/by-nama-barang?limit=1000&nama_barang="+a).then(function(a){0===a.data.length?(e.setState({databarang:[]}),Object(D.o)("databarangall",JSON.stringify([])),Object(h.e)("info","Nama Barang Yang Dicari Tidak Ada")):(e.setState({databarang:a.data}),Object(D.o)("databarangall",JSON.stringify(a.data))),e.setState({loadingData:!1})}).catch(function(a){e.setState({loadingData:!1,databarang:[]}),Object(p.a)(a.message)&&(e.setState({loadingData:!1,databarang:[]}),Object(D.o)("databarangall",JSON.stringify([])),Object(h.e)("info","Nama Barang Yang Dicari Tidak Ada"))})},1500)}},{key:"showFormTambahDataBarang",value:function(){this.setState({formTambahBarang:!0})}},{key:"getByKodeGroup",value:function(a){var e=this;this.delayTimer&&clearTimeout(this.delayTimer),this.delayTimer=setTimeout(function(){if(Object(D.o)("databarangall",JSON.stringify([])),e.setState({loadingData:!0}),""===a)return e.setState({loadingData:!1,databarang:[]}),!1;Object(p.c)("barang/get/by-kode-group?limit=1000&kode_group="+a).then(function(a){0===a.data.length?(e.setState({databarang:[]}),Object(D.o)("databarangall",JSON.stringify([])),Object(h.e)("info","Kode Group Yang Dicari Tidak Ada")):(e.setState({databarang:a.data}),Object(D.o)("databarangall",JSON.stringify(a.data))),e.setState({loadingData:!1})}).catch(function(a){e.setState({loadingData:!1,databarang:[]}),Object(p.a)(a.message)&&(e.setState({loadingData:!1,databarang:[]}),Object(D.o)("databarangall",JSON.stringify([])),Object(h.e)("info","Kode Group Yang Dicari Tidak Ada"))})},1500)}},{key:"handleSubmit",value:function(a){var e=this;this.setState({isLoading:!0});var t={nama_barang:a.nama_barang,nama_atribut:a.nama_atribut||"-",harga_atribut:a.harga_atribut||0,kode_intern:a.kode_intern,kadar:a.kadar,kadar_cetak:a.kadar_cetak},n=void 0!==a.foto?Object(D.c)(a.foto):void 0;Object(p.g)("barang/edit/"+a.kode_barcode,t).then(function(){e.props.dispatch(Object(k.u)(!0)),e.props.dispatch(Object(f.Mb)())}).then(function(){void 0!==n&&Object(D.q)(n,"foto_produk/"+a.kode_barcode).then(function(a){}).catch(function(a){Object(h.e)("info","upload Foto Gagal, Silahkan Edit Didata Barang")})}).then(function(){e.setState({databarang:[]}),e.props.dispatch(Object(x.d)("HeadEditDataBarang")),e.props.dispatch(Object(k.t)(!1))}).then(function(){Object(h.e)("success","Data Berhasil Disimpan")}).then(function(){e.setState({isLoading:!1})}).catch(function(a){e.setState({isLoading:!1}),Object(h.e)("info","Barang Gagal Di Edit")})}},{key:"simpanDataBarang",value:function(a){var e=this;if(0===parseFloat(a.berat_bos))return Object(h.e)("info","Berat Input Sudah Habis, Harap Closing Labeling"),!1;this.props.dispatch(Object(f.Ob)(!0)),this.setState({simpanBarang:!0});var t=void 0!==a.foto?Object(D.c)(a.foto):void 0,r={kode_baki_label:a.kode_baki||"-",kode_group:a.kode_group||"-",kode_dept:a.kode_dept||"-",kode_gudang:a.kode_gudang||"-",kode_toko:a.kode_baki||"-",kode_intern:a.kode_intern||"-",nama_barang:a.nama_barang||"-",berat:parseFloat(a.berat_asli)||0,berat_asli:parseFloat(a.berat_asli)||0,kadar_modal:parseFloat(a.kadar_modal)||0,kadar:parseFloat(a.kadar)||100,kadar_cetak:a.kadar_cetak||"100",nama_atribut:a.nama_atribut||"-",tipe_barang:a.type_pilihan||"-",berat_atribut:parseFloat(a.berat_atribut)||0,berat_plastik:0,berat_susut:0,berat_cad:0,tujuan:"-",harga_atribut:parseFloat(a.harga_atribut)||0,tag_id:a.stock_input||"-",berat_bandrol:0,no_pesanan:"-",id_barang_pesanan:"-",no_kirim_bos:"-",qty_input:1,is_markis:"TRUE"===a.is_markis||!1};Object(p.h)("tambah-barang/create",r).then(function(a){var r,o=Object(n.a)(a.data.kode_barcode);try{for(o.s();!(r=o.n()).done;){var i=r.value;void 0!==t&&Object(D.q)(t,"foto_produk/"+i).then(function(a){}).catch(function(a){Object(h.e)("info","upload Foto Gagal, Silahkan Edit Didata Barang")})}}catch(l){o.e(l)}finally{o.f()}Object(h.e)("success",a.data.message),e.props.dispatch(Object(x.d)("FormTambahDataBarang"))}).then(function(){e.props.dispatch(Object(f.Ob)(!1)),e.props.dispatch(Object(k.t)(!1)),e.setState({simpanBarang:!1})}).catch(function(a){var t;e.props.dispatch(Object(f.Ob)(!1)),e.setState({simpanBarang:!1}),Object(h.e)("info",(null===(t=a.response)||void 0===t?void 0:t.data.message)||"Terjadi Kesalhaan Saat Mengirim Data")})}},{key:"kembali",value:function(){this.setState({formTambahBarang:!1})}},{key:"render",value:function(){var a=this,e=[{dataField:"kode_barcode",text:"Kode Barcode"},{dataField:"kode_group",text:"Kode Group"},{dataField:"kode_toko",text:"Kode Baki"},{dataField:"kode_dept",text:"Kode Jenis"},{dataField:"nama_barang",text:"Nama Barang"},{dataField:"berat",text:"Berat",headerClasses:"text-right",formatter:function(a){return d.a.createElement("div",{className:"text-right"}," ",null===a?a:a.toFixed(3)," ")}},{dataField:"input_date",text:"Tgl Input"},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:function(e,t){return d.a.createElement("div",{className:"row text-center"},d.a.createElement("div",{className:"col-12"},d.a.createElement("button",{type:"button",onClick:function(){return a.showEditBarang(t)},className:"btn btn-primary mr-3"},d.a.createElement("i",{className:"fa fa-edit"}))))}}],t={renderer:function(a){return d.a.createElement("div",{className:"container"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-12"},"Nama Atribut : ",a.nama_atribut," ",d.a.createElement("br",null),"Betat Atribut : ",a.berat_atribut," ",d.a.createElement("br",null),"Harga Atribut : ",a.harga_atribut," ",d.a.createElement("br",null),"Kode Intern : ",a.kode_intern," ",d.a.createElement("br",null),"Kadar : ",a.kadar," ",d.a.createElement("br",null),"Kadar Cetak : ",a.kadar_cetak," ",d.a.createElement("br",null),"Kode Toko : ",a.kode_toko," ",d.a.createElement("br",null),"Kode Gudang : ",a.kode_gudang," ",d.a.createElement("br",null),"Stock : ",a.stock_on_hand," ",d.a.createElement("br",null))))},showExpandColumn:!0,expandByColumnOnly:!0};return d.a.createElement("div",null,d.a.createElement("ol",{className:"breadcrumb float-xl-right"},d.a.createElement("li",{className:"breadcrumb-item"},d.a.createElement(m.b,{to:"#"},"Barang")),d.a.createElement("li",{className:"breadcrumb-item active"},!0===this.state.formTambahBarang?"Tambah Data Barang":"Data Barang"," ")),d.a.createElement("h1",{className:"page-header"},!0===this.state.formTambahBarang?"Tambah Data Barang":"Data Barang"," "),!0===this.state.formTambahBarang?d.a.createElement(Q,{kembali:function(){return a.kembali()},isLoading:this.state.isLoading,onSubmit:function(e){return a.simpanDataBarang(e)}}):d.a.createElement(d.a.Fragment,null,d.a.createElement(b.a,null,d.a.createElement(b.c,null,"Filter Pencarian Barang"),d.a.createElement("br",null),d.a.createElement(b.b,null,d.a.createElement(U,{getKodeBarcode:function(e){return a.getKodeBarcode(e)},getNamaBarang:function(e){return a.getNamaBarang(e)},getByKodeGroup:function(e){return a.getByKodeGroup(e)},getBarangKodeBaki:function(e){return a.getBarangKodeBaki(e)}}))),d.a.createElement(b.a,null,d.a.createElement(b.c,null,this.state.loadingData?d.a.createElement(d.a.Fragment,null," ",d.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Mencari Data Barang"," "):"Data Barang"),d.a.createElement("br",null),d.a.createElement(b.b,null,d.a.createElement(g.a,{btnText:"Tambah Data Barang",handleClick:function(){return a.showFormTambahDataBarang()},tambahData:!0,keyField:"kode_barang",exportCsv:!0,data:this.state.databarang,columns:e,empty:!0,textEmpty:this.state.loadingData?d.a.createElement(d.a.Fragment,null," ",d.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Mencari Data Barang"):"Data Barang Kosong",expandRow:t})),d.a.createElement("br",null),d.a.createElement(F.a,{title:"Edit Barang",content:d.a.createElement(M,{isLoading:this.state.isLoading,onSubmit:function(e){return a.handleSubmit(e)}})}))),this.state.loadingData?d.a.createElement(A.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null,this.state.simpanBarang?d.a.createElement(A.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}]),t}(d.a.Component);e.default=Object(u.b)(function(a){return{showEditBarang:a.databarang.showEditBarang,hideModal:a.datamaster.modalDialog}},null)(Z)}}]);
//# sourceMappingURL=44.755b01b2.chunk.js.map