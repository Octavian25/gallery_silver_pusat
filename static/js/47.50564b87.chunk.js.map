{"version":3,"sources":["pages/Barang/TambahBarang/ModalPesanan.jsx","pages/Barang/TambahBarang/TambahBarang.jsx"],"names":["ModalPesanan","props","_this","Object","classCallCheck","this","_super","call","state","setTimeout","document","getElementById","focus","_this2","react_default","a","createElement","Fragment","htmlFor","className","type","id","placeholder","aria-label","aria-describedby","onClick","getNomorPesanan","isLoadingPesanan","Component","reduxForm","form","enableReinitialize","connect","setCamera","databarang","hideModal","datamaster","modalDialog","TambahBarang","showBarangPesanan","setState","fromModalPesanan","formTambahBarang","dispatch","showModal","showModalPesanan","isEdit","isLoading","formEdit","loadingData","dataPesanan","noPesanan","columns","dataField","text","sort","csvExport","headerClasses","formatter","rowcontent","row","library","showModalDuplikatBarang","handleSubmit","bind","assertThisInitialized","showModalTambahBarang","tambahbarang","localStorage","removeItem","data","kode_baki","kode_lokasi_toko","split","data_post","no_kirim_bos","kode_baki_label","qty_input","id_barang_pesanan","kode_group","kode_kategori","kode_dept","kode_jenis","kode_gudang","kode_toko","susut_tukang","parseFloat","kode_intern","nama_barang","berat","berat_asli","status_pesanan","tipe_barang","kadar_modal","kadar","berat_cad","berat_susut","tujuan","kadar_cetak","nama_atribut","berat_atribut","berat_plastik","harga_atribut","parseInt","tag_id","berat_bandrol","no_pesanan","postDataNoTImeOut2","then","res","file","undefined","foto","dataURLtoFile","postImage","kode_barcode","catch","err","ToastNotification","getData","length","reset","_err$response","_err$response$data","response","message","_this3","dataEdit","dataimage","console","log","setItem","showEditBarang","_this4","saveImage","hasil","postData","error","nomor_pesanan","_this5","postData2","value","trim","detail_barang","map","detail","attribut","perkiraan_kadar","keterangan","ongkos","perkiraan_berat","status","_this6","expandRow","renderer","stock_on_hand","showExpandColumn","expandByColumnOnly","to","keyField","exportCsv","handleClick","tambahData","btnText","empty","textEmpty","size","title","content","Module","onSubmit","TambahBarang_ModalPesanan","no","React"],"mappings":"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","file":"static/js/47.50564b87.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { reduxForm } from \"redux-form\";\r\n// import { ReanderSelect } from \"../../../components/helpers/field\";\r\n\r\nconst maptostate = (state) => {\r\n  return {\r\n    setCamera: state.databarang.setCamera,\r\n    hideModal: state.datamaster.modalDialog,\r\n  };\r\n};\r\n\r\nclass ModalPesanan extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n  componentDidMount() {\r\n    setTimeout(() => {\r\n      document.getElementById(\"nomor_pesanan\").focus();\r\n    }, 100);\r\n  }\r\n  render() {\r\n    return (\r\n      <>\r\n        {/* <form onSubmit={this.props.handleSubmit} autoComplete=\"off\"> */}\r\n          <label htmlFor=\"\">Masukan Nomor Pesanan</label>\r\n          <div className=\"input-group mb-3\">\r\n            <input\r\n              type=\"text\"\r\n            id=\"nomor_pesanan\"\r\n              className=\"form-control\"\r\n              placeholder=\"Nomor Pesanan\"\r\n              aria-label=\"Nomor Pesanan\"\r\n              aria-describedby=\"basic-addon2\"\r\n            />\r\n            <div className=\"input-group-append\">\r\n              <button\r\n                className=\"btn btn-primary\"\r\n                type=\"button\"\r\n                onClick={() =>\r\n                  this.props.getNomorPesanan(\r\n                    document.getElementById(\"nomor_pesanan\")\r\n                  )\r\n                }\r\n              >\r\n                {this.props.isLoadingPesanan ? (\r\n                  <>\r\n                    <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Search\r\n                  </>\r\n                ) : (\r\n                  \"Search\"\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n          {/* <div>\r\n          <Field\r\n              id=\"list_barang\"\r\n              name=\"list_barang\"\r\n              label=\"List Barang\"\r\n              placeholder=\"Silahkan List Barang\"\r\n              options={[]}\r\n              component={ReanderSelect}\r\n            />\r\n          </div>\r\n          <div className=\"mt-2\">\r\n            <button type=\"submit\" className=\"btn btn-primary\">Simpan</button>\r\n          </div> */}\r\n        {/* </form> */}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nModalPesanan = reduxForm({\r\n  form: \"ModalPesanan\",\r\n  enableReinitialize: true,\r\n})(ModalPesanan);\r\nexport default connect(maptostate, null)(ModalPesanan);\r\n","import {\r\n  React,\r\n  Link,\r\n  ModalGlobal,\r\n  setItem,\r\n  reset,\r\n  Panel,\r\n  ToastNotification,\r\n  PanelHeader,\r\n  connect,\r\n  Tabel,\r\n  hideModal,\r\n  showModal,\r\n  postData,\r\n  // getItem,\r\n  PanelBody,\r\n  // lazy\r\n} from \"../../../components/helpers/library\";\r\n\r\nimport {\r\n  setCamera,\r\n  showEditBarang,\r\n  HeadEditDataBarang,\r\n  FormTambahBarang,\r\n} from \"./Module\";\r\n\r\nimport { getData, postData2, postDataNoTImeOut2 } from \"../../../config/axios\";\r\nimport { showModalPesanan } from \"../../../actions/databarang_action\";\r\nimport ModalPesanan from \"./ModalPesanan\";\r\nimport { dataURLtoFile, postImage } from \"../../../components/helpers/function\";\r\n\r\n// const FIlterPencarianBarang = lazy(() => import( \"./FIlterPencarianBarang.jsx\"));\r\n\r\nclass TambahBarang extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isEdit: false,\r\n      modalDialog: false,\r\n      isLoading: false,\r\n      formEdit: false,\r\n      loadingData: false,\r\n      databarang: [],\r\n      dataPesanan: [],\r\n      formTambahBarang: false,\r\n      fromModalPesanan: false,\r\n      isLoadingPesanan: false,\r\n      noPesanan: \"\",\r\n      columns: [\r\n        // {\r\n        //   dataField: \"kode_barang\",\r\n        //   text: \"Kode Barang \",\r\n        //   sort: true,\r\n        // },\r\n        {\r\n          dataField: \"kode_barcode\",\r\n          text: \"Kode Barcode\",\r\n          sort: true\r\n        },\r\n        {\r\n          dataField: \"kode_group\",\r\n          text: \"Kode Group\",\r\n        },\r\n        {\r\n          dataField: \"kode_toko\",\r\n          text: \"Kode Baki\",\r\n        },\r\n        {\r\n          dataField: \"kode_dept\",\r\n          text: \"Kode Jenis\",\r\n        },\r\n        {\r\n          dataField: \"nama_barang\",\r\n          text: \"Nama Barang\",\r\n        },\r\n        {\r\n          dataField: \"berat\",\r\n          text: \"Berat\",\r\n        },\r\n        {\r\n          dataField: \"action\",\r\n          text: \"Action\",\r\n          csvExport: false,\r\n          headerClasses: \"text-center\",\r\n          formatter: (rowcontent, row) => {\r\n\r\n            return (\r\n              <div className=\"row text-center\">\r\n                <div className=\"col-12\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => this.showModalDuplikatBarang(row)}\r\n                    className=\"btn btn-primary mr-3\"\r\n                  >\r\n                    <i className=\"fa fa-copy\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            );\r\n          },\r\n        },\r\n      ],\r\n    };\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.showModalTambahBarang = this.showModalTambahBarang.bind(this);\r\n    this.tambahbarang = this.tambahbarang.bind(this);\r\n    // this.getBarangKodeBaki = this.getBarangKodeBaki.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    localStorage.removeItem(\"estimasi_harga_tambah\")\r\n    // getData(\"barang/get/by-kode-baki/SEM-01\").then((res) => {\r\n    //   if (res.data.length === 0) {\r\n    //     this.setState({ databarang: [] });\r\n    //   } else {\r\n    //     this.setState({ databarang: res.data });\r\n    //   }\r\n    //   this.setState({ isLoading: false });\r\n    // });\r\n  }\r\n  tambahbarang(data) {\r\n    this.setState({ isLoading: true });\r\n    // console.log(data);\r\n\r\n    // return false;\r\n    let kode_baki = data.kode_lokasi_toko.split(\"~\");\r\n    let data_post = {\r\n      no_kirim_bos: \"-\",\r\n      kode_baki_label: \"-\",\r\n      qty_input: 1,\r\n      id_barang_pesanan: \"-\",\r\n      kode_group: data.kode_kategori,\r\n      kode_dept: data.kode_jenis,\r\n      kode_gudang: data.kode_gudang,\r\n      kode_toko: kode_baki[0],\r\n      susut_tukang: parseFloat(data.susut_tukang),\r\n      kode_intern: data.kode_intern || \"-\",\r\n      nama_barang: data.nama_barang,\r\n      berat: parseFloat(data.berat),\r\n      berat_asli: data.status_pesanan === \"PESANAN\" ? parseFloat(data.berat) : parseFloat(data.berat_asli) || 0,\r\n      // berat_awal: parseFloat(data.berat_awal) || 0,\r\n      tipe_barang : data.tipe_barang,\r\n      kadar_modal: parseFloat(data.kadar_modal) || 0,\r\n      kadar: parseFloat(data.kadar),\r\n      berat_cad: parseFloat(data.berat_cad),\r\n      berat_susut: parseFloat(data.berat_susut),\r\n      tujuan: data.tujuan,\r\n      kadar_cetak: data.kadar_cetak,\r\n      nama_atribut: data.nama_atribut || \"-\",\r\n      berat_atribut: parseFloat(data.berat_atribut) || 0,\r\n      berat_plastik: parseFloat(data.berat_plastik) || 0,\r\n      harga_atribut: parseInt(data.harga_atribut) || 0,\r\n      tag_id: \"-\",\r\n      berat_bandrol: 0,\r\n      no_pesanan: data.no_pesanan || \"-\",\r\n    };\r\n  \r\n    setTimeout(() => {\r\n      postDataNoTImeOut2(\"tambah-barang/create\", data_post)\r\n        .then((res) => {\r\n         \r\n          const file = data.foto !== undefined  ? dataURLtoFile(data.foto) : undefined ;\r\n          if(file !== undefined){\r\n            postImage(file,'foto_produk/'+data.kode_barcode).then((res)=>{\r\n            }).catch((err)=>{\r\n              ToastNotification('info', \"upload Foto Gagal, Silahkan Edit Didata Barang\")\r\n            })\r\n          }\r\n          getData(\"barang/get/by-kode-baki?kode_baki=\"+data.kode_lokasi_toko)\r\n            .then((res) => {\r\n              if (res.data.length === 0) {\r\n                this.setState({ databarang: [] });\r\n              } else {\r\n                this.setState({ databarang: res.data });\r\n              }\r\n              this.setState({ isLoading: false });\r\n            })\r\n            .catch((err) => {\r\n              this.setState({ isLoading: false, databarang: [] });\r\n              ToastNotification(\"info\", \"Kode Baki Yang Anda Dicari Tidak Ada\");\r\n            });\r\n          this.props.dispatch(reset(\"FormTambahBarang\"));\r\n          this.props.dispatch(hideModal());\r\n          ToastNotification(\"success\", \"Data Barang Berhasil Di Tambahkan\");\r\n        })\r\n        .catch((err) => {\r\n          this.setState({ isLoading: false });\r\n          ToastNotification(\r\n            \"info\",\r\n            err.response?.data?.message || \"Gagal Tambah Barang Silahkan Coba Lagi\"\r\n          );\r\n        });\r\n    }, 300);\r\n  }\r\n\r\n  showModalDuplikatBarang(row) {\r\n    getData(\"imagebarang/get/by-kode-barcode/\" + row.kode_barcode)\r\n      .then((res) => {\r\n        let dataEdit = {\r\n          foto: res.data.dataimage,\r\n          kode_barcode: row.kode_barcode,\r\n          nama_barang: row.nama_barang,\r\n          nama_atribut: row.nama_atribut || \"-\",\r\n          harga_atribut: row.harga_atribut || 0,\r\n          kode_intern: row.kode_intern,\r\n          kadar: row.kadar || 0,\r\n          kadar_cetak: row.kadar_cetak || 0,\r\n          kadar_modal: row.kadar_modal || 0,\r\n          kode_kategori: row.kode_group,\r\n          kode_jenis: row.kode_dept,\r\n          kode_lokasi_toko: row.kode_toko + \"~\" + row.kode_gudang,\r\n          berat: row.berat,\r\n          berat_asli: row.berat_asli,\r\n          berat_atribut: row.berat_atribut || 0,\r\n          berat_plastik: row.berat_plastik || 0,\r\n          tag_id: row.tag_id,\r\n          berat_bandrol: 0,\r\n        };\r\n        console.log(dataEdit);\r\n        setItem(\"data_kategori_jenis\", dataEdit);\r\n        this.setState({\r\n          formTambahBarang: true,\r\n        });\r\n        this.props.dispatch(showModal());\r\n        this.props.dispatch(showEditBarang(dataEdit));\r\n      })\r\n      .catch((err) => {\r\n        let dataEdit = {\r\n          foto: '-',\r\n          kode_barcode: row.kode_barcode,\r\n          nama_barang: row.nama_barang,\r\n          nama_atribut: row.nama_atribut || \"-\",\r\n          harga_atribut: row.harga_atribut || 0,\r\n          kode_intern: row.kode_intern,\r\n          kadar: row.kadar || 0,\r\n          kadar_cetak: row.kadar_cetak || 0,\r\n          kadar_modal: row.kadar_modal || 0,\r\n          kode_kategori: row.kode_group,\r\n          kode_jenis: row.kode_dept,\r\n          kode_lokasi_toko: row.kode_toko + \"~\" + row.kode_gudang,\r\n          berat: row.berat,\r\n          berat_asli: row.berat_asli,\r\n          berat_atribut: row.berat_atribut || 0,\r\n          berat_plastik: row.berat_plastik || 0,\r\n          tag_id: row.tag_id,\r\n          berat_bandrol: 0,\r\n        };\r\n        setItem(\"data_kategori_jenis\", dataEdit);\r\n        this.setState({\r\n          formTambahBarang: true,\r\n        });\r\n        this.props.dispatch(showModal());\r\n        this.props.dispatch(showEditBarang(dataEdit));\r\n      });\r\n\r\n  }\r\n\r\n  showModalTambahBarang(data) {\r\n    // console.log(data);\r\n    setItem(\"data_kategori_jenis\", data);\r\n    this.setState({\r\n      formTambahBarang: true,\r\n    });\r\n    this.props.dispatch(showModal());\r\n    this.props.dispatch(showEditBarang(data));\r\n  }\r\n\r\n  showBarangPesanan = () => {\r\n    this.setState({\r\n      fromModalPesanan: true,\r\n      formTambahBarang: false,\r\n    });\r\n    this.props.dispatch(showModal());\r\n    this.props.dispatch(showModalPesanan());\r\n  };\r\n\r\n  getBarangPesanan() {\r\n    getData(\"pesanan/no/\" + this.state.noPesanan)\r\n      .then((res) => console.log(res.data))\r\n      .catch((err) => ToastNotification('info',err.response.data));\r\n  }\r\n\r\n  handleSubmit(data) {\r\n    this.setState({ isLoading: true });\r\n    let saveImage = {\r\n      kode_barcode: data.kode_barcode,\r\n      dataimage: data.foto,\r\n    };\r\n    // console.log(data.foto);\r\n    let hasil = {\r\n      nama_barang: data.nama_barang,\r\n      nama_atribut: data.nama_atribut,\r\n      harga_atribut: data.harga_atribut,\r\n      kode_intern: data.kode_intern,\r\n      kadar: data.kadar,\r\n      kadar_cetak: data.kadar_cetak,\r\n    };\r\n    postData(\"barang/edit/\" + data.kode_barcode, hasil)\r\n      .then(() => {\r\n        this.props.dispatch(hideModal());\r\n      })\r\n      .then(() => {\r\n        if (data.foto === undefined) {\r\n        } else {\r\n          postData(\"imagebarang/add\", saveImage)\r\n            .then((res) => {\r\n              // console.log(res.data);\r\n            })\r\n            .catch((error) => {\r\n              // console.log(error.response.data);\r\n            });\r\n        }\r\n      })\r\n      .then(() => {\r\n        this.setState({ databarang: [] });\r\n        this.props.dispatch(reset(\"HeadEditDataBarang\"));\r\n        this.props.dispatch(setCamera(false));\r\n      })\r\n      .then(() => {\r\n        ToastNotification(\"success\", \"Data Berhasil Disimpan\");\r\n      })\r\n      .then(() => {\r\n        this.setState({ isLoading: false });\r\n      })\r\n      .catch((error) => {\r\n        this.setState({ isLoading: false });\r\n        ToastNotification(\"info\", \"Barang Gagal Di Edit\");\r\n      });\r\n  }\r\n\r\n  getNomorPesanan(nomor_pesanan) {\r\n    this.setState({\r\n      isLoadingPesanan: true\r\n    })\r\n    postData2(\"pesanan/valid/no\", { no_pesanan: nomor_pesanan.value.trim() })\r\n      .then((res) => {\r\n        // console.log(res.data);\r\n        this.setState({\r\n          isLoadingPesanan: false,\r\n        })\r\n        \r\n       \r\n\r\n        let dataEdit = res.data.detail_barang.map((detail) => {\r\n     \r\n            return {\r\n              kode_barcode: detail.kode_barcode,\r\n              nama_atribut: detail.attribut || \"-\",\r\n              harga_atribut: detail.harga_atribut || 0,\r\n              kode_intern: \"-\",\r\n              susut_tukang: res.data.susut_tukang || 0,\r\n              kadar: detail.perkiraan_kadar,\r\n              nama_barang: detail.keterangan,\r\n              ongkos: detail.ongkos || 0,\r\n              berat_susut: detail.berat_susut || 0,\r\n              berat_cad: detail.berat_cad || 0,\r\n              tujuan: detail.tujuan || '-',\r\n              kadar_cetak: 0,\r\n              kadar_modal: detail.kadar_modal || 0,\r\n              kode_kategori: detail.kode_kategori,\r\n              kode_jenis: detail.kode_jenis || '',\r\n              kode_lokasi_toko: detail.kode_toko || '',\r\n              berat: detail.perkiraan_berat,\r\n              berat_asli: detail.perkiraan_berat || 0,\r\n              berat_atribut: detail.berat_atribut || 0,\r\n              berat_plastik: detail.berat_plastik || 0,\r\n              tag_id: detail.tag_id || \"-\",\r\n              berat_bandrol: 0,\r\n              no_pesanan: nomor_pesanan.value,\r\n              status: \"PESANAN\",\r\n            };\r\n            \r\n           \r\n        })[0];\r\n       \r\n        this.props.dispatch(showModal());\r\n        this.props.dispatch(showEditBarang(dataEdit));\r\n        this.setState({\r\n          formTambahBarang: true,\r\n          fromModalPesanan: false,\r\n        });\r\n\r\n      })\r\n      .catch((err) => {\r\n        // console.log(err);\r\n        this.setState({\r\n          isLoadingPesanan: false,\r\n        })\r\n        ToastNotification(\r\n          \"info\",\r\n          err.response === undefined\r\n            ? \"Terjadi Kesalahan Saat Request Data\"\r\n            : err.response.data.message\r\n        );\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const expandRow = {\r\n      renderer: (row) => (\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-12\">\r\n              Nama Atribut : {row.nama_atribut} <br />\r\n              Berat Atribut : {row.berat_atribut} <br />\r\n              Berat Plastik : {row.berat_plastik} <br />\r\n              Harga Atribut : {row.harga_atribut} <br />\r\n              Kode Intern : {row.kode_intern} <br />\r\n              Kadar : {row.kadar} <br />\r\n              Kadar Cetak : {row.kadar_cetak} <br />\r\n              Kode Toko : {row.kode_toko} <br />\r\n              Kode Gudang : {row.kode_gudang} <br />\r\n              Stock : {row.stock_on_hand} <br />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ),\r\n      showExpandColumn: true,\r\n      expandByColumnOnly: true,\r\n    };\r\n    return (\r\n      <div>\r\n        <ol className=\"breadcrumb float-xl-right\">\r\n          <li className=\"breadcrumb-item\">\r\n            <Link to=\"#\">Pesanan</Link>\r\n          </li>\r\n          <li className=\"breadcrumb-item active\">Pesanan Selesai</li>\r\n        </ol>\r\n        <h1 className=\"page-header\">Pesanan Selesai </h1>\r\n\r\n        {/* <Panel>\r\n          <PanelHeader>Pesanan Selesai</PanelHeader>\r\n          <br />\r\n            <PanelBody>\r\n            <FIlterPencarianBarang\r\n              onSubmit={(data) => this.showModalTambahBarang(data)}\r\n              barangPesanan={this.showBarangPesanan}\r\n            />\r\n          </PanelBody>\r\n        </Panel> */}\r\n        <Panel>\r\n          <PanelHeader>Data Barang</PanelHeader>\r\n          <br />\r\n          <PanelBody>\r\n            <Tabel\r\n              keyField=\"kode_barang\"\r\n              exportCsv={true}\r\n              handleClick={()=>this.showBarangPesanan()}\r\n              tambahData={true}\r\n              btnText=\"Pesanan Selesai\"\r\n              data={this.state.databarang}\r\n              columns={this.state.columns}\r\n              empty={true}\r\n              textEmpty={\r\n                this.state.loadingData ? (\r\n                  <>\r\n                    {\" \"}\r\n                    <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Sedang\r\n                    Mencari Data Barang\r\n                  </>\r\n                ) : (\r\n                  \"Data Barang Kosong\"\r\n                )\r\n              }\r\n              expandRow={expandRow}\r\n            />\r\n            </PanelBody>\r\n\r\n          <br />\r\n          {/* End Data Barang */}\r\n          <ModalGlobal\r\n            size=\"l\"\r\n            title={\r\n              this.state.formTambahBarang\r\n                ? \"Tambah Barang\"\r\n                : this.state.fromModalPesanan\r\n                  ? \"Barang Pesanan\"\r\n                  : \"Edit Barang\"\r\n            }\r\n            content={\r\n              this.state.formTambahBarang ? (\r\n                <FormTambahBarang\r\n                  isLoading={this.state.isLoading}\r\n                  onSubmit={(data) => this.tambahbarang(data)}\r\n                />\r\n              ) : this.state.fromModalPesanan ? (\r\n                <ModalPesanan\r\n                  isLoadingPesanan={this.state.isLoadingPesanan}\r\n                  getNomorPesanan={(no) => this.getNomorPesanan(no)}\r\n                  onSubmit={(data) => this.tambahbarang(data)}\r\n                />\r\n              ) : (\r\n                <HeadEditDataBarang\r\n                  isLoading={this.state.isLoading}\r\n                  onSubmit={(data) => this.handleSubmit(data)}\r\n                />\r\n              )\r\n            }\r\n          />\r\n          {/* End Tambah Data Barang  */}\r\n        </Panel>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect()(TambahBarang);\r\n"],"sourceRoot":""}