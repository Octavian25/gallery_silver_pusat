{"version":3,"sources":["assets/img/login-bg/backround-kresno.png","pages/auth/login.jsx"],"names":["module","exports","__webpack_require__","p","FormLogin","lazy","Promise","all","e","then","bind","Login","props","_this","Object","_Users_nagatech_WebstormProjects_gallery_silver_pusat_master_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_super","call","state","date","getDate","Date","toDateString","setState","isLoading","_this2","localStorage","setItem","JSON","stringify","window","location","href","localStoragedecryp","getToday","history","push","pushState","document","title","addEventListener","event","context","handleSetPageSidebar","handleSetPageHeader","handleSetBodyWhiteBg","getData","res","row","alamat_toko","data","nama_toko","catch","err","Swal","fire","text","undefined","response","icon","_this3","hasil","user_id","password","postData","resposn","localStorageencryp","token","ToastNotification","onfiled","_this4","react__WEBPACK_IMPORTED_MODULE_4___default","a","createElement","className","style","backgroundImage","concat","require","onSubmit","React","Component","contextType","PageSettings","withRouter"],"mappings":"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","file":"static/js/43.a28eae45.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/backround-kresno.57bcbf16.png\";","import React, { lazy } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport Swal from \"sweetalert2\";\nimport {\n  getToday,\n  localStoragedecryp,\n  localStorageencryp,\n  setItem,\n} from \"../../components/helpers/function.jsx\";\nimport { ToastNotification } from \"../../components/helpers/notification.jsx\";\nimport { getData, postData } from \"../../config/axios.jsx\";\nimport { PageSettings } from \"../../config/page-settings.js\";\nconst FormLogin = lazy(() => import(\"./FormLogin.jsx\"));\n// const Address = process.env.REACT_APP_ADDRESS;\n\nclass Login extends React.Component {\n  static contextType = PageSettings;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: false,\n      // isLogin: false,\n      // alamat : \"\"\n    };\n  }\n\n  state = {\n    date: \"\",\n  };\n\n  getDate = () => {\n    var date = new Date().toDateString();\n    this.setState({ date });\n  };\n\n  componentDidMount() {\n    localStorage.setItem('base_url',JSON.stringify(window.location.href))\n    const isAuthenticated = localStoragedecryp(\"islogin\");\n    if (isAuthenticated === getToday()) {\n      this.props.history.push(\"/dashboard\");\n    }\n    window.history.pushState(null, document.title, window.location.href);\n    window.addEventListener(\"popstate\", function (event) {\n      window.history.pushState(null, document.title, window.location.href);\n    });\n\n    this.context.handleSetPageSidebar(false);\n    this.context.handleSetPageHeader(false);\n    this.context.handleSetBodyWhiteBg(true);\n    this.getDate();\n    // console.log(encryptascii('sa'));\n    // console.log(decryptascii('BF95'));\n    getData('system/get').then((res) => {\n      // console.log(res.data[0].alamat_toko);\n      let row = {\n        alamat_toko : res.data[0].alamat_toko,\n        nama_toko : res.data[0].nama_toko\n      }\n      setItem('data_toko', row)\n      \n      this.setState({\n        alamat_toko : res.data[0].alamat_toko,\n        nama_toko : res.data[0].nama_toko\n      })\n    }).catch((err) => {\n      this.setState({\n        alamat_toko : \"\",\n        nama_toko : \"\"\n      })\n    })\n  }\n\n  componentWillUnmount() {\n    this.context.handleSetPageSidebar(true);\n    this.context.handleSetPageHeader(true);\n    this.context.handleSetBodyWhiteBg(false);\n  }\n\n  onfiled(err) {\n    // NotifError(err)\n    Swal.fire({\n      title: \"Oopss !!!\",\n      text: err.response === undefined ? 'Terjadi Kesalahan Saat Request Data' : err.response.data,\n      icon: \"info\",\n    });\n    this.setState({ isLoading: false });\n  }\n  onSubmit(data) {\n    let hasil = {\n      user_id: data.user_id,\n      password: data.password,\n    };\n\n    this.setState({ isLoading: true });\n    postData(\"users/login\", hasil)\n      .then((resposn) => {\n        localStorageencryp(\"userdata\", JSON.stringify(resposn.data));\n        localStorageencryp(\"token\", resposn.data.token);\n        localStorageencryp(\"islogin\", getToday());\n      }).then(() => {\n        getData('akses-user/id/'+data.user_id).then((res) => {\n          localStorage.setItem('menu',JSON.stringify(res.data))\n        }).catch((err) => {\n          ToastNotification(\"info\",err.response.data)\n        })\n      })\n      .then(() => this.props.history.push(\"/dashboard\"))\n      .catch((err) => this.onfiled(err));\n  }\n\n  render() {\n    return (\n      <div className=\"login login-with-news-feed\">\n        <div className=\"news-feed\">\n          <div\n            className=\"news-image\"\n            style={{\n              backgroundImage: `url(${require(\"../../assets/img/login-bg/backround-kresno.png\")})`,\n            }}\n          ></div>\n          <div className=\"news-caption text-center\">\n            {/* <h4 className=\"caption-title\">\n              <b>Toko</b> Mas Kresno\n            </h4> */}\n            <p>\n            {this.state.alamat_toko}\n            </p>\n          </div>\n        </div>\n        <div className=\"right-content\">\n          <FormLogin\n            isLoading={this.state.isLoading}\n            nama_toko = {this.state.nama_toko}\n            onSubmit={(data) => this.onSubmit(data)}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Login);"],"sourceRoot":""}