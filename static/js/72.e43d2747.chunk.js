(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{1269:function(t,e,a){"use strict";a.r(e);var n=a(8),r=a(9),l=a(14),o=a(11),c=a(10),i=a(1),s=a.n(i),u=a(32),d=a(45),g=a(25),m=a(16),E=a(323),b=(a(339),a(19)),h=a(322),p=a(20),f=a(2),k=a(49),O=a(65),y=a(50),_=a.n(y),v=function(t){Object(o.a)(a,t);var e=Object(c.a)(a);function a(t){var r;return Object(n.a)(this,a),(r=e.call(this,t)).state={},r}return Object(r.a)(a,[{key:"render",value:function(){var t=0,e=0;return this.props.data.forEach(function(a,n){a.detail.forEach(function(a,n){a.stock_on_hand,e+=a.berat_atribut,t+=a.berat}),a.detail.length}),s.a.createElement(s.a.Fragment,null,s.a.createElement(_.a,{id:"test-table-xls-button",className:"btn btn-success btn-block",table:"table-to-xls",filename:"Laporan Hancur Barang",sheet:"Laporan Hancur Barang",buttonText:"Export Exel"}),s.a.createElement("table",{rowkey:"kode_member",id:"table-to-xls",style:{display:"none"}},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{colSpan:"8"}," Laporan Hancur Barang ")),s.a.createElement("tr",null,s.a.createElement("th",{colSpan:"8"}," Periode ")),s.a.createElement("tr",null,s.a.createElement("th",{colSpan:"8"}," ",0===Object(f.u)("tgl_laporan").length?null:JSON.parse(Object(f.u)("tgl_laporan")).tgl_awal+" s/d "+JSON.parse(Object(f.u)("tgl_laporan")).tgl_akhir," ")),s.a.createElement("tr",null,s.a.createElement("th",{colSpan:"8"}," TOKO :  ",Object(f.s)().nama_toko," ")),s.a.createElement("tr",null,s.a.createElement("th",{colSpan:"8"}," ALAMAT :  ",Object(f.s)().alamat_toko," ")),s.a.createElement("tr",null,s.a.createElement("th",{colSpan:"8"})),s.a.createElement("tr",null,s.a.createElement("th",{style:{backgroundColor:"#E8E5E5",color:"#000"}},"NO"),s.a.createElement("th",{style:{backgroundColor:"#E8E5E5",color:"#000"}},"KODE GUDANG"),s.a.createElement("th",{style:{backgroundColor:"#E8E5E5",color:"#000"}},"KODE BAKI"),s.a.createElement("th",{style:{backgroundColor:"#E8E5E5",color:"#000"}},"KODE BARCODE"),s.a.createElement("th",{style:{backgroundColor:"#E8E5E5",color:"#000"}},"NAMA BARANG"),s.a.createElement("th",{style:{backgroundColor:"#E8E5E5",color:"#000"}},"KONDISI BARANG"),s.a.createElement("th",{style:{backgroundColor:"#E8E5E5",color:"#000"}},"NAMA ATRIBUT"),s.a.createElement("th",{style:{backgroundColor:"#E8E5E5",color:"#000",textAlign:"right"}},"BERAT ATRIBUT"),s.a.createElement("th",{style:{backgroundColor:"#E8E5E5",color:"#000",textAlign:"right"}},"BERAT"))),s.a.createElement("tbody",null,this.props.data.map(function(t,e){return s.a.createElement("div",{key:e},t.detail.map(function(t,a){return s.a.createElement("tr",{key:a},s.a.createElement("td",null," ",++e),s.a.createElement("td",null," ",t.kode_gudang),s.a.createElement("td",null," ",t.kode_baki),s.a.createElement("td",null,"\xa0",t.kode_barcode),s.a.createElement("td",null," ",t.nama_barang),s.a.createElement("td",null," ",t.kondisi_barang),s.a.createElement("td",null," ",t.nama_atribut),s.a.createElement("td",{style:{textAlign:"right"}}," ",Object(f.n)(t.berat_atribut,2)),s.a.createElement("td",{style:{textAlign:"right"}}," ",Object(f.n)(t.berat,2)))}))})),s.a.createElement("tfoot",null,s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"5",style:{backgroundColor:"#E8E5E5",color:"#000",textAlign:"center"}}," ","Total"),s.a.createElement("td",{style:{backgroundColor:"#E8E5E5",color:"#000"}}," "),s.a.createElement("td",{style:{backgroundColor:"#E8E5E5",color:"#000"}}," "),s.a.createElement("td",{style:{backgroundColor:"#E8E5E5",color:"#000",textAlign:"right"}}," ",Object(f.n)(e,2)," "),s.a.createElement("td",{style:{backgroundColor:"#E8E5E5",color:"#000",textAlign:"right"}}," ",Object(f.n)(t,2)," ")))))}}]),a}(i.Component),j=a(33),x=(a(53),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=new j.default("l","mm",[297,210]),a=[],n=30,r=0,l=0;e.setFontSize(15),e.text("LAPORAN HANCUR BARANG",14,15),e.setFontSize(20),e.text(Object(f.s)().nama_toko,200,15),e.setFontSize(8);var o=Object(f.s)().alamat_toko.length;o>20&&e.text(Object(f.s)().alamat_toko.slice(0,48),200,20),o>50&&e.text(Object(f.s)().alamat_toko.slice(48,90),200,25),e.setFontSize(10),e.setProperties({title:"Laporan Hancur Barang"}),e.text("PERIODE : ".concat(0===Object(f.u)("tgl_laporan").length?null:JSON.parse(Object(f.u)("tgl_laporan")).tgl_awal+" s/d "+JSON.parse(Object(f.u)("tgl_laporan")).tgl_akhir),14,25);var c=1;t.forEach(function(t,e){t.detail.forEach(function(t,e){var n=[c,t.kode_gudang,t.kode_baki,t.kode_barcode,t.nama_barang,t.kondisi_barang,t.nama_atribut,{content:Object(f.n)(t.berat_atribut,3),styles:{halign:"right"}},{content:Object(f.n)(t.berat,3),styles:{halign:"right"}}];parseFloat(t.berat),parseFloat(t.berat_atribut),r+=parseFloat(t.berat),l+=parseFloat(t.berat_atribut),a.push(n),++c}),t.detail.length});var i=[{content:"Total",colSpan:5,styles:{halign:"center",fillColor:"#E8E5E5",textColor:"#000"}},{content:"",styles:{fillColor:"#E8E5E5",textColor:"#000"}},{content:"",styles:{halign:"center",fillColor:"#E8E5E5",textColor:"#000"}},{content:"".concat(Object(f.n)(l,3)),styles:{fillColor:"#E8E5E5",textColor:"#000",halign:"right"}},{content:"".concat(Object(f.n)(r,3)),styles:{fillColor:"#E8E5E5",textColor:"#000",halign:"right"}}];a.push(i);var s=[{colSpan:9,content:"Printed By ".concat(JSON.parse(Object(f.u)("userdata")).user_id," / ").concat(Object(f.r)()),styles:{fontStyle:"italic",textColor:"#000"}}];a.push(s),e.autoTable({head:[[{content:"No"},{content:"Kode Gudang"},{content:"Kode Baki"},{content:"BARCODE"},{content:"NAMA BARANG"},{content:"Kondisi Barang"},{content:"NAMA ATR"},{content:"BRT ATR",styles:{halign:"right"}},{content:"BERAT",styles:{halign:"right"}}]],body:a,startY:n,theme:"plain",rowPageBreak:"avoid",margin:{top:10},footStyles:{fontSize:8},bodyStyles:{fontSize:8},headStyles:{fontSize:8,fillColor:"#E8E5E5",textColor:"#000"}}),n=e.autoTableEndPosY()+3,a=[];var u=e.internal.getNumberOfPages(),d=e.internal.pageSize.width,g=e.internal.pageSize.height;e.setFontSize(10);for(var m=1;m<u+1;m++){var E=d/2,b=g-10;e.setPage(m),e.text("".concat(m," of ").concat(u),E,b,{align:"center"})}var h=e.output("datauristring"),p=window.open();p.document.open(),p.document.write("<html><head><title>Laporan Hancur Barang</title></head><body style='margin:0 !important'><embed width='100%' height='100%'  src="+h+"></embed></body></html>")}),S=function(t){Object(o.a)(a,t);var e=Object(c.a)(a);function a(t){var r;return Object(n.a)(this,a),(r=e.call(this,t)).state={date:new Date},r.setStartDate=r.setStartDate.bind(Object(l.a)(r)),r.setLastDate=r.setLastDate.bind(Object(l.a)(r)),r}return Object(r.a)(a,[{key:"exportPdf",value:function(){x(this.props.LaporanDataBarang)}},{key:"setStartDate",value:function(t){this.setState({tgl_awal:new Date(t)})}},{key:"setLastDate",value:function(t){this.setState({tgl_akhir:new Date(t)})}},{key:"render",value:function(){var t=this,e=[];this.props.LaporanDataBarang.forEach(function(t){t.detail.forEach(function(t){e.push(t),t.berat})});var a=[{dataField:"kode_gudang",text:"Kode Gudang",footerAttrs:{colSpan:"4"},footer:function(t,a,n,r){return s.a.createElement("div",null,"Total Barang  : ",e.length," ")}},{dataField:"kode_baki",text:"Kode Baki"},{dataField:"kode_barcode",text:"Kode Barcode"},{dataField:"nama_barang",text:"Nama Barang"},{dataField:"berat",text:"Berat",headerClasses:"text-right",formatter:function(t){return s.a.createElement("div",{className:"text-right"}," ",Object(f.n)(t,2)," ")},footer:function(t){return s.a.createElement("div",{className:"text-right"}," ",Object(f.n)(t.reduce(function(t,e){return t+e},0),2)," ")}}];return s.a.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-4"},s.a.createElement(h.a,{name:"tgl_awal",component:p.c,label:"Tanggal Dari",type:"text",selected:this.state.tgl_awal,onChange:function(e){return t.setStartDate(e)},placeholder:"Masukan Tanggal Dari"})),s.a.createElement("div",{className:"col-lg-4"},s.a.createElement(h.a,{name:"tgl_akhir",component:p.c,type:"text",selected:this.state.tgl_akhir,onChange:function(e){return t.setLastDate(e)},label:"Tanggal Akhir",placeholder:"Masukan Tanggal Akhir"})),s.a.createElement("div",{className:"col-lg-4"},s.a.createElement("div",{className:"text-right"},s.a.createElement("label",null,"\xa0"),s.a.createElement("button",{type:"submit",value:"PDF",name:"type_btn",className:"btn btn-primary btn-block"},this.props.isLoading?s.a.createElement(s.a.Fragment,null,s.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Mencari"):"Cari Laporan"))),s.a.createElement("div",{className:"col-12"},s.a.createElement(k.a,{keyField:"kode_gudang",data:this.props.export?e:[],columns:a,empty:!0,textEmpty:"Data Laporan Hancur Barang Kosong"})),s.a.createElement("div",{className:this.props.export?"col-lg-12":"col-lg-12 d-none"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-6"},s.a.createElement("button",{type:"button",onClick:function(){return t.exportPdf()},className:"btn btn-warning btn-block"}," ","Export PDF"," ")),s.a.createElement("div",{className:"col-lg-6"},s.a.createElement(v,{data:this.props.LaporanDataBarang}))))),this.props.isLoading&&s.a.createElement(f.a,null))}}]),a}(i.Component);S=Object(E.a)({form:"HeadHancurBarang",enableReinitialize:!0,validate:O.a})(S);var A=Object(g.b)(function(t){return{initialValues:{tgl_awal:Object(f.q)(),tgl_akhir:Object(f.q)()}}})(S),N=function(t){Object(o.a)(a,t);var e=Object(c.a)(a);function a(t){var r;return Object(n.a)(this,a),(r=e.call(this,t)).state={isEdit:!1,modalDialog:!1,isLoading:!1,username:!1,export:!1,LaporanDataBarang:[],tgl_awal:new Date,tgl_akhir:new Date},r.handleSubmit=r.handleSubmit.bind(Object(l.a)(r)),r}return Object(r.a)(a,[{key:"handleSubmit",value:function(t){var e=this;this.setState({isLoading:!0});var a={tgl_awal:Object(f.i)(t.tgl_awal),tgl_akhir:Object(f.i)(t.tgl_akhir)};Object(m.n)("hancurbarang/get/report",a).then(function(t){0===t.data.length?(Object(b.e)("info","Data Yang Anda Cari Tidak Ada"),e.setState({isLoading:!1,export:!1})):(Object(f.v)("tgl_laporan",JSON.stringify(a)),Object(b.e)("success","Laporan Hancur Barang Tersedia"),e.setState({LaporanDataBarang:t.data,isLoading:!1,export:!0}))}).catch(function(t){return e.errorHandling(t)})}},{key:"errorHandling",value:function(t){Object(b.a)(t),this.setState({isLoading:!1,export:!1})}},{key:"render",value:function(){var t=this;return s.a.createElement("div",null,s.a.createElement("ol",{className:"breadcrumb float-xl-right"},s.a.createElement("li",{className:"breadcrumb-item"},s.a.createElement(u.b,{to:"#"},"Laporan Barang")),s.a.createElement("li",{className:"breadcrumb-item active"},"Laporan Hancur Barang")),s.a.createElement("h1",{className:"page-header"},"Laporan Hancur Barang "),s.a.createElement(d.a,null,s.a.createElement(d.c,null,"Filter Laporan"),s.a.createElement("br",null),s.a.createElement(d.b,null,s.a.createElement(A,{export:this.state.export,LaporanDataBarang:this.state.LaporanDataBarang,isLoading:this.state.isLoading,onSubmit:function(e){return t.handleSubmit(e)}})),s.a.createElement("br",null)))}}]),a}(s.a.Component);N=Object(E.a)({form:"FormLaporanHancurBarang",enableReinitialize:!0})(N);e.default=Object(g.b)(function(t){return{hideModal:t.datamaster.modalDialog}},null)(N)}}]);
//# sourceMappingURL=72.e43d2747.chunk.js.map