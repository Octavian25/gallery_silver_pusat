(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{1280:function(e,a,t){"use strict";t.r(a);var n=t(8),i=t(9),s=t(15),r=t(11),o=t(10),c=t(48),d=t.n(c),l=t(103),b=t(66),p=t(0),m=t.n(p),u=t(31),h=t(57),g=t(7),f=t(30),k=t(27),v=t.n(k),O=t(23),j=t(18),E=t(45),K=t(4),x=t(53),P=t(320),_=t(321),S=t(20),y=function(e,a){var t={};return e.kondisi_barang||(t.kondisi_barang="kondisi Tidak Boleh Kosong"),e.persentase||(t.persentase="Presentase Tidak Boleh Kosong"),t},M=t(63),D=t.n(M),w=t(101),N=Object(w.createNumberMask)({prefix:"Rp. ",locale:"kr-KO"}),L=function(e){Object(r.a)(t,e);var a=Object(o.a)(t);function t(){var e;Object(n.a)(this,t);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(e=a.call.apply(a,[this].concat(s))).state={aktif:!1},e}return Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.props.isEdit,document.getElementById("kondisi_barang").focus()},100)}},{key:"render",value:function(){var e=this;return m.a.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off"},m.a.createElement("input",{type:"hidden",name:"kondisi_barang_lama"}),m.a.createElement("div",{className:"col-lg-4d-none"},m.a.createElement(P.a,{name:"id",component:S.b,type:"hidden",readOnly:this.props.isEdit})),m.a.createElement(P.a,{tabIndex:"1",id:"kondisi_barang",name:"kondisi_barang",component:S.e,type:"text",label:" Kondisi Pembelian",placeholder:"Masukan  Kondisi Pembelian"}),m.a.createElement(P.a,Object.assign({tabIndex:"2",id:"potongan_harga",name:"potongan_harga",component:S.e,type:"text"},N,{label:"Potongan Harga",onBlur:function(){return e.setState({aktif:!0})},placeholder:"Masukan Potongan Harga"})),m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-12 text-right"},m.a.createElement("button",{className:"btn btn-white",onClick:function(){return e.props.dispatch(Object(g.Qb)())},type:"button",disabled:this.props.isLoading},"Batal"),"\xa0",m.a.createElement("button",{tabIndex:"3",className:this.state.aktif?"btn btn-primary":"btn btn-white",disabled:this.props.submitting,type:"submit"},this.props.isLoading?m.a.createElement(m.a.Fragment,null,m.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyimpan"):"Simpan Data"))),this.props.isLoading?m.a.createElement(D.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}]),t}(p.Component);L=Object(_.a)({form:"ModalKondisiPembelian",enableReinitialize:!0,validate:y})(L);var B=Object(f.b)(function(e){if(null!==e.datamaster.ShowModalKondisiPembelian)return{initialValues:{id:e.datamaster.ShowModalKondisiPembelian.id,kondisi_barang_lama:e.datamaster.ShowModalKondisiPembelian.kondisi_barang,kondisi_barang:e.datamaster.ShowModalKondisiPembelian.kondisi_barang,potongan_harga:e.datamaster.ShowModalKondisiPembelian.potongan_harga}}},null)(L),T=t(141),C=function(e,a,t){v.a.fire({html:"Apakah Anda Yakin Ingin Menghapus <h1><b>Kode Kondisi Pembelian "+e.kondisi_barang+"</b> ?</h1>",icon:"warning",position:"top-center",cancelButtonText:"Tidak",showCancelButton:!0,confirmButtonText:"OK",showConfirmButton:!0}).then(function(){var n=Object(b.a)(d.a.mark(function n(i){var s,r,o;return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!i.isConfirmed){n.next=26;break}n.prev=1,s=Object(l.a)(t),n.prev=3,s.s();case 5:if((r=s.n()).done){n.next=11;break}return o=r.value,n.next=9,Object(j.q)(o.portal+"/api/v1/parabeli/delete/by-kode-kondisi",{kondisi_barang:e.kondisi_barang});case 9:n.next=5;break;case 11:n.next=16;break;case 13:n.prev=13,n.t0=n.catch(3),s.e(n.t0);case 16:return n.prev=16,s.f(),n.finish(16);case 19:Object(O.d)("Data Berhasil Di Hapus"),n.next=25;break;case 22:n.prev=22,n.t1=n.catch(1),Object(O.e)("error","Gagal Hapus Data");case 25:Object(j.b)("parabeli/delete/by-kode-kondisi/"+e._id).then(function(){Object(O.d)("Data Berhasil Di Hapus").then(function(){return a(Object(g.Fb)())})});case 26:case"end":return n.stop()}},n,null,[[1,22],[3,13,16,19]])}));return function(e){return n.apply(this,arguments)}}()).catch(function(e){Object(O.e)("error",e.response.data)})},F=function(e){Object(r.a)(t,e);var a=Object(o.a)(t);function t(e){var i;return Object(n.a)(this,t),(i=a.call(this,e)).state={isEdit:!1,isLoading:!1,modalDialog:!1,columns:[{dataField:"kondisi_barang",text:"Kode Kondisi Pembelian",sort:!0},{dataField:"potongan",text:"Potongan Harga",formatter:function(e){return void 0===e?0:e.toLocaleString("kr-KO")}},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:function(e,a){var t={id:a._id,kondisi_barang:a.kondisi_barang,potongan_harga:a.potongan};return m.a.createElement("div",{className:"row text-center"},m.a.createElement("div",{className:"col-12"},m.a.createElement("button",{onClick:function(){return i.formEditKondisiPembelian(t)},className:"btn btn-primary mr-3"},m.a.createElement("i",{className:"fa fa-edit"})),m.a.createElement("button",{onClick:function(){return C(a,i.props.dispatch,i.props.getMasterToko)},className:"btn btn-danger"},m.a.createElement("i",{className:"fa fa-trash"}))))}}]},i.handleSubmit=i.handleSubmit.bind(Object(s.a)(i)),i}return Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(g.Fb)()),this.props.dispatch(Object(g.Kb)())}},{key:"handleSubmit",value:function(){var e=Object(b.a)(d.a.mark(function e(a){var t,n,i,s,r,o,c,b,p,m=this;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({isLoading:!0}),t={kondisi_barang:a.kondisi_barang,potongan:a.potongan_harga,persentase:1},n={kondisi_barang:a.kondisi_barang,potongan:a.potongan_harga||0,persentase:1},i=this.props.getMasterToko,!this.state.isEdit){e.next=33;break}e.prev=5,s=Object(l.a)(i),e.prev=7,s.s();case 9:if((r=s.n()).done){e.next=15;break}return o=r.value,e.next=13,Object(j.q)(o.portal+"/api/v1/parabeli/edit/by-kode-kondisi",t);case 13:e.next=9;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),s.e(e.t0);case 20:return e.prev=20,s.f(),e.finish(20);case 23:Object(O.e)("success","Data Berhasil Diubah!"),e.next=30;break;case 26:e.prev=26,e.t1=e.catch(5),this.setState({isLoading:!1}),Object(O.e)("info",void 0===e.t1.response?"Terjadi Kesalahan Saat Megirim Data ":e.t1.response.data);case 30:Object(j.m)("parabeli/edit/by-kode-kondisi/"+a.id,t).then(function(){m.props.dispatch(Object(g.Fb)()),m.props.dispatch(Object(g.Qb)())}).then(function(){m.setState({isLoading:!1})}).then(function(){m.setState({isLoading:!1}),m.props.dispatch(Object(E.d)("ModalKondisiPembelian"))}).catch(function(e){m.setState({isLoading:!1}),Object(O.e)("info",void 0===e.response?"Terjadi Kesalahan Saat Megirim Data ":e.response.data)}),e.next=59;break;case 33:e.prev=33,c=Object(l.a)(i),e.prev=35,c.s();case 37:if((b=c.n()).done){e.next=43;break}return p=b.value,e.next=41,Object(j.l)(p.portal+"/api/v1/parabeli/add",n);case 41:e.next=37;break;case 43:e.next=48;break;case 45:e.prev=45,e.t2=e.catch(35),c.e(e.t2);case 48:return e.prev=48,c.f(),e.finish(48);case 51:Object(O.e)("success","Data Berhasil Disimpan"),e.next=58;break;case 54:e.prev=54,e.t3=e.catch(33),this.setState({isLoading:!1}),Object(O.e)("info",void 0===e.t3.response?"Terjadi Kesalahan Saat Megirim Data ":e.t3.response.data);case 58:Object(j.h)("parabeli/add",n).then(function(){m.props.dispatch(Object(g.Qb)())}).then(function(){Object(O.e)("success","Data Berhasil Disimpan")}).then(function(){m.props.dispatch(Object(g.Fb)())}).then(function(){m.props.dispatch(Object(E.d)("ModalKondisiPembelian"))}).then(function(){m.setState({isLoading:!1})}).catch(function(e){return Object(K.a)(e,"parabeli/reactive/by-kode-kondisi/",n,m.props.dispatch,Object(g.Fb)(),Object(g.Qb)(),"ModalKondisiPembelian").then(function(){m.setState({isLoading:!1})})});case 59:case"end":return e.stop()}},e,this,[[5,26],[7,17,20,23],[33,54],[35,45,48,51]])}));return function(a){return e.apply(this,arguments)}}()},{key:"formEditKondisiPembelian",value:function(e){this.props.dispatch(Object(g.Vb)()),this.props.dispatch(Object(g.lb)(e)),this.setState({isEdit:!0})}},{key:"ShowModalKondisiPembelian",value:function(){this.props.dispatch(Object(g.Vb)()),this.props.dispatch(Object(g.lb)(!1)),this.setState({isEdit:!1})}},{key:"render",value:function(){var e=this;return m.a.createElement("div",null,m.a.createElement("ol",{className:"breadcrumb float-xl-right"},m.a.createElement("li",{className:"breadcrumb-item"},m.a.createElement(u.b,{to:"#"},"Data Master")),m.a.createElement("li",{className:"breadcrumb-item active"},"Master Kondisi Pembelian")),m.a.createElement("h1",{className:"page-header"},"Master Kondisi Pembelian "),m.a.createElement(h.a,null,m.a.createElement(h.c,null,"Master Kondisi Pembelian"),m.a.createElement("br",null),m.a.createElement("div",{className:"container"},m.a.createElement(x.a,{keyField:"kondisi_barang",tambahData:!0,handleClick:function(){return e.ShowModalKondisiPembelian()},exportCsv:!0,data:this.props.DataKondisiPembelian,columns:this.state.columns,empty:this.props.DataKondisiPembelian,textEmpty:"Data Kondisi Pembelian Kosong"})),m.a.createElement("br",null),m.a.createElement(T.a,{size:"P",title:this.state.isEdit?"Edit Data Kondisi Pembelian":"Tambah Data Kondisi Pembelian",content:m.a.createElement(B,{isEdit:this.state.isEdit,isLoading:this.state.isLoading,onSubmit:function(a){return e.handleSubmit(a)}})})))}}]),t}(m.a.Component);a.default=Object(f.b)(function(e){return{DataKondisiPembelian:e.datamaster.getKondisiPembelian,hideModal:e.datamaster.modalDialog,getMasterToko:e.datamaster.getMasterToko}},null)(F)}}]);
//# sourceMappingURL=61.fb26cbef.chunk.js.map