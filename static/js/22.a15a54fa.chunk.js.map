{"version":3,"sources":["pages/Barang/HancurDataBarang/HeadaHancurDataBarang.jsx","Validasi/Barang/PindahBarang/ValidasiPindahBarang.jsx"],"names":["HeadaHancurDataBarang","props","_this","Object","_Users_nagatech_WebstormProjects_gallery_silver_pusat_master_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_super","call","state","date","Date","isLoadingBatal","isLoading","kondisi_barang","dispatch","getDataKondisiBarang","e","_this2","delay","clearTimeout","setTimeout","setState","getData","then","res","data","length","ToastNotification","change","forEach","list","index","no_pesanan","kode_barcode","kode_group","kode_dept","nama_barang","nama_atribut","berat","cek","JSON","parse","localStorage","getItem","findIndex","hasil","push","setItem","stringify","setHancurBarang","catch","err","response","_this3","_this4","react__WEBPACK_IMPORTED_MODULE_4___default","a","createElement","onSubmit","handleSubmit","autoComplete","onKeyPress","key","preventDefault","className","redux_form__WEBPACK_IMPORTED_MODULE_6__","label","name","onChange","options","datakondisi","filter","undefined","map","value","placeholder","component","ReanderSelect","getKodeBarcode","target","ReanderField","type","_components_helpers_tabel__WEBPACK_IMPORTED_MODULE_12__","keyField","pagination","exportCsv","columns","empty","textEmpty","disabled","Fragment","onClick","batalHancur","react_fullscreen_loading__WEBPACK_IMPORTED_MODULE_15___default","loading","background","loaderColor","Component","reduxForm","form","enableReinitialize","validate","ValidasiPindahBarang","connect","datamaster","databarang","errors","kode_gudang","kode_baki","statusAktif"],"mappings":"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","file":"static/js/22.a15a54fa.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Field, reduxForm } from \"redux-form\";\nimport { setHancurBarang } from \"../../../actions/databarang_action\";\nimport { getDataKondisiBarang } from \"../../../actions/datamaster_action\";\nimport { ReanderSelect, ReanderField } from \"../../../components/helpers/field\";\nimport { ToastNotification } from \"../../../components/helpers/notification\";\nimport Tabel from \"../../../components/helpers/tabel\";\nimport { getData } from \"../../../config/axios\";\nimport ValidasiPindahBarang from \"../../../Validasi/Barang/PindahBarang/ValidasiPindahBarang\";\nimport Loading from 'react-fullscreen-loading';\nconst maptostate = (state) => {\n  return {\n    datakondisi: state.datamaster.getDataKondisiBarang,\n    setHancurBarang: state.databarang.setHancurBarang,\n  };\n};\nclass HeadaHancurDataBarang extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      date: new Date(),\n      isLoadingBatal: false,\n      isLoading: false,\n      kondisi_barang: \"kosong\",\n    };\n  }\n  componentDidMount() {\n    this.props.dispatch(getDataKondisiBarang());\n  }\n  getKodeBarcode(e) {\n    if(this.delay){\n      clearTimeout(this.delay)\n    }\n    \n    this.delay = setTimeout(() => {\n      this.setState({\n        isLoading : true\n      })\n      if(e === \"\"){\n        return false;\n      }\n      getData(\"barang/open/kode-barcode?kode_barcode=\" + e)\n        .then((res) => {\n          if (res.data.length === 0) {\n            ToastNotification(\"info\", \"Data Yang Dicari Tidak Ada\");\n          } else {\n            this.setState({\n              isLoading : false\n            })\n            if (this.state.kondisi_barang ===\"kosong\") {\n                ToastNotification(\"info\", \"Kondisi Barang Harus Dipilih\");\n                this.props.change(\"kode_barcode\", \"\");\n            } else {\n              res.data.forEach((list, index) => {\n                let data = {\n                  no_pesanan: list.no_pesanan,\n                  kode_barcode: list.kode_barcode,\n                  kode_group: list.kode_group,\n                  kode_dept: list.kode_dept,\n                  nama_barang: list.nama_barang,\n                  nama_atribut: list.nama_atribut,\n                  berat: list.berat,\n                  kondisi_barang: this.state.kondisi_barang,\n                };\n                //   console.log(data);\n                let cek =\n                  JSON.parse(localStorage.getItem(\"data_barang_hancur_tmp\")) ||\n                  [];\n                let hasil_cek = cek.findIndex(\n                  (hasil) => hasil.kode_barcode === e\n                );\n                //   console.log(index);\n                if (hasil_cek === -1) {\n                  cek.push(data);\n                  localStorage.setItem(\n                    \"data_barang_hancur_tmp\",\n                    JSON.stringify(cek)\n                  );\n                    this.props.dispatch(setHancurBarang(cek));\n                   this.props.change(\"kode_barcode\", \"\");\n                }\n              });\n            }\n          }\n        })\n        .catch((err) => {\n          this.setState({\n            isLoading : false\n          })\n          ToastNotification(\"info\", err.response && err.response.data);\n        });\n    }, 1500);\n  }\n\n  batalHancur() {\n    this.setState({ isLoadingBatal: true })\n    setTimeout(() => {\n      this.setState({ isLoadingBatal: false })\n      localStorage.setItem('data_barang_hancur_tmp', JSON.stringify([]))\n      this.props.dispatch(setHancurBarang([]));\n    }, 500);\n  }\n  render() {\n    return (\n      <form onSubmit={this.props.handleSubmit} autoComplete=\"off\"\n      onKeyPress={(e) => {\n        e.key === \"Enter\" && e.preventDefault();\n      }}\n      >\n        <div className=\"row\">\n          <div className=\"col-lg-6\">\n            <Field\n              label=\"Kondisi Barang\"\n              name=\"kondisi_barang\"\n              onChange={(e) => {\n                this.setState({ kondisi_barang: e });\n              }}\n              options={this.props.datakondisi\n                .filter((list) => list.kondisi_barang !== undefined)\n                .map((list) => {\n                  let data = {\n                    value: list.kondisi_barang,\n                    name: list.kondisi_barang,\n                  };\n                  return data;\n                })}\n              placeholder={\"Silahkan Pilih Kondisi Barang\"}\n              component={ReanderSelect}\n            />\n          </div>\n\n          <div className=\"col-lg-6\">\n            <Field\n              onChange={(e) => this.getKodeBarcode(e.target.value)}\n              name=\"kode_barcode\"\n              component={ReanderField}\n              type=\"text\"\n              label=\"Kode Barcode\"\n              placeholder=\"Masukan Kode Barcode\"\n            />\n          </div>\n        </div>\n        <Tabel\n          keyField=\"kode_barcode\"\n          pagination=\"off\"\n          exportCsv={false}\n          data={\n            this.props.setHancurBarang.length === 0\n              ? JSON.parse(localStorage.getItem(\"data_barang_hancur_tmp\"))\n              : this.props.setHancurBarang\n          }\n          columns={this.props.columns}\n          empty={true}\n          textEmpty=\"Data Barang Kosong\"\n        />\n        <div className=\"row\">\n          <div className=\"col-10\">\n            <button\n              className=\"btn btn-primary\"\n              type=\"submit\"\n              disabled={this.props.isLoading}\n            >\n              {this.props.isLoading ? (\n                <>\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Sedang\n                  Menyimpan\n                </>\n              ) : (\n                \"Simpan Data\"\n              )}\n            </button>\n            &nbsp;\n            <button\n              className=\"btn btn-warning\"\n              type=\"button\"\n              onClick={()=>this.batalHancur()}\n              disabled={this.props.isLoading}\n            >\n              {this.state.isLoadingBatal ? (\n                <>\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Sedang\n                  Membatal\n                </>\n              ) : (\n                \"Batal\"\n              )}\n            </button>\n          </div>\n          {/* <div className=\"2\">\n            {JSON.parse(localStorage.getItem(\"data_barang_hancur_tmp\")) ===\n            null ? null : (\n              <>\n                Total Barang :{\" \"}\n                {this.props.setHancurBarang.length === 0\n                  ? JSON.parse(localStorage.getItem(\"data_barang_hancur_tmp\"))\n                      .length || 0\n                  : this.props.setHancurBarang.length || 0}\n                <br />\n                Total Berat :\n                {this.props.setHancurBarang.length === 0\n                  ? JSON.parse(localStorage.getItem(\"data_barang_hancur_tmp\"))\n                      .map((column, key) => column.berat)\n                      .reduce((a, b) => a + b, 0)\n                      .toFixed(1)\n                  : this.props.setHancurBarang\n                      .map((column, key) => column.berat)\n                      .reduce((a, b) => a + b, 0)\n                      .toFixed(1)}\n              </>\n            )}\n          </div> */}\n        </div>\n        {this.props.isLoading || this.state.isLoading ? (\n        <Loading \n        loading\n        background=\"rgba(0, 0, 0, 0.35)\"\n         loaderColor=\"rgba(94, 147, 117, 1)\" />\n      ) : null}\n      </form>\n    );\n  }\n}\n\nHeadaHancurDataBarang = reduxForm({\n  form: \"HeadaHancurDataBarang\",\n  enableReinitialize: true,\n  validate: ValidasiPindahBarang,\n})(HeadaHancurDataBarang);\nexport default connect(maptostate, null)(HeadaHancurDataBarang);\n","const ValidasiPindahBarang = (value) => {\n    const errors = {};\n    if (!value.kode_gudang) {\n        errors.kode_gudang = \"Kode Gudang Tidak Boleh Kosong\";\n    }\n    if (!value.kode_baki) {\n        errors.kode_baki = \"Nama Baki Tidak Boleh Kosong\";\n    }\n\n    if (!value.statusAktif) {\n        errors.statusAktif = \"Status Tidak Boleh Kosong\";\n    }\n\n    return errors;\n}\nexport default ValidasiPindahBarang;\n\n\n"],"sourceRoot":""}