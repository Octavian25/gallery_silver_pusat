(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{1305:function(e,a,t){"use strict";t.r(a);var n=t(8),r=t(9),i=t(15),l=t(11),s=t(10),o=t(0),c=t.n(o),u=t(30),m=t(31),d=t(45),b=t(67),p=t(23),f=t(57),g=t(18),h=t(320),k=t(321),E=t(7),v=t(20),B=t(53),O=t(787),F=function(e){Object(l.a)(t,e);var a=Object(s.a)(t);function t(e){var r;return Object(n.a)(this,t),(r=a.call(this,e)).state={isloadingFaktur:!1,isLoading:!1,isLoadingBatal:!1,date:new Date},r}return Object(r.a)(t,[{key:"getFaktur",value:function(e){this.setState({no_faktur:e})}},{key:"getDetailFaktur",value:function(){var e=this;this.setState({isLoading:!0});var a={no_faktur_group:this.state.no_faktur};Object(g.h)("batalpembelian/get/by-faktur",a).then(function(a){0===a.data.length?(Object(p.e)("info","Data Transaksi Tersbut Tidak Ada"),e.setState({isLoading:!1})):(e.props.dispatch(Object(b.n)(a.data)),e.setState({isLoading:!1}))}).catch(function(a){Object(p.e)("info","Data Transaksi Tersbut Tidak Ada"),e.setState({isLoading:!1})})}},{key:"componentDidMount",value:function(){this.props.dispatch(Object(E.Bb)())}},{key:"btlPembelian",value:function(){var e=this;this.setState({isLoadingBatal:!0}),setTimeout(function(){e.setState({isLoadingBatal:!1}),e.props.dispatch(Object(b.n)([]))},500)}},{key:"render",value:function(){var e=this;return c.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()},autoComplete:"off"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-6"},c.a.createElement(h.a,{onChange:function(a){return e.getFaktur(a.target.value)},name:"no_faktur",component:v.e,type:"text",label:"No Faktur",placeholder:"Masukan No Faktur"})),c.a.createElement("div",{className:"col-lg-6"},c.a.createElement("div",{className:"text-right"},c.a.createElement("label",null,"\xa0"),c.a.createElement("button",{type:"button",onClick:function(){return e.getDetailFaktur()},name:"type_btn",className:"btn btn-primary btn-block",disabled:this.state.isLoading},this.state.isLoading?c.a.createElement(c.a.Fragment,null,c.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Mencari"):"Cari Data"))),c.a.createElement("div",{className:"col-lg-12"},c.a.createElement(B.a,{keyField:"kode_barcode",exportCsv:!1,data:this.props.setBatalPembelian||[],columns:this.props.columns,empty:!0,textEmpty:"Data Barang Kosong"})),c.a.createElement("div",{className:"col-lg-12"},c.a.createElement("label",null,"\xa0"),c.a.createElement("button",{type:"submit",name:"type_btn",className:"btn btn-primary",disabled:this.props.isLoading},this.props.isLoading?c.a.createElement(c.a.Fragment,null,c.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Mengirim Data"):"Simpan Batal Pembelian"),"\xa0",c.a.createElement("button",{type:"button",name:"type_btn",onClick:function(){return e.btlPembelian()},className:"btn btn-warning",disabled:this.state.isLoadingBatal},this.state.isLoadingBatal?c.a.createElement(c.a.Fragment,null,c.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Batal"):"Batal"))))}}]),t}(o.Component);F=Object(k.a)({form:"HeadBatalPembelian",enableReinitialize:!0,validate:O.a})(F);var j=Object(u.b)(function(e){return{setBatalPembelian:e.penjualan.setBatalPembelian,datakondisi:e.datamaster.getDataKondisiBarang}},null)(F),S=function(e){Object(l.a)(t,e);var a=Object(s.a)(t);function t(e){var r;return Object(n.a)(this,t),(r=a.call(this,e)).state={isLoading:!1,databarang:[],columns:[{dataField:"no_faktur_beli",text:"No Faktur Beli",footerAttrs:{colSpan:"1"},footer:"Total Barang"},{dataField:"nama_barang",text:"Nama Barang",footer:function(e){return parseInt(r.props.setBatalPembelian.length)}},{dataField:"berat_nota",text:"Berat Nota",formatter:function(e){return c.a.createElement("span",null,parseFloat(e).toFixed(1))},footer:function(e){return parseFloat(e.reduce(function(e,a){return e+a},0)).toFixed(1)}},{dataField:"harga_nota",text:"Harga Nota",formatter:function(e){return c.a.createElement("span",null,parseInt(e).toLocaleString("kr-KO"))},footer:function(e){return parseInt(e.reduce(function(e,a){return e+a},0)).toLocaleString("kr-KO")}},{dataField:"berat",text:"Berat",formatter:function(e){return c.a.createElement("span",null,parseFloat(e).toFixed(1))},footer:function(e){return parseFloat(e.reduce(function(e,a){return e+a},0)).toFixed(1)}},{dataField:"harga",text:"Harga Emas",formatter:function(e){return c.a.createElement("span",null,parseInt(e).toLocaleString("kr-KO"))},footer:function(e){return parseInt(e.reduce(function(e,a){return e+a},0)).toLocaleString("kr-KO")}}]},r.handleSubmit=r.handleSubmit.bind(Object(i.a)(r)),r}return Object(r.a)(t,[{key:"handleSubmit",value:function(e){var a=this;this.setState({isLoading:!0});var t={no_faktur_group:e.no_faktur};Object(g.h)("batalpembelian/simpan",t).then(function(e){a.setState({isLoading:!1}),a.props.dispatch(Object(b.n)([])),a.props.dispatch(Object(d.d)("HeadBatalPembelian")),Object(p.e)("success",e.data.message)}).catch(function(e){a.setState({isLoading:!1}),Object(p.e)("success",e.message)})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement("ol",{className:"breadcrumb float-xl-right"},c.a.createElement("li",{className:"breadcrumb-item"},c.a.createElement(m.b,{to:"#"},"Pembelian")),c.a.createElement("li",{className:"breadcrumb-item active"},"Batal Pembelian")),c.a.createElement("h1",{className:"page-header"},"Batal Pembelian "),c.a.createElement(f.a,null,c.a.createElement(f.c,null,"Batal Pembelian"),c.a.createElement("br",null),c.a.createElement("div",{className:"container"},c.a.createElement(j,{isLoading:this.state.isLoading,onSubmit:function(a){return e.handleSubmit(a)},data:this.state.databarang,columns:this.state.columns})),c.a.createElement("br",null)))}}]),t}(c.a.Component);a.default=Object(u.b)(function(e){return{setBatalPembelian:e.penjualan.setBatalPembelian}},null)(S)},787:function(e,a,t){"use strict";a.a=function(e){var a={};return e.alasan||(a.alasan="Alasan Harus Diisi"),a}}}]);
//# sourceMappingURL=25.b068817b.chunk.js.map