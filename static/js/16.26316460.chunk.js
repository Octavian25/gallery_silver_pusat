(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1236:function(a,e,t){"use strict";t.r(e);var n=t(8),r=t(9),l=t(11),o=t(10),s=t(1),i=t.n(s),c=t(30),u=t(32),m=t(7),g=t(74),p=t(139),b=t(25),h=t(54),d=t(63),_=t(18),f=t(0),y=t(693),E=t(15),k=Object(f.y)({prefix:"Rp. ",locale:"kr-KO"}),j=[{value:"CASH",name:"CASH"},{value:"DEBET",name:"DEBET"},{value:"TRANSFER",name:"TRANSFER"},{value:"CREDIT",name:"CREDIT"}],v=function(a){Object(l.a)(t,a);var e=Object(o.a)(t);function t(a){var r;return Object(n.a)(this,t),(r=e.call(this,a)).state={isLoading:!1,type_pembayaran:"CASH",lebih:!1,columns:[{dataField:"type",text:"Type",footerAttrs:{colSpan:"1"},footer:"Grand Total"},{dataField:"Total",text:"Total",footer:""}]},r.setStartDate=r.setStartDate.bind(Object(E.a)(r)),r}return Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(m.Db)());var a=JSON.parse(localStorage.getItem("jml_byar_pelunasan_hutang"));this.props.change("grand_total_pembayaran",a),this.props.change("harus_bayar_rp",a),this.props.change("jenis","CASH"),setTimeout(function(){document.getElementById("cash_trx_penjualan").focus()},100)}},{key:"hitungTotal",value:function(){this.props.change("kembali",this.props.kembali),this.props.change("nominal_kembali",this.props.nominal_kembali)}},{key:"pilihPembyaran",value:function(a){"CASH"===a?this.setState({type_pembayaran:"CASH"}):"TRANSFER"===a?this.setState({type_pembayaran:"TRANSFER"}):"DEBET"===a?this.setState({type_pembayaran:"DEBET"}):this.setState({type_pembayaran:"CREDIT"}),this.props.change("cash","")}},{key:"setStartDate",value:function(a){this.setState({tgl_awal:new Date(a)})}},{key:"copyValue",value:function(a){this.props.change("cash",parseInt(Object(f.k)(a)))}},{key:"render",value:function(){var a=this;return f.o.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:function(a){"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},f.o.createElement("div",{className:"row"},f.o.createElement("div",{className:"col-6"},f.o.createElement(f.d,Object.assign({name:"grand_total_pembayaran",component:f.q,type:"text",onChange:this.hitungTotal(),readOnly:!0},k,{label:"Total Harga Jual",placeholder:"Total Harga Jual"}))),f.o.createElement("div",{className:"col-6"},f.o.createElement(f.d,Object.assign({id:"harus_bayar_rp",name:"harus_bayar_rp",component:f.q,type:"text",onChange:this.hitungTotal(),readOnly:!0},k,{label:"Harus Bayar Rp",placeholder:"Harus Bayar Rp"}))),f.o.createElement("div",{className:"col-6"},f.o.createElement(f.d,{name:"jenis",label:"Pilih Jenis Bayar",placeholder:"Pilih Jenis Pembayaran",options:j,onChange:function(e){return a.pilihPembyaran(e)},component:f.r})),f.o.createElement("div",{className:"col-6",style:{display:"CASH"===this.state.type_pembayaran?"none":(this.state.type_pembayaran,"block")}},f.o.createElement(f.d,{tabIndex:"1",name:"nama_bank",id:"nama_bank",component:f.q,type:"text",label:"Bank",placeholder:"Masukan Nama Bank"})),f.o.createElement("div",{className:"col-6",style:{display:"CASH"===this.state.type_pembayaran?"none":"DEBET"===this.state.type_pembayaran?"none":"block"}},f.o.createElement(f.d,{tabIndex:"1",name:"no_card",id:"no_card",component:f.q,type:"text",label:"TRANSFER"===this.state.type_pembayaran?"No Rek":"Card No",placeholder:"TRANSFER"===this.state.type_pembayaran?"Masukan No Rek":"Masukan Card No"})),f.o.createElement("div",{className:"col-6"},f.o.createElement(f.d,Object.assign({tabIndex:"1",name:"cash",id:"cash_trx_penjualan",component:f.q,type:"text",label:"Nominal",onChange:this.hitungTotal()},k,{normalize:f.k,placeholder:"Masukan Nominal"}))),f.o.createElement("div",{className:"col-6",style:{display:"CREDIT"===this.state.type_pembayaran?"block":"none"}},f.o.createElement(f.d,{tabIndex:"1",name:"fee",id:"fee",component:f.q,type:"text",label:"Fee (%)",normalize:f.k,placeholder:"5"})),f.o.createElement("div",{className:"col-6 d-none"},f.o.createElement(f.d,{tabIndex:"1",name:"nominal_kembali",component:f.q,type:"text",label:"Nominal",placeholder:"Masukan Nominal"})),f.o.createElement("div",{className:"col-6"},f.o.createElement(f.d,{name:"kembali",id:"sisa_bayar",component:f.q,type:"text",readOnly:!0,label:"Sisa",onFocus:function(e){return a.copyValue(e.target.value)},placeholder:"Sisa Pembayaran"})),f.o.createElement("div",{className:"CASH"===this.state.type_pembayaran?"col-6 text-right":"TRANSFER"===this.state.type_pembayaran?"col-6 text-right":"col-12 text-right"},f.o.createElement("br",null),f.o.createElement("label",null,"\xa0"),f.o.createElement("button",{tabIndex:"2",disabled:this.props.notif,className:"btn btn-primary"}," ",f.o.createElement("i",{className:"fa fa-plus"})))))}}]),t}(f.b);v=Object(f.Y)({form:"HeadInputPembayaran",enableReinitialize:!0,validate:y.a})(v);var O=Object(f.A)("HeadInputPembayaran"),N=Object(f.w)(function(a){var e=O(a,"grand_total_pembayaran","harus_bayar_rp","cash"),t=e.cash,n=e.harus_bayar_rp,r=JSON.parse(localStorage.getItem("trx_pemabayaran_hutang"))||[],l=0;r.forEach(function(a){l=a.nominal+l});var o=parseFloat(l||0)-parseFloat(n||0);return{kembali:o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),nominal_kembali:o+parseInt(t),initialValues:{estimasi_pesanan:Object(f.I)()}}})(v),S=t(67),A=t.n(S),L=function(a){Object(l.a)(t,a);var e=Object(o.a)(t);function t(a){var r;return Object(n.a)(this,t),(r=e.call(this,a)).state={isLoading:!1,type_pembayaran:"CASH",columns:[{dataField:"jenis",text:"Jenis",footerAttrs:{colSpan:"2"},footer:"Grand Total"},{dataField:"keterangan",text:"Keterangan"},{dataField:"nominal",text:"Total",formatter:function(a){return f.o.createElement("span",null,parseInt(a).toLocaleString("kr-KO"))},footer:function(a){return parseInt(a.reduce(function(a,e){return a+e},0)).toLocaleString("kr-KO")}},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:function(a,e,t){return f.o.createElement("div",{className:"row text-center"},f.o.createElement("div",{className:"col-12"},f.o.createElement("button",{type:"button",disabled:"TITIPAN"===e.keterangan,onClick:function(){return r.hapusdata(t)},className:"btn btn-danger mr-3"},f.o.createElement("i",{className:"fa fa-trash"}))))},footer:""}]},r}return Object(r.a)(t,[{key:"hapusdata",value:function(a){var e=this;f.t.fire({title:"Anda Yakin !!",text:"Ingin Menghapus Data Ini ?",icon:"warning",position:"top-center",cancelButtonText:"Tidak",showCancelButton:!0,confirmButtonText:"OK",showConfirmButton:!0}).then(function(t){if(t.isConfirmed){var n=Object(f.H)("trx_pemabayaran_hutang");n.splice(a,1),Object(f.ab)("trx_pemabayaran_hutang",n),e.setState({status:"berhasil"})}})}},{key:"simpanPembayaran",value:function(a){if(void 0===a.no_card&&"CASH"!==a.jenis&&"DEBET"!==a.jenis)return Object(f.v)("info","Nomor kartu tidak boleh kosong"),!1;if(void 0===a.nama_bank&&"CASH"!==a.jenis)return Object(f.v)("info","Nama Bank tidak boleh kosong"),!1;if(void 0===a.cash||"0"===a.cash)return Object(f.v)("info","Nominal tidak boleh kosong"),!1;var e={total_transaksi:a.harus_bayar_rp,total_trx:a.harus_bayar_rp,sisa_bayar:a.nominal_kembali};Object(f.ab)("sisa_bayar_hutang",e);var t=JSON.parse(localStorage.getItem("trx_pemabayaran_hutang"))||[];if("CASH"===a.jenis||t.length){if("CASH"!==a.jenis){if(a.kembali.replace(/[^0-9]/g,"")-a.cash<0&&0!==parseInt(a.kembali))return Object(f.v)("info","Pembayaran tidak boleh lebih dari sisa"),!1;if(t.reduce(function(a,e){return a+e.nominal},0)>=a.harus_bayar_rp)return Object(f.v)("info","Pembayaran Sudah Cukup"),!1}}else if(a.kembali.replace(/[^0-9]/g,"")-a.cash<0)return Object(f.v)("info","Pembayaran tidak boleh lebih dari sisa"),!1;if(t.findIndex(function(a){return"CASH"===a.jenis})>=0){if(a.kembali.replace(/[^0-9]/g,"")-a.cash<0&&t.reduce(function(a,e){return a+e.nominal},0)>a.harus_bayar_rp)return Object(f.v)("info","Pembayaran Sudah Cukup"),!1;if(t.reduce(function(a,e){return a+e.nominal},0)>=a.harus_bayar_rp)return Object(f.v)("info","Pembayaran Sudah Cukup"),!1}if(-1===t.findIndex(function(e){return e.jenis===a.jenis})){var n="";n="CASH"===a.jenis?"CASH":"TRANSFER"===a.jenis?a.no_card+" - "+a.nama_bank:a.nama_bank;var r={jenis:a.jenis,nominal:parseInt(a.cash),nama_bank:void 0!==a.nama_bank?a.nama_bank.toUpperCase():"-",fee:"CREDIT"===a.jenis&&a.fee||0,no_card:a.no_card||"-",keterangan:n.toUpperCase()};t.push(r),this.setState({masuk:!0}),Object(f.ab)("trx_pemabayaran_hutang",t)}else{var l=Object(f.H)("trx_pemabayaran_hutang");l=l.map(function(e){return e.jenis===a.jenis&&(e.nominal+=parseInt(a.cash)),e}),Object(f.ab)("trx_pemabayaran_hutang",l),this.setState({status:!0})}}},{key:"render",value:function(){var a=this;return f.o.createElement(f.o.Fragment,null,f.o.createElement(N,{onSubmit:function(e){return a.simpanPembayaran(e)}}),f.o.createElement("hr",null),f.o.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:function(a){"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},f.o.createElement(f.u,{keyField:"jenis",exportCsv:!1,data:Object(f.H)("trx_pemabayaran_hutang")||[],columns:this.state.columns,empty:!0,pagination:"off",textEmpty:"Data Pembayaran Kosong"}),f.o.createElement("div",{className:"row"},f.o.createElement("div",{className:"col-6"}),f.o.createElement("div",{className:"col-6 text-right"},f.o.createElement("button",{className:"btn btn-primary",disabled:this.props.isLoading,onClick:function(){return a.props.bayarSekarang()},type:"button"},this.props.isLoading?f.o.createElement(f.o.Fragment,null,f.o.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Diproses"):"Bayar Sekarang"))),this.props.isLoading?f.o.createElement(A.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null))}}]),t}(f.b);L=Object(f.Y)({form:"ModalPembayaran",enableReinitialize:!0,validate:y.a})(L);var H=Object(f.w)(function(a){var e=Object(f.H)("data_barang_penjualan_tmp")||[],t="PENJUALAN";return e.forEach(function(a){t="-"===a.no_titip_group?"PENJUALAN":"TITIPAN"}),{status:t}})(L),x=t(320),T=t(321),B=t(21),I=t(5),P=function(a){Object(l.a)(t,a);var e=Object(o.a)(t);function t(a){var r;return Object(n.a)(this,t),(r=e.call(this,a)).state={isLoadingDataCustomer:!1,isLoadingBatal:!1,isLoadingHutang:!1,FormModal:""},r.setStartDate=r.setStartDate.bind(Object(E.a)(r)),r.setLastDate=r.setLastDate.bind(Object(E.a)(r)),r}return Object(r.a)(t,[{key:"componentDidMount",value:function(){Object(I.s)("trx_pemabayaran_hutang",[]),Object(I.s)("sisa_bayar_hutang",[])}},{key:"setStartDate",value:function(a){this.setState({tgl_awal:new Date(a)})}},{key:"setLastDate",value:function(a){this.setState({tgl_akhir:new Date(a)})}},{key:"render",value:function(){var a=this;return i.a.createElement(d.a,null,i.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:function(a){"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-4"},i.a.createElement(x.a,{name:"tgl_awal",component:B.c,label:"Tanggal Dari",type:"text",selected:this.state.tgl_awal,onChange:function(e){return a.setStartDate(e)},placeholder:"Masukan Tanggal Dari"})),i.a.createElement("div",{className:"col-lg-4"},i.a.createElement(x.a,{name:"tgl_akhir",component:B.c,type:"text",selected:this.state.tgl_akhir,onChange:function(e){return a.setLastDate(e)},label:"Tanggal Akhir",placeholder:"Masukan Tanggal Akhir"})),i.a.createElement("div",{className:"col-4"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"\xa0"),i.a.createElement("button",{className:"btn btn-primary btn-block",disabled:this.props.isloading,type:"submit"},this.props.isLoading?i.a.createElement(i.a.Fragment,null,i.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Mencari"):"Cari Hutang")))),this.props.isLoading?i.a.createElement(A.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null))}}]),t}(s.Component);P=Object(T.a)({form:"HeadLihatHutang",enableReinitialize:!0})(P);var C=Object(c.b)(function(a){return{initialValues:{tgl_awal:Object(I.j)(),tgl_akhir:Object(I.j)()}}})(P),w=t(100),M=t(714),D=Object(w.createNumberMask)({prefix:"Rp. ",locale:"kr-KO"}),F=function(a){Object(l.a)(t,a);var e=Object(o.a)(t);function t(a){var r;return Object(n.a)(this,t),(r=e.call(this,a)).state={date:new Date("Y-m-d"),columns:[{dataField:"nama_barang",text:"Nama Barang",footer:""},{dataField:"berat",text:"Berat",formatter:function(a){return i.a.createElement("span",null,parseFloat(a).toFixed(1))},footer:function(a){return parseFloat(a.reduce(function(a,e){return a+e},0)).toFixed(1)}},{dataField:"jumlah",text:"Jumlah",formatter:function(a){return i.a.createElement("span",null,parseInt(a).toLocaleString("kr-KO"))},footer:function(a){return parseInt(a.reduce(function(a,e){return a+e},0)).toLocaleString("kr-KO")}}]},r}return Object(r.a)(t,[{key:"getTotalAll",value:function(){var a=JSON.parse(localStorage.getItem("total_rp_service_ambil"))||[],e=0;return a.forEach(function(a,t){e+=a.jml}),parseInt(e).toLocaleString("kr-KO")}},{key:"getTotal",value:function(a){var e=JSON.parse(localStorage.getItem("total_rp_service_ambil"))||[],t={jml:parseInt(this.props.detail_barang[a].ongkos*this.props.detail_barang[a].jumlah)};return e.push(t),localStorage.setItem("total_rp_service_ambil",JSON.stringify(e)),parseInt(this.props.detail_barang[a].ongkos*this.props.detail_barang[a].jumlah).toLocaleString("kr-KO")}},{key:"hidtungDenda",value:function(){this.props.change("jumlah_bayar",this.props.jumlah_bayar)}},{key:"render",value:function(){var a=this;return i.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:function(a){"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-4"},i.a.createElement(x.a,{id:"tgl_system",name:"tgl_system",component:B.b,type:"hidden",readOnly:!0}),i.a.createElement(x.a,{id:"no_faktur_hutang",name:"no_faktur_hutang",component:B.b,type:"hidden",readOnly:!0}),i.a.createElement(x.a,{name:"nama_customer",component:B.e,type:"text",readOnly:!0,label:"Nama Customer",placeholder:"Masukan Nama Cistomer"})),i.a.createElement("div",{className:"col-4"},i.a.createElement(x.a,{name:"alamat_customer",component:B.e,type:"text",readOnly:!0,label:"Alamat Customer",placeholder:"Masukan Alamat Cistomer"})),i.a.createElement("div",{className:"col-4"},i.a.createElement(x.a,{name:"no_hp",component:B.e,type:"text",readOnly:!0,label:"No Hp",placeholder:"Masukan No Hp"})),i.a.createElement("div",{className:"col-4 d-none"},i.a.createElement(x.a,{id:"tgl_lunas_hutang",onChange:this.hidtungDenda(),name:"tgl_lunas_hutang",component:B.e,type:"date",label:"Tanggal Lunas Hutang"})),i.a.createElement("div",{className:"col-4"},i.a.createElement(x.a,{id:"total_hutang",name:"total_hutang",component:B.e,type:"text",label:"Hutang Pokok",readOnly:!0})),i.a.createElement("div",{className:"col-4"},i.a.createElement(x.a,{id:"bunga",name:"bunga",component:B.e,type:"text",label:"Bunga",readOnly:!0})),i.a.createElement("div",{className:"col-4"},i.a.createElement(x.a,{name:"lama_pinjam",component:B.e,type:"text",readOnly:!0,label:"Lama Hari"})),i.a.createElement("div",{className:"col-4"},i.a.createElement(x.a,{name:"tgl_tempo",component:B.e,type:"text",readOnly:!0,label:"Tanggal Jatuh Tempo"})),i.a.createElement("div",{className:"col-4"},i.a.createElement(x.a,Object.assign({id:"jumlah_bayar_pelunasan_hutang",name:"jumlah_bayar",component:B.e,type:"telp",readOnly:!0},D,{label:"Sisa Hutang + Bunga"}))),i.a.createElement("div",{className:"col-2"},i.a.createElement("label",null," \xa0"),i.a.createElement("button",{type:"button",onClick:function(){return a.props.showModalPembayaran()},className:"btn btn-success btn-block"},"Pelunasan Hutang")),i.a.createElement("div",{className:"col-2"},i.a.createElement("label",null," \xa0"),i.a.createElement("button",{type:"button",onClick:function(){return a.props.showModalPeremajaan()},className:"btn btn-primary btn-block"},"Peremajaan")),i.a.createElement("div",{className:"col-12"},i.a.createElement(h.a,{keyField:"nama_barang",exportCsv:!1,data:this.props.detail_barang,columns:this.state.columns,pagination:"off",empty:!0,textEmpty:"Data Barang Kosong"})),i.a.createElement("div",{className:"col-3"},i.a.createElement("button",{type:"button",onClick:this.props.back,className:"btn btn-primary btn-block"},i.a.createElement("i",{className:"fa fa-arrow-left"})," Kembali"))),i.a.createElement("br",null))}}]),t}(s.Component);F=Object(T.a)({form:"pelunasanTransaksiHutang",enableReinitialize:!0,validate:M.a})(F);var R=Object(c.b)(function(a){return localStorage.setItem("jml_byar_pelunasan_hutang",JSON.stringify(a.hutang.showModalLihatHutang.jumlah_bayar)),{detail_barang:a.hutang.showModalLihatHutang.detail_barang,jumlah_bayar:a.hutang.showModalLihatHutang.jumlah_bayar,lama_pinjam:a.hutang.showModalLihatHutang.lama_pinjam,initialValues:{tgl_lunas_hutang:Object(I.k)(),tgl_system:a.hutang.showModalLihatHutang.tgl_system,no_faktur_hutang:a.hutang.showModalLihatHutang.no_faktur_hutang,lama_pinjam:a.hutang.showModalLihatHutang.lama_pinjam,tgl_tempo:a.hutang.showModalLihatHutang.tgl_tempo,no_hp:a.hutang.showModalLihatHutang.no_hp,nama_customer:a.hutang.showModalLihatHutang.nama_customer,alamat_customer:a.hutang.showModalLihatHutang.alamat_customer,total_hutang:parseInt(a.hutang.showModalLihatHutang.jumlah_hutang).toLocaleString("kr-KO"),bunga:a.hutang.showModalLihatHutang.bunga}}})(F),K=t(324),U=Object(w.createNumberMask)({prefix:"Rp. ",locale:"kr-KO"}),J=function(a){Object(l.a)(t,a);var e=Object(o.a)(t);function t(a){var r;return Object(n.a)(this,t),(r=e.call(this,a)).state={date:new Date("Y-m-d"),columns:[{dataField:"nama_barang",text:"Nama Barang",footer:""},{dataField:"berat",text:"Berat",formatter:function(a){return i.a.createElement("span",null,parseFloat(a).toFixed(1))},footer:function(a){return parseFloat(a.reduce(function(a,e){return a+e},0)).toFixed(1)}},{dataField:"jumlah",text:"Jumlah",formatter:function(a){return i.a.createElement("span",null,parseInt(a).toLocaleString("kr-KO"))},footer:function(a){return parseInt(a.reduce(function(a,e){return a+e},0)).toLocaleString("kr-KO")}}]},r}return Object(r.a)(t,[{key:"getTotalAll",value:function(){var a=JSON.parse(localStorage.getItem("total_rp_service_ambil"))||[],e=0;return a.forEach(function(a,t){e+=a.jml}),parseInt(e).toLocaleString("kr-KO")}},{key:"getTotal",value:function(a){var e=JSON.parse(localStorage.getItem("total_rp_service_ambil"))||[],t={jml:parseInt(this.props.detail_barang[a].ongkos*this.props.detail_barang[a].jumlah)};return e.push(t),localStorage.setItem("total_rp_service_ambil",JSON.stringify(e)),parseInt(this.props.detail_barang[a].ongkos*this.props.detail_barang[a].jumlah).toLocaleString("kr-KO")}},{key:"hidtungDenda",value:function(){this.props.change("jumlah_bayar",this.props.jumlah_bayar)}},{key:"render",value:function(){return i.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:function(a){"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-4"},i.a.createElement(x.a,{id:"tgl_system",name:"tgl_system",component:B.b,type:"hidden",readOnly:!0}),i.a.createElement(x.a,{id:"no_faktur_hutang",name:"no_faktur_hutang",component:B.b,type:"hidden",readOnly:!0}),i.a.createElement(x.a,{name:"nama_customer",component:B.e,type:"text",readOnly:!0,label:"Nama Customer",placeholder:"Masukan Nama Cistomer"})),i.a.createElement("div",{className:"col-4"},i.a.createElement(x.a,{name:"alamat_customer",component:B.e,type:"text",readOnly:!0,label:"Alamat Customer",placeholder:"Masukan Alamat Cistomer"})),i.a.createElement("div",{className:"col-4"},i.a.createElement(x.a,{name:"no_hp",component:B.e,type:"text",readOnly:!0,label:"No Hp",placeholder:"Masukan No Hp"})),i.a.createElement("div",{className:"col-4"},i.a.createElement(x.a,{onChange:this.hidtungDenda(),name:"tgl_lunas_hutang",component:B.e,type:"date",readOnly:!0,label:"Tanggal Lunas Hutang"})),i.a.createElement("div",{className:"col-4"},i.a.createElement(x.a,{id:"total_hutang",name:"total_hutang",component:B.e,type:"text",label:"Hutang Pokok",readOnly:!0})),i.a.createElement("div",{className:"col-4"},i.a.createElement(x.a,{id:"bunga",name:"bunga",component:B.e,type:"text",label:"Bunga",readOnly:!0})),i.a.createElement("div",{className:"col-4"},i.a.createElement(x.a,{name:"lama_pinjam",component:B.e,type:"text",readOnly:!0,label:"Lama Hari"})),i.a.createElement("div",{className:"col-4"},i.a.createElement(x.a,{name:"tgl_tempo",component:B.e,type:"text",readOnly:!0,label:"Tanggal Jatuh Tempo"})),i.a.createElement("div",{className:"col-4"},i.a.createElement(x.a,Object.assign({id:"jumlah_bayar_pelunasan_hutang",name:"jumlah_bayar",component:B.e,type:"telp",readOnly:!0},U,{label:"Jumlah Hutang"}))),i.a.createElement("div",{className:"col-12"},i.a.createElement(h.a,{keyField:"nama_barang",exportCsv:!1,data:this.props.detail_barang,columns:this.state.columns,pagination:"off",empty:!0,textEmpty:"Data Barang Kosong"})),i.a.createElement("div",{className:"col-3"},i.a.createElement("button",{type:"button",onClick:this.props.back,className:"btn btn-primary btn-block"},i.a.createElement("i",{className:"fa fa-arrow-left"})," Kembali")),i.a.createElement("div",{className:"col-9"},i.a.createElement("button",{tabIndex:"2",className:"btn btn-success btn-block",disabled:this.props.isloadingBtl,type:"submit"},this.props.isloadingBtl?i.a.createElement(i.a.Fragment,null,i.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Batal Hutang"):"Batal Hutang"))),i.a.createElement("br",null),this.props.isloadingBtl?i.a.createElement(A.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}]),t}(s.Component);J=Object(T.a)({form:"pelunasanTransaksiHutang",enableReinitialize:!0,validate:M.a})(J);var G=Object(c.b)(function(a){var e=Object(K.a)("pelunasanTransaksiHutang"),t=new Date(e(a,"tgl_lunas_hutang")),n=new Date(a.hutang.showModalLihatHutang.tgl_system),r=(t.getTime()-n.getTime())/864e5,l=parseFloat(a.hutang.showModalLihatHutang.bunga||0)/parseFloat(100)*parseFloat(a.hutang.showModalLihatHutang.jumlah_hutang||0)*(parseFloat(r||0)/parseFloat(30)),o=parseInt(a.hutang.showModalLihatHutang.jumlah_hutang)+parseInt(l);return localStorage.setItem("jml_byar_pelunasan_hutang",JSON.stringify(o)),{detail_barang:a.hutang.showModalLihatHutang.detail_barang,jumlah_bayar:o,initialValues:{tgl_lunas_hutang:Object(I.k)(),tgl_system:a.hutang.showModalLihatHutang.tgl_system,no_faktur_hutang:a.hutang.showModalLihatHutang.no_faktur_hutang,lama_pinjam:a.hutang.showModalLihatHutang.lama_pinjam,tgl_tempo:a.hutang.showModalLihatHutang.tgl_tempo,no_hp:a.hutang.showModalLihatHutang.no_hp,nama_customer:a.hutang.showModalLihatHutang.nama_customer,alamat_customer:a.hutang.showModalLihatHutang.alamat_customer,total_hutang:parseInt(a.hutang.showModalLihatHutang.jumlah_hutang).toLocaleString("kr-KO"),bunga:a.hutang.showModalLihatHutang.bunga}}})(J),Y=t(224),z=function(a){Object(l.a)(t,a);var e=Object(o.a)(t);function t(a){var r;return Object(n.a)(this,t),(r=e.call(this,a)).state={isLoading:!1},r}return Object(r.a)(t,[{key:"componentDidMount",value:function(){var a=this;setTimeout(function(){var e=document.getElementById("bunga").value;a.props.change("bunga_lama",e),document.getElementById("bunga_baru").focus()},100)}},{key:"render",value:function(){return f.o.createElement(f.o.Fragment,null,f.o.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:function(a){"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},f.o.createElement("div",{className:"row"},f.o.createElement("div",{className:"col-6"},f.o.createElement(f.d,{name:"bunga_lama",id:"bunga_lama",component:B.h,type:"text",textValue:"%",readOnly:!0,label:"Bunga Lama",placeholder:"Bunga Lama"})),f.o.createElement("div",{className:"col-6"},f.o.createElement(f.d,{name:"bunga_baru",id:"bunga_baru",component:B.h,textValue:"%",normalize:f.k,type:"text",label:"Bunga Baru",placeholder:"Bunga Baru"})),f.o.createElement("div",{className:"col-12 text-right"},f.o.createElement("button",{className:"btn btn-primary",disabled:this.props.isLoadingBunga,type:"submit"},this.props.isLoadingBunga?f.o.createElement(f.o.Fragment,null,f.o.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Kirim"):"Kirim"))),this.props.isLoadingBunga?f.o.createElement(A.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null))}}]),t}(f.b);z=Object(f.Y)({form:"InputBungaPeremajaan",enableReinitialize:!0})(z);var V=Object(f.w)(null)(z),q=function(a){Object(l.a)(t,a);var e=Object(o.a)(t);function t(a){var r;return Object(n.a)(this,t),(r=e.call(this,a)).state={},r}return Object(r.a)(t,[{key:"componentDidMount",value:function(){setTimeout(function(){document.getElementById("username").focus()},100)}},{key:"render",value:function(){return i.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:function(a){"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-6"},i.a.createElement(x.a,{name:"no_faktur_group",component:B.b,type:"hidden"}),i.a.createElement(x.a,{name:"alasan",component:B.b,type:"hidden"}),i.a.createElement(x.a,{id:"username",name:"username",component:B.e,type:"text",nouperCase:!0,label:"Username",placeholder:"Masukan Username"})),i.a.createElement("div",{className:"col-lg-6"},i.a.createElement(x.a,{name:"password",component:B.e,type:"password",nouperCase:!0,label:"Password",placeholder:"Masukan Password"})),i.a.createElement("div",{className:"col-lg-12"},i.a.createElement(x.a,{name:"keterangan",component:B.e,label:"Keterangan",placeholder:"Masukan Keterangan"})),i.a.createElement("div",{className:"col-lg-12"},i.a.createElement("label",null," \xa0 "),i.a.createElement("button",{type:"submit",name:"type_btn",className:"btn btn-primary btn-block",disabled:this.props.isLoadingOtorisasi},this.props.isLoadingOtorisasi?i.a.createElement(i.a.Fragment,null,i.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Otorisasi"):"Otorisasi"))))}}]),t}(s.Component);q=Object(T.a)({form:"OtorisasiHutang",enableReinitialize:!0})(q);var Q=Object(c.b)(null)(q),W=function(a){Object(l.a)(t,a);var e=Object(o.a)(t);function t(a){var r;return Object(n.a)(this,t),(r=e.call(this,a)).state={isLoading:!1,isLoadingReprint:!1,datahutang:[],isLoadingPembayaran:!1,isloadingBtl:!1,isLoadingBunga:!1,isPeremajaan:!1,isLoadingOtorisasi:!1,formPelunasan:"LIHATHUTANG",columns:[{dataField:"no_faktur_hutang",text:"No Faktur",footerAttrs:{colSpan:"3"},footer:""},{dataField:"tgl_hutang",text:"Tanggal Hutang"},{dataField:"nama_customer",text:"Nama Customer"},{dataField:"jumlah_hutang",text:"Jumlah Hutang",formatter:function(a){return i.a.createElement("span",null,parseInt(a).toLocaleString("kr-KO"))},footer:function(a){return parseInt(a.reduce(function(a,e){return a+e},0)).toLocaleString("kr-KO")}},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:function(a,e,t){return i.a.createElement("div",{className:"row text-center"},i.a.createElement("div",{className:"col-12"},Object(I.l)().tgl_system===e.tgl_system?i.a.createElement(i.a.Fragment,null,i.a.createElement("button",{type:"button","data-tooltip":"Batal Hutang",onClick:function(){return r.getDetailHutang(e)},className:"btn btn-danger mr-3"},i.a.createElement("i",{"data-tip":"Batal Hutang",className:"fa fa-window-close"}))):null,i.a.createElement("button",{type:"button","data-tooltip":"Pelunasan Hutang",onClick:function(){return r.showModalLihatHutang(e)},className:"btn btn-success mr-3"},i.a.createElement("i",{"data-tip":"Pelunasan Hutang",className:"fa fa-calendar-check"})),"\xa0",i.a.createElement("button",{type:"button","data-tooltip":"Reprint Hutang",onClick:function(){return r.reprintHutang(e.no_faktur_hutang)},className:"btn btn-info mr-3"},i.a.createElement("i",{"data-tip":"Reprint Hutang",className:"fa fa-print"}))))},footer:""}]},r}return Object(r.a)(t,[{key:"showModalLihatHutang",value:function(a){this.setState({formPelunasan:"PELUNASANHUTANG"}),this.props.dispatch(Object(g.p)(a))}},{key:"reprintHutang",value:function(a){var e=this;this.setState({isLoadingReprint:!0}),Object(_.h)("hutang/get/bynota",{no_faktur_hutang:a}).then(function(a){e.setState({isLoadingReprint:!1});for(var t=[],n=0;n<2;n++){var r="";a.data.notahutang.forEach(function(a,e){var t=a.n_alamat_customer.length;r+="========================================\n",r+="              NOTA HUTANG               \n",r+="========================================\nTanggal          : ".concat(a.tgl_system,"\nKode Sales       : ").concat(a.kode_sales,"\nNama Customer    : ").concat(a.nama_customer,"\nNo Hp            : ").concat(a.no_hp,"\nAlamat Customer  : ").concat(a.n_alamat_customer.slice(0,20),"\nNo Faktur Hutang : ").concat(a.no_faktur_hutang.toLocaleString("kr-KO"),"\n"),t>20&&(r+="                   ".concat(a.n_alamat_customer.slice(0,20),"\n")),t>40&&(r+="                   ".concat(a.n_alamat_customer.slice(40,20),"\n")),r+="========================================\n",r+="Keterangan\n",r+="========================================\n",a.detail_barang.forEach(function(a,e){r+="Nama Barang      : ".concat(a.nama_barang,"\n"),r+="Kondisi          : ".concat(a.kondisi,"\n"),r+="Kategori         : ".concat(a.kategori,"\n"),r+="Jumlah           : ".concat(a.jumlah,"\n"),r+="Berat            : ".concat(a.berat.toFixed(3),"\n"),r+="========================================\n"}),r+="Berat            : ".concat(a.berat.toFixed(3),"\n"),r+="Bunga            : ".concat(a.bunga.toFixed(3),"\n"),r+="Jumlah Hutang    : ".concat(a.jumlah_hutang.toLocaleString("kr-KO"),"\n"),r+="========================================\n",r+="                               TTD      \n",r+="                                        \n",r+="                                        \n",r+="                                        \n",r+="                         (             )\n",r+="                                        \n",r+="                                        \n",r+="                                        \n"}),t.push(r)}document.getElementById("myInput").value=t.join(""),setTimeout(function(){var a=document.createElement("a"),e=new Blob([document.getElementById("myInput").value],{type:"text/plain;charset=utf-8"});a.href=URL.createObjectURL(e),a.download="autoprint_hutang.txt",document.body.appendChild(a),a.click()},300)}).catch(function(a){e.setState({isLoadingReprint:!1}),Object(b.e)("info","Gagal Mengambil Data Keserver")})}},{key:"getDetailHutang",value:function(a){this.setState({formPelunasan:"BATALHUTANG"}),this.props.dispatch(Object(g.p)(a))}},{key:"cariHutang",value:function(a){var e=this,t={tgl_awal:Object(I.f)(Y(new Date(a.tgl_awal)).format("YYYY-MM-DD")),tgl_akhir:Object(I.f)(Y(new Date(a.tgl_akhir)).format("YYYY-MM-DD"))};this.setState({isLoading:!0}),Object(_.h)("hutang/get/by-tanggal",t).then(function(a){if(0===a.data.length)return e.setState({isLoading:!1,datahutang:[]}),Object(b.e)("info","Data Yang Anda Cari Tidak Ada"),!1;Object(b.e)("success","Data Hutang Tersedia"),e.setState({datahutang:a.data,isLoading:!1})}).catch(function(a){e.setState({isLoading:!1,datahutang:[]}),Object(b.e)("info","Data Yang Anda Cari Tidak Ada")})}},{key:"back",value:function(){this.setState({formPelunasan:"LIHATHUTANG"})}},{key:"showModalPembayaran",value:function(){this.setState({form:"PEMBAYARAN"}),this.props.dispatch(Object(m.Vb)())}},{key:"showModalPeremajaan",value:function(){this.setState({form:"PEREMAJAAN"}),this.props.dispatch(Object(m.Vb)())}},{key:"simpanOtorisasi",value:function(a){var e=this,t={user_id:a.username,password:a.password,kategori:"HANCUR BARANG",description:"SIMPAN HANCUR BARANG",keterangan:a.keterangan.toUpperCase()||"-"};Object(_.i)("authorization",t).then(function(a){var t={sisa_bayar:Object(I.i)("sisa_bayar_hutang").sisa_bayar,total_transaksi:0};Object(I.s)("sisa_bayar_hutang",t),Object(b.e)("success","Otorisasi Berhasil"),e.props.dispatch(Object(m.Qb)()),e.setState({form:"PEMBAYARAN",isLoadingPembayaran:!1,isLoading:!1}),e.props.dispatch(Object(m.Vb)())}).catch(function(a){Object(b.e)("info","Otorisasi Gagal"),e.setState({isLoadingPembayaran:!1,isLoading:!1})})}},{key:"simpanPembayaran",value:function(a){var e=this,t=document.getElementById("no_faktur_hutang").value;if(Object(I.i)("trx_pemabayaran_hutang").length<=0)return Object(b.e)("info","Mohon Tambahkan metode pembayaran minimal 1.."),!1;this.setState({isLoading:!0});var n=Object(I.i)("trx_pemabayaran_hutang"),r=[],l=0,o=0;n.forEach(function(a){"CASH"===a.jenis?(o=parseInt(a.nominal)<=Math.abs(parseInt(Object(I.i)("sisa_bayar_hutang").sisa_bayar))?Math.abs(parseInt(Object(I.i)("sisa_bayar_hutang").sisa_bayar)-parseInt(a.nominal)):parseInt(a.nominal),o=parseInt(a.nominal)>=Math.abs(parseInt(Object(I.i)("sisa_bayar_hutang").total_trx))?parseInt(a.nominal)-Math.abs(parseInt(Object(I.i)("sisa_bayar_hutang").sisa_bayar)):parseInt(a.nominal)):o=parseInt(a.nominal);var e={jenis:a.jenis,keterangan:a.keterangan,fee:"CREDIT"===a.jenis&&parseInt(a.fee)||0,jumlah_rp:o};l=a.nominal+l,r.push(e)});var s={no_faktur_hutang:t,pembayaran:r},i={no_faktur_hutang:t,bunga:Object(I.i)("bunga_hutang_baru").bunga,pembayaran:r};this.setState({isLoadingPembayaran:!0}),!0===this.state.isPeremajaan?parseInt(r.reduce(function(a,e){return a+e.jumlah_rp},0))>=parseInt(Object(I.i)("sisa_bayar_hutang").total_transaksi)?(Object(b.e)("info","Pembayaran Lebih Proses Peremajaan Gagal"),Object(I.s)("trx_pemabayaran_hutang",[]),Object(I.s)("sisa_bayar_hutang",[]),this.setState({isLoadingPembayaran:!1,isLoading:!1})):Object(_.h)("hutang/pemutihan",i).then(function(a){Object(b.e)("success","Peremajaan Berhasil"),e.setState({isLoadingPembayaran:!1,isLoading:!1,formPelunasan:"LIHATHUTANG",datahutang:[]}),e.props.dispatch(Object(m.Qb)()),localStorage.removeItem("jml_byar_pelunasan_hutang"),Object(I.s)("trx_pemabayaran_hutang",[]),Object(I.s)("sisa_bayar_hutang",[]),Object(b.e)("success","Transaksi Hutang Berhasil")}).catch(function(a){var t;Object(b.e)("info",null===(t=a.response.data)||void 0===t?void 0:t.message),e.setState({isLoadingPembayaran:!1,isLoading:!1})}):parseInt(r.reduce(function(a,e){return a+e.jumlah_rp},0))<parseInt(Object(I.i)("sisa_bayar_hutang").total_transaksi)?(this.setState({form:"OTORISASI"}),this.props.dispatch(Object(m.Vb)()),console.log("masuk1")):Object(_.h)("hutang/hutanglunas",s).then(function(a){e.setState({isLoadingPembayaran:!1,isLoading:!1,formPelunasan:"LIHATHUTANG",datahutang:[]}),e.props.dispatch(Object(m.Qb)()),localStorage.removeItem("jml_byar_pelunasan_hutang"),Object(I.s)("trx_pemabayaran_hutang",[]),Object(I.s)("sisa_bayar_hutang",[]),Object(b.e)("success","Transaksi Hutang Berhasil")}).catch(function(a){e.setState({isLoading:!1,isLoadingPembayaran:!1}),Object(b.e)("info","Terjadi Kesalahan Saat Mengirim Data")})}},{key:"componentWillMount",value:function(){!0===this.state.isPeremajaan&&(localStorage.removeItem("jml_byar_pelunasan_hutang"),Object(I.s)("trx_pemabayaran_hutang",[]),Object(I.s)("sisa_bayar_hutang",[]))}},{key:"btlHutang",value:function(a){var e=this;this.setState({isloadingBtl:!0});var t={no_faktur_hutang:a.no_faktur_hutang};Object(_.h)("hutang/hutangbatal",t).then(function(a){Object(b.e)("success","Hutang Berhasil Di Batal"),e.setState({isloadingBtl:!1,formPelunasan:"LIHATHUTANG",datahutang:[]}),e.props.dispatch(Object(m.Qb)())}).catch(function(a){e.setState({isloadingBtl:!1}),Object(b.e)("info","Terjadi Kesalahan Saat Mengirim Data")})}},{key:"simpanBunga",value:function(a){var e=this;this.setState({isLoadingBunga:!0});var t=document.getElementById("no_faktur_hutang").value;if(void 0===a.bunga_baru)return Object(b.e)("info","Bunga Baru Tidak Boleh Kosong"),this.setState({isLoadingBunga:!1}),!1;var n={no_faktur:t,bunga:parseInt(a.bunga_baru)};f.t.fire({position:"center",icon:"warning",title:"Anda yakin ingin menyimpan bunga ".concat(parseInt(a.bunga_baru),"%"),showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"YAKIN",confirmButtonColor:"success"}).then(function(a){a.isConfirmed?(Object(I.s)("bunga_hutang_baru",n),e.setState({isLoadingBunga:!1,isPeremajaan:!0}),e.showModalPembayaran()):e.setState({isLoadingBunga:!1,isPeremajaan:!1})})}},{key:"render",value:function(){var a=this,e={renderer:function(a){return i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12"},i.a.createElement("table",null,i.a.createElement("tr",null,i.a.createElement("td",null,"Nama Barang"),i.a.createElement("td",null,"Berat"),i.a.createElement("td",null,"Jumlah"),i.a.createElement("td",null,"Foto")),a.detail_barang.map(function(a,e){return i.a.createElement("tr",null,i.a.createElement("td",null,a.nama_barang),i.a.createElement("td",null,a.berat),i.a.createElement("td",null,a.jumlah),i.a.createElement("td",null,i.a.createElement("img",{src:a.foto||f.L,width:"200px",height:"200px",alt:"img"})))})))))},showExpandColumn:!0,expandByColumnOnly:!0};return i.a.createElement("div",null,i.a.createElement("textarea",{style:{display:"none"},id:"myInput",rows:"100",cols:"100"}),i.a.createElement("ol",{className:"breadcrumb float-xl-right"},i.a.createElement("li",{className:"breadcrumb-item"},i.a.createElement(u.b,{to:"#"},"Hutang")),i.a.createElement("li",{className:"breadcrumb-item active"}," ","PELUNASANHUTANG"===this.state.formPelunasan?"Pelunasan Hutang":"BATALHUTANG"===this.state.formPelunasan?"BATAL HUTANG":"Lihat Hutang")),i.a.createElement("h1",{className:"page-header"}," ","PELUNASANHUTANG"===this.state.formPelunasan?"Pelunasan Hutang":"BATALHUTANG"===this.state.formPelunasan?"BATAL HUTANG":"Lihat Hutang"," "),i.a.createElement(d.a,null,i.a.createElement(d.c,null,"PELUNASANHUTANG"===this.state.formPelunasan?"Pelunasan Hutang":"BATALHUTANG"===this.state.formPelunasan?"BATAL HUTANG":"Lihat Hutang"),i.a.createElement("br",null),i.a.createElement("div",{className:"container"},"PELUNASANHUTANG"===this.state.formPelunasan?i.a.createElement(i.a.Fragment,null," ",i.a.createElement(R,{showModalPembayaran:function(){return a.showModalPembayaran()},showModalPeremajaan:function(){return a.showModalPeremajaan()},back:function(){return a.back()}})," "):"BATALHUTANG"===this.state.formPelunasan?i.a.createElement(G,{isloadingBtl:this.state.isloadingBtl,onSubmit:function(e){return a.btlHutang(e)},back:function(){return a.back()}}):i.a.createElement(i.a.Fragment,null,i.a.createElement(C,{onSubmit:function(e){return a.cariHutang(e)},isLoading:this.state.isLoading}),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12"},i.a.createElement(h.a,{keyField:"no_faktur_hutang",exportCsv:!1,data:this.state.datahutang,columns:this.state.columns,empty:!0,expandRow:e,textEmpty:"Data Barang Kosong"}))))),i.a.createElement("br",null),i.a.createElement(p.a,{title:"PEREMAJAAN"===this.state.form?"PEREMAJAAN":"PEMBAYARAN"===this.state.form?"PEMBAYARAN":"OTORISASI",size:"p",content:"PEREMAJAAN"===this.state.form?i.a.createElement(i.a.Fragment,null," ",i.a.createElement(V,{isLoadingBunga:this.state.isLoadingBunga,onSubmit:function(e){return a.simpanBunga(e)}})," "):"PEMBAYARAN"===this.state.form?i.a.createElement(i.a.Fragment,null,i.a.createElement(H,{isLoading:this.state.isLoading,isLoadingPembayaran:this.state.isLoadingPembayaran,bayarSekarang:function(e){return a.simpanPembayaran(e)}})):i.a.createElement(Q,{isLoadingOtorisasi:this.state.isLoadingOtorisasi,onSubmit:function(e){return a.simpanOtorisasi(e)}})})))}}]),t}(i.a.Component);e.default=Object(c.b)(null)(W)},693:function(a,e,t){"use strict";e.a=function(a){var e={};return a.jenis||(e.jenis="Jenis Tidak Boleh Kosong"),e}},714:function(a,e,t){"use strict";e.a=function(a){var e={};return a.tgl_selesai||(e.tgl_selesai="Tanggal Selesai Tidak Boleh Kosong"),a.tgl_ambil||(e.tgl_ambil="Tanggal Tidak Boleh Kosong"),e}}}]);
//# sourceMappingURL=16.26316460.chunk.js.map