{"version":3,"sources":["pages/Barang/TimbangBarang/FormTimbangBarang.jsx","pages/Barang/TimbangBarang/TimbangBarang.jsx"],"names":["FormTimbangBarang","props","_this","Object","classCallCheck","this","_super","call","state","no_kirim","datagudang","isLoading","loading","timbangan","columns","dataField","text","sort","editable","formatter","data","row","parseFloat","berat_plastik","toFixed","berat_atribut","berat_bandrol","berat","berat_baki","selisih","dispatch","getDataGudang","getDataBaki","getTimbangan","_this2","tanggal","getToday","detail_barang","timbang_barang","setState","postData2","then","res","ToastNotification","updateTimbangBarang","catch","err","console","log","response","_this3","databaki","value","name","forEach","list","kode_baki","nama_baki","push","react_default","a","createElement","onSubmit","handleSubmit","autoComplete","onKeyPress","e","key","preventDefault","className","Field","id","label","onChange","kode_gudang","change","getDataBakiByGudang","options","filter","undefined","map","nama_gudang","placeholder","component","ReanderSelect","htmlFor","lib_default","keyField","products","cellEdit","cellEditFactory","mode","blurToSave","afterSaveCell","oldValue","newValue","column","kode_toko","qty","total","timbang","cek","localStoragedecryp","length","JSON","parse","hasil_cek","findIndex","hasil","localStorageencryp","stringify","type","onClick","sendTimbangan","Fragment","loading_default","background","loaderColor","Component","reduxForm","form","enableReinitialize","connect","data_terima_barang","localStorage","getItem","getDataTimbangan","utility","initialValues","datamaster","databarang","getTimbangBarang","TimbangBarang","isEdit","modalDialog","isLoadingBtn","DataTimbangBarang","SimpanDataBarang","resetTimbangBarang","gudang","baki","getNokirim","react_router_dom","to","panel","TimbangBarang_FormTimbangBarang","handleChange","React"],"mappings":"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","file":"static/js/48.9bc7b36e.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Field, reduxForm } from \"redux-form\";\r\n// import { getNokirim } from \"../../../actions/databarang_action\";\r\nimport {\r\n  getDataBaki,\r\n  getDataBakiByGudang,\r\n  getDataGudang,\r\n} from \"../../../actions/datamaster_action\";\r\nimport { ReanderSelect } from \"../../../components/helpers/field\";\r\nimport Loading from \"react-fullscreen-loading\";\r\nimport {\r\n  getToday,\r\n  localStoragedecryp,\r\n  localStorageencryp,\r\n} from \"../../../components/helpers/function\";\r\nimport BootstrapTable from \"react-bootstrap-table-next\";\r\nimport cellEditFactory from \"react-bootstrap-table2-editor\";\r\nimport { updateTimbangBarang } from \"../../../actions/databarang_action\";\r\nimport { postData2 } from \"../../../config/axios\";\r\nimport { ToastNotification } from \"../../../components/helpers/notification\";\r\nimport { getTimbangan } from \"../../../actions/utility_action\";\r\n\r\nconst maptostate = (state) => {\r\n  let data_terima_barang =\r\n    localStorage.getItem(\"data_terima_barang\") === null || undefined\r\n      ? []\r\n      : JSON.parse(localStorage.getItem(\"data_terima_barang\") || []);\r\n\r\n  return {\r\n    getDataTimbangan: state.utility.getTimbangan,\r\n    initialValues: {\r\n      no_kirim: data_terima_barang.no_kirim || \"\",\r\n    },\r\n    datagudang: state.datamaster.getDataGudang,\r\n    databaki: state.datamaster.getDataBaki,\r\n    timbang_barang: state.databarang.getTimbangBarang,\r\n  };\r\n};\r\nclass FormTimbangBarang extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      no_kirim: [],\r\n      datagudang: [],\r\n      isLoading: false,\r\n      loading: false,\r\n      timbangan: 0,\r\n      columns: [\r\n        {\r\n          dataField: \"kode_gudang\",\r\n          text: \"Gudang\",\r\n          sort: true,\r\n          editable: false,\r\n        },\r\n        {\r\n          dataField: \"kode_toko\",\r\n          text: \"Baki\",\r\n          editable: false,\r\n        },\r\n        {\r\n          dataField: \"qty\",\r\n          text: \"Qty\",\r\n          editable: false,\r\n        },\r\n        {\r\n          dataField: \"berat\",\r\n          text: \"Berat\",\r\n          editable: false,\r\n        },\r\n        {\r\n          dataField: \"berat_baki\",\r\n          text: \"Berat baki\",\r\n          editable: false,\r\n        },\r\n        {\r\n          dataField: \"berat_plastik\",\r\n          text: \"Berat Plastik\",\r\n          editable: false,\r\n          formatter: (data, row) => {\r\n            return parseFloat(row.berat_plastik).toFixed(2);\r\n          },\r\n        },\r\n        {\r\n          dataField: \"berat_atribut\",\r\n          text: \"Berat Atribut\",\r\n          editable: false,\r\n          formatter: (data, row) => {\r\n            return parseFloat(row.berat_atribut).toFixed(2);\r\n          },\r\n        },\r\n        {\r\n          dataField: \"berat_bandrol\",\r\n          text: \"Berat Bandrol\",\r\n          editable: false,\r\n          formatter: (data, row) => {\r\n            return parseFloat(row.berat_bandrol).toFixed(2);\r\n          },\r\n        },\r\n\r\n        {\r\n          dataField: \"total\",\r\n          text: \"Total\",\r\n          editable: false,\r\n          formatter: (data, row) => {\r\n            return parseFloat(\r\n              row.berat + row.berat_baki + row.berat_bandrol + row.berat_atribut + row.berat_plastik\r\n            ).toFixed(2);\r\n          },\r\n        },\r\n        {\r\n          dataField: \"timbang\",\r\n          text: \"Timbang\",\r\n        },\r\n        {\r\n          dataField: \"selisih\",\r\n          text: \"Selisih\",\r\n          formatter: (data, row) => {\r\n            return parseFloat(row.selisih).toFixed(2);\r\n          },\r\n        },\r\n      ],\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.dispatch(getDataGudang());\r\n    this.props.dispatch(getDataBaki());\r\n    // this.props.dispatch(getNokirim())\r\n    this.props.dispatch(getTimbangan());\r\n  }\r\n  // konektimbangan() {\r\n  //   setTimeout(() => {\r\n  //     if (navigator.serial) {\r\n  //       // this.connectSerial();\r\n  //       navigator.serial.getPorts()\r\n  //       .then((ports) => {\r\n  //       // console.log(ports);\r\n  //         if (ports.length !== 0) {\r\n  //           this.connectSerial();\r\n  //         }\r\n  //         })\r\n  //     } else {\r\n  //       alert('Web Serial API not supported.');\r\n  //     }\r\n  //   }, 500);\r\n  // }\r\n  // async componentWillUnmount() {\r\n  //   if (this.reader) {\r\n  //     await this.reader.cancel();\r\n  //     // await this.inputDone.catch(() => {});\r\n  //     this.reader = null;\r\n  //     this.inputDone = null;\r\n  //     console.log(\"1\");\r\n  //   }\r\n  //   if (this.outputStream) {\r\n  //     await this.outputStream.getWriter().close();\r\n  //     await this.outputDone;\r\n  //     this.outputStream = null;\r\n  //     this.outputDone = null;\r\n  //     console.log(\"2\");\r\n  //   }\r\n  //   // await port.close();\r\n  //   if (this.port) {\r\n  //     // console.log(\"3\");\r\n  //     await this.port.close()\r\n  //     this.port = null;\r\n  //     return false\r\n  //   }\r\n\r\n  // }\r\n  // async connectSerial() {\r\n  //   if (this.reader) {\r\n  //     await this.reader.cancel();\r\n  //     // await this.inputDone.catch(() => {});\r\n  //     this.reader = null;\r\n  //     this.inputDone = null;\r\n  //     console.log(\"1\");\r\n  //   }\r\n  //   if (this.outputStream) {\r\n  //     await this.outputStream.getWriter().close();\r\n  //     await this.outputDone;\r\n  //     this.outputStream = null;\r\n  //     this.outputDone = null;\r\n  //     console.log(\"2\");\r\n  //   }\r\n  //   // await port.close();\r\n  //   if (this.port) {\r\n  //     // console.log(\"3\");\r\n  //     await this.port.close()\r\n  //     this.port = null;\r\n  //     return false\r\n  //   }\r\n\r\n  //   this.port = await navigator.serial.requestPort();\r\n  //   await this.port.open({ baudRate: 9600, dataBits: 8, parity: \"none\" });\r\n  //   this.encoder = new window.TextDecoderStream();\r\n  //   this.encoder2 = new window.TextEncoderStream();\r\n  //   this.port.readable.pipeTo(this.encoder.writable);\r\n  //   const inputStream = this.encoder.readable;\r\n  //   this.reader = inputStream.getReader();\r\n  //   this.outputStream = this.encoder2.writable;\r\n\r\n  //   this.outputDone = this.encoder2.readable.pipeTo(this.port.writable);\r\n\r\n  //   let hasil = \"\";\r\n  //   while (true) {\r\n  //     const { value, done } = await this.reader.read();\r\n  //     // console.log('don', done)\r\n  //     if (value) {\r\n  //       hasil += value;\r\n  //       setItem('timbangan', hasil.replace(/[^0-9.g]/g, ''))\r\n  //       this.props.dispatch(getTimbangan());\r\n  //       this.setState({\r\n  //         timbangan : this.props.getDataTimbangan\r\n  //       })\r\n  //       console.log(this.props.getDataTimbangan);\r\n  //       if (/\\d{1,3}\\.\\d{2}/.test(hasil)) {\r\n  //         document.getElementById(\"id_text\").focus()\r\n  //       }\r\n  //     }\r\n  //     if (done) {\r\n  //       console.log('[readLoop] DONE', done);\r\n  //       this.reader.releaseLock();\r\n  //       break;\r\n  //     }\r\n  //   }\r\n  // }\r\n  sendTimbangan() {\r\n    let data = {\r\n      tanggal: getToday(),\r\n      detail_barang: this.props.timbang_barang,\r\n    };\r\n    this.setState({\r\n      isLoading: true,\r\n    });\r\n    postData2(\"timbang-baki\", data)\r\n      .then((res) => {\r\n        this.setState({\r\n          isLoading: false,\r\n        });\r\n        ToastNotification(\"success\", \"Data Berhasil Disimpan\");\r\n        this.props.dispatch(updateTimbangBarang([]));\r\n      })\r\n      .catch((err) => {\r\n        this.setState({\r\n          isLoading: false,\r\n        });\r\n        console.log(err);\r\n        ToastNotification(\r\n          \"error\",\r\n          err &&\r\n            err.response &&\r\n            err.response.data &&\r\n            \"Terjadi kersalahan saat menimbang baki\"\r\n        );\r\n      });\r\n  }\r\n\r\n  render() {\r\n    let databaki = [\r\n      {\r\n        value: \"ALL\",\r\n        name: \"SEMUA\",\r\n      },\r\n    ];\r\n    this.props.databaki.forEach((list) => {\r\n      let data = {\r\n        value: list.kode_baki,\r\n        name: list.kode_baki + \" - \" + list.nama_baki,\r\n      };\r\n      databaki.push(data);\r\n    });\r\n    return (\r\n      <form\r\n        onSubmit={this.props.handleSubmit}\r\n        autoComplete=\"off\"\r\n        onKeyPress={(e) => {\r\n          e.key === \"Enter\" && e.preventDefault();\r\n        }}\r\n      >\r\n        <div className=\"row\">\r\n          <div className=\"col-lg-4\">\r\n            {/* <input type=\"text\" id=\"id_text\"/> */}\r\n            <Field\r\n              id=\"kode_gudang\"\r\n              label=\"Kode Gudang\"\r\n              name=\"kode_gudang\"\r\n              onChange={(e) => {\r\n                this.setState({ kode_gudang: e });\r\n                this.props.change(\"kode_baki\", \"\");\r\n                this.props.dispatch(getDataBakiByGudang(e));\r\n              }}\r\n              options={this.props.datagudang\r\n                .filter((list) => list.kode_gudang !== undefined)\r\n                .map((list) => {\r\n                  let data = {\r\n                    value: list.kode_gudang,\r\n                    name: list.kode_gudang + \" - \" + list.nama_gudang,\r\n                  };\r\n                  return data;\r\n                })}\r\n              placeholder={\"Silahkan Pilih Kode Gudang\"}\r\n              component={ReanderSelect}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"col-lg-4\">\r\n            <Field\r\n              id=\"kode_baki\"\r\n              label=\"Kode Baki\"\r\n              name=\"kode_baki\"\r\n              onChange={(e) => {\r\n                this.setState({ kode_baki: e });\r\n                this.props.change(\"kode_baki\", \"\");\r\n              }}\r\n              options={databaki}\r\n              placeholder={\"Silahkan Pilih Kode Baki\"}\r\n              component={ReanderSelect}\r\n            />\r\n          </div>\r\n          <div className=\"col-lg-4\">\r\n            <label htmlFor=\"\">&nbsp;</label>\r\n            <button className=\"btn btn-outline-secondary btn-block\">\r\n              Cari\r\n            </button>\r\n          </div>\r\n        </div>\r\n        {/* <button type=\"button\" onClick={()=>this.konektimbangan()}> Button </button> */}\r\n        <BootstrapTable\r\n          keyField=\"baki\"\r\n          data={this.props.products || []}\r\n          columns={this.state.columns || []}\r\n          cellEdit={cellEditFactory({\r\n            mode: \"click\",\r\n            blurToSave: true,\r\n            afterSaveCell: (oldValue, newValue, row, column) => {\r\n              let data = {\r\n                kode_gudang: row.kode_gudang,\r\n                kode_toko: row.kode_toko,\r\n                qty: row.qty,\r\n                berat: row.berat,\r\n                berat_baki: row.berat_baki,\r\n                berat_bandrol: row.berat_bandrol,\r\n                berat_atribut: row.berat_atribut,\r\n                berat_plastik: row.berat_plastik,\r\n                total:\r\n                  parseFloat(row.berat_baki) +\r\n                  parseFloat(row.berat_bandrol) +\r\n                  parseFloat(row.berat_atribut) +\r\n                  parseFloat(row.berat_plastik) +\r\n                  parseFloat(row.berat),\r\n                timbang: parseFloat(newValue),\r\n                selisih: parseFloat(\r\n                  (\r\n                    parseFloat(\r\n                      row.berat_baki +\r\n                        row.berat_bandrol +\r\n                        row.berat +\r\n                        row.berat_plastik +\r\n                        row.berat_atribut\r\n                    ) - parseFloat(newValue || 0)\r\n                  ).toFixed(3) || 0\r\n                ),\r\n              };\r\n              let cek =\r\n                localStoragedecryp(\"timbang_barang\").length === 0\r\n                  ? []\r\n                  : JSON.parse(localStoragedecryp(\"timbang_barang\"));\r\n              let hasil_cek = cek.findIndex(\r\n                (hasil) => hasil.kode_toko === data.kode_toko\r\n              );\r\n              if (hasil_cek === -1) {\r\n                cek.push(data);\r\n                localStorageencryp(\"timbang_barang\", JSON.stringify(cek));\r\n                this.props.dispatch(updateTimbangBarang(cek));\r\n              } else {\r\n                cek[hasil_cek] = data;\r\n                localStorageencryp(\"timbang_barang\", JSON.stringify(cek));\r\n                this.props.dispatch(updateTimbangBarang(cek));\r\n              }\r\n            },\r\n          })}\r\n        />\r\n        <div className=\"row\">\r\n          <div className=\"col-lg-8\"></div>\r\n          <div className=\"col-lg-4 text-right\">\r\n            <label htmlFor=\"\">&nbsp;</label>\r\n            <button\r\n              className=\"btn btn-primary btn-block\"\r\n              type=\"button\"\r\n              onClick={() => this.sendTimbangan()}\r\n            >\r\n              {this.state.isLoading ? (\r\n                <>\r\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Sedang\r\n                  Menyimpan\r\n                </>\r\n              ) : (\r\n                \"Simpan Data\"\r\n              )}\r\n            </button>\r\n          </div>\r\n        </div>\r\n        {this.state.isLoading ? (\r\n          <Loading\r\n            loading\r\n            background=\"rgba(0, 0, 0, 0.35)\"\r\n            loaderColor=\"rgba(94, 147, 117, 1)\"\r\n          />\r\n        ) : null}\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nFormTimbangBarang = reduxForm({\r\n  form: \"FormTimbangBarang\",\r\n  enableReinitialize: true,\r\n})(FormTimbangBarang);\r\nexport default connect(maptostate, null)(FormTimbangBarang);\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Panel, PanelHeader } from \"../../../components/panel/panel.jsx\";\r\nimport {\r\n  getNokirim, getTimbangBarang,\r\n} from \"../../../actions/databarang_action.jsx\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport {  getToday, localStoragedecryp,} from \"../../../components/helpers/function.jsx\";\r\nimport FormTimbangBarang from \"./FormTimbangBarang.jsx\";\r\nconst maptostate = (state) => {\r\n  return {\r\n    timbang_barang : state.databarang.getTimbangBarang\r\n  };\r\n};\r\n\r\nclass TimbangBarang extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isEdit: false,\r\n      modalDialog: false,\r\n      isLoading: false,\r\n      isLoadingBtn: false,\r\n      DataTimbangBarang: [],\r\n      SimpanDataBarang: false,\r\n      resetTimbangBarang : false,\r\n      \r\n      products : [\r\n        {\r\n          gudang : \"TOKO\",\r\n          baki : \"KLNG\",\r\n          qty : 10,\r\n          berat : 200,\r\n          berat_baki : 100,\r\n          berat_bandrol: 0.200,\r\n          total: 1250,\r\n          timbang: 0,\r\n          selisih : 0\r\n        },\r\n        {\r\n          gudang : \"TOKO\",\r\n          baki : \"GLNG\",\r\n          qty : 10,\r\n          berat : 200,\r\n          berat_baki : 100,\r\n          berat_bandrol: 0.200,\r\n          total: 1250,\r\n          timbang: 0,\r\n          selisih : 0\r\n        }\r\n      ]\r\n    };\r\n\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.dispatch(getNokirim());\r\n    this.setState({\r\n      products : localStoragedecryp(\"timbang_barang\")\r\n    })\r\n  }\r\n\r\n  handleSubmit(data) {\r\n    // console.log(data);\r\n    this.props.dispatch(getTimbangBarang(data.kode_gudang, data.kode_baki, getToday()))\r\n    \r\n      \r\n  }\r\n\r\n\r\n  render() {\r\n    // console.log(this.props.products);\r\n    return (\r\n      <div>\r\n        <ol className=\"breadcrumb float-xl-right\">\r\n          <li className=\"breadcrumb-item\">\r\n            <Link to=\"#\">Barang</Link>\r\n          </li>\r\n          <li className=\"breadcrumb-item active\">Timbang Baki</li>\r\n        </ol>\r\n        <h1 className=\"page-header\">Timbang Baki </h1>\r\n        <Panel>\r\n          <PanelHeader>Timbang Baki</PanelHeader>\r\n          <br />\r\n\r\n          {/* Terima Barang */}\r\n          <div className=\"container\">\r\n            <FormTimbangBarang\r\n            handleChange={() => this.handleChange()}\r\n              column={this.state.columns || []}\r\n              products={this.props.timbang_barang|| []}\r\n            onSubmit={(data) => this.handleSubmit(data) }\r\n            />\r\n          \r\n          </div>\r\n          <br />\r\n          {/* End Tambah Terima Barang  */}\r\n        </Panel>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(maptostate, null)(TimbangBarang);\r\n"],"sourceRoot":""}