{"version":3,"sources":["pages/Sepuhan/TerimaBarangSepuh/HeadTerimaSepuh.jsx","pages/Sepuhan/TerimaBarangSepuh/index.jsx"],"names":["HeadTerimaSepuh","props","_this","Object","classCallCheck","this","_super","call","state","isLoadingReset","isLoadingSimpanDataTerima","disabled","isShowingMore","databarang","columns","dataField","text","editable","headerClasses","formatter","data","react_default","a","createElement","className","undefined","toFixed","e","_this2","clearTimeout","delayTimer","setTimeout","setState","loadingData","getDataNoTimeOut2","then","res","length","ToastNotification","setItem","catch","err","document","getElementById","focus","date","tanggal_kirim","Date","_this3","_this4","onSubmit","handleSubmit","onKeyPress","key","preventDefault","autoComplete","Field","label","id","name","placeholder","component","ReanderField","onChange","getDataKirimSepuh","target","value","lib_default","keyField","getItem","cellEdit","cellEditFactory","mode","blurToSave","afterSaveCell","oldValue","newValue","row","column","hasil","parseFloat","berat_sepuh","berat_terima","isi","tgl_system","no_sepuh","kode_baki","kode_dept","kode_group","qty_sepuh","qty_terima","berat_rusak","qty_rusak","berat_selisih","Number","cek","hasil_cek","findIndex","push","Berhasil","type","isLoading","Fragment","onClick","reset","data-tut","loading_default","loading","background","loaderColor","Component","reduxForm","form","enableReinitialize","connect","initialValues","tanggal_terima","getToday","TerimaBarangSepuh","closeTour","isTourOpen","openTour","detail_sepuh","forEach","element","parseInt","berat_timbangan","nokirim_sepuh_sepuh","getTglSystem","total_qty","reduce","b","total_berat","total_qty_rusak","total_berat_rusak","total_qty_terima","total_berat_terima","total_berat_timbang","postDataNoTImeOut2","console","log","message","dispatch","datasepuh","IndexAwal","feedback","concat","buktiSlip","no_terima_sepuh","tgl_terima","jenis","index","baki","join","file","Blob","href","URL","createObjectURL","download","body","appendChild","click","_err$response","response","style","display","rows","cols","react_router_dom","to","panel","TerimaBarangSepuh_HeadTerimaSepuh","React"],"mappings":"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","file":"static/js/120.4c3d5d0c.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Field, reduxForm } from \"redux-form\";\nimport { getToday,setItem,getItem } from \"../../../components/helpers/function\";\nimport { ReanderField } from \"../../../components/helpers/field.jsx\";\nimport { getDataNoTimeOut2 } from \"../../../config/axios\";\nimport { ToastNotification } from \"../../../components/helpers/notification\";\nimport Loading from \"react-fullscreen-loading\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport cellEditFactory from \"react-bootstrap-table2-editor\";\n\nconst maptostate = (state) => {\n  return {\n    initialValues: {\n      tanggal_terima: getToday(),\n    },\n  };\n};\nclass HeadTerimaSepuh extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoadingReset: false,\n      isLoadingSimpanDataTerima: false,\n      disabled: true,\n      isShowingMore: false,\n      databarang: [],\n      columns: [\n        {\n          dataField: \"kode_baki\",\n          text: \"Baki\",\n          editable: false,\n        },\n        {\n          dataField: \"kode_dept\",\n          text: \"Jenis\",\n          editable: false,\n        },\n        {\n          dataField: \"qty_sepuh\",\n          text: \"Qty Sepuh\",\n          editable: false,\n          headerClasses: 'text-right',\n          formatter: (data) => {\n            return <div className=\"text-right\"> {data === undefined || null ? 0 : data}</div>;\n          },\n        },\n        {\n          dataField: \"berat_sepuh\",\n          text: \"Berat Sepuh\",\n          editable: false,\n          headerClasses: 'text-right',\n          formatter: (data) => {\n            return <div className=\"text-right\"> {data === undefined || null ? 0 : data.toFixed(2)}</div>;\n          },\n        },\n        {\n          dataField: \"berat_terima\",\n          text: \"Berat Terima\",\n          headerClasses: 'text-right',\n          formatter: (data) => {\n            return <div className=\"text-right\"> {data === undefined || null ? 0 : data.toFixed(2)}</div>;\n          },\n        },\n        {\n          dataField: \"qty_terima\",\n          text: \"Qty Terima\",\n          headerClasses: 'text-right',\n          formatter: (data) => {\n            return <div className=\"text-right\"> {data === undefined || null ? 0 : data}</div>;\n          },\n        },\n       \n        {\n          dataField: \"berat_rusak\",\n          text: \"Berat Rusak\",\n          headerClasses: 'text-right',\n          formatter: (data) => {\n            return <div className=\"text-right\"> {data === undefined || null ? 0 : data.toFixed(2)}</div>;\n          },\n        },\n        {\n          dataField: \"qty_rusak\",\n          text: \"Qty Rusak\",\n          headerClasses: 'text-right',\n          formatter: (data) => {\n            return <div className=\"text-right\"> {data === undefined || null ? 0 : data}</div>;\n          },\n        },\n       \n        {\n          dataField: \"berat_selisih\",\n          text: \"Berat Selisih\",\n          headerClasses: 'text-right',\n          formatter: (data) => {\n            return <div className=\"text-right\"> {data === undefined || null ? 0 : data}</div>;\n          },\n          editable: false,\n        },\n      ],\n    };\n  }\n\n  getDataKirimSepuh(e) {\n    clearTimeout(this.delayTimer);\n    this.delayTimer = setTimeout(() => {\n      this.setState({ loadingData: true });\n      if (e === \"\") {\n        this.setState({ loadingData: false });\n        return false;\n      }\n      getDataNoTimeOut2(\"kirim-sepuh?no_sepuh=\" + e)\n        .then((res) => {\n          if (res.data.length === 0) {\n            ToastNotification(\"info\", \"Data Kosong !\");\n            setItem(\"data_terima_barang_sepuh\", [])\n            this.setState({ loadingData: false });\n            return false;\n          }\n          \n          setItem(\"data_terima_barang_sepuh\", res.data)\n          this.setState({\n            loadingData: false,\n          });\n        })\n        .catch((err) => {\n          setItem(\"data_terima_barang_sepuh\", [])\n          this.setState({\n            loadingData: false,\n          });\n          ToastNotification(\"info\", \"Data Kosong !\");\n        });\n    }, 1500);\n  }\n\n  componentDidMount() {\n    setItem(\"data_terima_barang_sepuh\",[])\n    setTimeout(() => {\n        document.getElementById(\"nokirim_sepuh_sepuh\").focus()\n    }, 100);\n  }\n  setStartDate(date) {\n    this.setState({\n      tanggal_kirim: new Date(date),\n    });\n  }\n  reset(){\n    this.setState({\n      isLoadingReset : true\n    });\n\n    setTimeout(() => {\n      setItem(\"data_terima_barang_sepuh\",[])\n      this.setState({\n        isLoadingReset : false\n      })\n    }, 200);\n  }\n  render() {\n    return (\n      <form\n        onSubmit={this.props.handleSubmit}\n        onKeyPress={(e) => {\n          e.key === \"Enter\" && e.preventDefault();\n        }}\n        autoComplete=\"off\"\n      >\n        <div className=\"row\">\n          <div className=\"col-10\">\n            <div className=\"row\">\n              <div className=\"col-4\">\n                <Field\n                  label=\"No Kirim Sepuh\"\n                  id=\"nokirim_sepuh_sepuh\"\n                  name=\"nokirim_sepuh_sepuh\"\n                  placeholder=\"Silahkan Pilih No Kirim\"\n                  component={ReanderField}\n                  onChange={(e) => this.getDataKirimSepuh(e.target.value)}\n                />\n              </div>\n            </div>\n          </div>\n          {/* <div className=\"col-5 text-right\">\n              <button className=\"btn btn-success\">Terima</button>\n            </div> */}\n        </div>\n        &nbsp;\n        <BootstrapTable\n          keyField=\"_id\"\n          data={getItem(\"data_terima_barang_sepuh\") || []}\n          columns={this.state.columns || []}\n          cellEdit={cellEditFactory({\n            mode: \"click\",\n            blurToSave: true,\n            afterSaveCell: (oldValue, newValue, row, column) => {\n              let hasil = parseFloat(row.berat_sepuh) - parseFloat(row.berat_terima)\n              let isi = 0;\n              if(hasil < 0){\n                ToastNotification(\"info\",\"Berat Terima Tidak Boleh Melebih Dari Berat Sepuh\")\n              }else{\n                isi = (parseFloat(row.berat_sepuh) - parseFloat(row.berat_terima)).toFixed(2) || 0\n              }\n              let data = {\n                tgl_system: row.tgl_system,\n                no_sepuh: row.no_sepuh,\n                kode_baki: row.kode_baki,\n                kode_dept: row.kode_dept,\n                kode_group: row.kode_group,\n                qty_sepuh: row.qty_sepuh,\n                qty_terima: row.qty_terima,\n                berat_sepuh: row.berat_sepuh,\n                berat_terima: row.berat_terima,\n                berat_rusak: row.berat_rusak,\n                qty_rusak: row.qty_rusak,\n                berat_selisih: isi\n              };\n\n              switch (column.dataField) {\n                case \"berat_terima\":\n                  if(hasil < 0){\n                    data[\"berat_terima\"] = 0\n                  }else{\n                    data[\"berat_terima\"] = Number(newValue);\n                  }\n                  break;\n\n                case \"qty_sepuh\":\n                  data[\"qty_sepuh\"] = Number(newValue);\n                  break;\n\n                case \"qty_terima\":\n                  if(Number(newValue) + row.qty_rusak !== row.qty_sepuh){\n                    ToastNotification(\"info\", \"Harap Masukan Qty Dengan Benar\")\n                    this.setState({\n                      disabled : true\n                    })\n                   return false; \n                  }else{\n                    data[\"qty_terima\"] = Number(newValue);\n                    this.setState({\n                      disabled : false\n                    })\n                  }\n                  break;\n\n                case \"berat_rusak\":\n                  data[\"berat_rusak\"] = Number(newValue);\n                  break;\n\n                case \"qty_rusak\":\n                  data[\"qty_rusak\"] = Number(newValue);\n                  break;\n\n\n                default:\n                  break;\n              }\n\n              let cek = getItem(\"data_terima_barang_sepuh\").length === 0 ? [] : getItem(\"data_terima_barang_sepuh\");\n              let hasil_cek = cek.findIndex(\n                (hasil) => hasil.kode_dept === data.kode_dept\n              );\n              if (hasil_cek === -1) {\n                cek.push(data);\n                setItem(\"data_terima_barang_sepuh\",cek)\n                this.setState({\n                  Berhasil : true\n                })\n\n              } else {\n                cek[hasil_cek] = data;\n                setItem(\"data_terima_barang_sepuh\",cek)\n                this.setState({\n                  Berhasil : true\n                })\n              }\n            },\n          })}\n        />\n        <div className=\"row\">\n          <div className=\"col-12 text-right\">\n            <button type=\"submit\" disabled={this.state.disabled} className=\"btn btn-primary\">\n               {this.props.isLoading ? (\n                <>\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Sedang\n                  Menuimpan\n                </>\n              ) : (\n                \"Simpan\"\n              )}\n            </button> \n            &nbsp;\n            <button type=\"button\" onClick={()=>this.reset()} data-tut=\"resetData\" className=\"btn btn-warning\">\n            {this.props.isLoadingReset ? (\n                <>\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Reset\n                </>\n              ) : (\n                \"Reset\"\n              )}\n            </button>\n          </div>\n        </div>\n        {this.state.loadingData ? (\n          <Loading\n            loading\n            background=\"rgba(0, 0, 0, 0.35)\"\n            loaderColor=\"rgba(94, 147, 117, 1)\"\n          />\n        ) : null}\n        {this.state.isLoadingReset ? (\n          <Loading\n            loading\n            background=\"rgba(0, 0, 0, 0.35)\"\n            loaderColor=\"rgba(94, 147, 117, 1)\"\n          />\n        ) : null}\n      </form>\n    );\n  }\n}\n\nHeadTerimaSepuh = reduxForm({\n  form: \"HeadTerimaSepuh\",\n  enableReinitialize: true,\n  // validate: HeadStockPembelian,\n})(HeadTerimaSepuh);\nexport default connect(maptostate)(HeadTerimaSepuh);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { reduxForm, reset } from \"redux-form\";\nimport {\n  Panel,\n  PanelHeader,\n  PanelBody,\n} from \"../../../components/panel/panel.jsx\";\nimport HeadTerimaSepuh from \"./HeadTerimaSepuh.jsx\";\nimport {\n  getTglSystem,\n  getItem,\n  ToastNotification,\n  postDataNoTImeOut2,\n  setItem,\n} from \"../../../components/helpers/library\";\n// import { disableBodyScroll, enableBodyScroll } from \"body-scroll-lock\";\n\nclass TerimaBarangSepuh extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: false,\n    };\n  }\n\n  closeTour = () => {\n    this.setState({ isTourOpen: false });\n  };\n\n  openTour = () => {\n    this.setState({ isTourOpen: true });\n  };\n\n  // disableBody = (target) => disableBodyScroll(target);\n  // enableBody = (target) => enableBodyScroll(target);\n  handleSubmit(data) {\n    let detail_sepuh = [];\n    this.setState({\n      isLoading: true,\n    });\n    getItem(\"data_terima_barang_sepuh\").forEach((element) => {\n      let row = {\n        kode_baki: element.kode_baki,\n        kode_dept: element.kode_dept,\n        kode_group: element.kode_group,\n        qty_sepuh: parseInt(element.qty_sepuh),\n        berat_timbangan: parseFloat(element.berat_sepuh),\n        berat_terima: parseFloat(element.berat_terima),\n        qty_terima: parseInt(element.qty_terima),\n        berat_rusak: parseFloat(element.berat_rusak),\n        qty_rusak: parseInt(element.qty_rusak),\n        berat_selisih: parseFloat(element.berat_selisih),\n      };\n      detail_sepuh.push(row);\n    });\n\n    let hasil = {\n      no_sepuh: data.nokirim_sepuh_sepuh,\n      tgl_system: getTglSystem(),\n      detail_sepuh: detail_sepuh,\n      total_qty: getItem(\"data_terima_barang_sepuh\").reduce(\n        (a, b) => a + b.qty_sepuh,\n        0\n      ),\n      total_berat: getItem(\"data_terima_barang_sepuh\").reduce(\n        (a, b) => a + b.berat_sepuh,\n        0\n      ),\n      total_qty_rusak: getItem(\"data_terima_barang_sepuh\").reduce(\n        (a, b) => a + b.qty_rusak,\n        0\n      ),\n      total_berat_rusak: getItem(\"data_terima_barang_sepuh\").reduce(\n        (a, b) => a + b.berat_rusak,\n        0\n      ),\n      total_qty_terima: getItem(\"data_terima_barang_sepuh\").reduce(\n        (a, b) => a + b.qty_terima,\n        0\n      ),\n      total_berat_terima: getItem(\"data_terima_barang_sepuh\").reduce(\n        (a, b) => a + b.berat_terima,\n        0\n      ),\n      total_berat_timbang: getItem(\"data_terima_barang_sepuh\").reduce(\n        (a, b) => a + b.berat_sepuh,\n        0\n      ),\n    };\n  \n    postDataNoTImeOut2(\"terima-sepuh\", hasil)\n      .then((res) => {\n        console.log(res.data);\n        ToastNotification(\"success\", res.data.message);\n        setItem(\"data_terima_barang_sepuh\",[])\n        this.setState({\n          isLoading: false,\n        });\n        this.props.dispatch(reset(\"HeadTerimaSepuh\"))\n        let datasepuh = [];\nlet nama = \"\";\nfor (let IndexAwal = 0; IndexAwal < 3; IndexAwal++) {\nif(IndexAwal===0){\n  nama = \"INTERNAL\"\n}else if(IndexAwal===1){\n  nama = \"LABEL\"\n}else{\n  nama = \"TUKANG\"\n}\nlet feedback = '';\nfeedback += `========================================\\n`\nfeedback += `            TERIMA SEPUHAN              \\n`\nfeedback += `                ${nama}                \\n`\nfeedback += `========================================\nNo Sepuh         : ${res.data.buktiSlip.no_sepuh}\nNo Terima Sepuh  : ${res.data.buktiSlip.no_terima_sepuh}\nTgl Terima       : ${res.data.buktiSlip.tgl_terima}`\nres.data.buktiSlip.jenis.forEach((row, index) => {\nfeedback += `\\n========================================`\nrow.baki.forEach((baki, index) => {\nif(index > 0){\nfeedback += `\n                 : ${baki}`\n}else{\nfeedback += `\nKode Baki        : ${baki}`\n}\n})\nfeedback += `\nKode Jenis       : ${row.jenis}`\nfeedback += `\nBerat Rusak      : ${row.berat_rusak}`\nfeedback += `\nBerat Sepuh      : ${row.berat_sepuh}`\nfeedback += `\nBerat Terima     : ${row.berat_terima}`\nfeedback += `\nQty Rusak        : ${row.qty_rusak}`\nfeedback += `\nQty Sepuh        : ${row.qty_sepuh}`\nfeedback += `\nQty Terima       : ${row.qty_terima}`\n})\nfeedback += `\\n========================================`\nfeedback += `\nTotal Qty SP     : ${res.data.buktiSlip.jenis.reduce((a,b)=>a+b.qty_sepuh,0)}\nTotal Berat SP   : ${res.data.buktiSlip.jenis.reduce((a,b)=>a+b.berat_sepuh,0)}\n`\nfeedback += `========================================\\n`\nfeedback += `              TERIMA KASIH              \\n`\nfeedback += `========================================`\nfeedback += `\n\n\n\n\n\n\n\u001dVA\\n`;\ndatasepuh.push(feedback);\n}\n// console.log(datasepuh);\ndocument.getElementById(\"myInput\").value = datasepuh.join('');\n      }).then(()=>{\nconst element = document.createElement(\"a\");\nconst file = new Blob([document.getElementById(\"myInput\").value], {\ntype: \"text/plain;charset=utf-8\",\n});\nelement.href = URL.createObjectURL(file);\nelement.download = \"autoprint_pembelian.txt\";\ndocument.body.appendChild(element);\nelement.click();\n\n      })\n      .catch((err) => {\n        console.log(err);\n        ToastNotification(\"info\", err.response?.data.message || \"Terjadi Kesalahan Saat Request Data\");\n        this.setState({\n          isLoading: false,\n        });\n      });\n  }\n  render() {\n    return (\n      <div>\n         <textarea\n            style={{ display: \"none\" }}\n            id=\"myInput\"\n            rows=\"100\"\n            cols=\"100\"\n          />\n        <ol className=\"breadcrumb float-xl-right\">\n          <li className=\"breadcrumb-item\">\n            <Link to=\"#\">Sepuhan</Link>\n          </li>\n          <li className=\"breadcrumb-item active\">\n            Terima Sepuhan\n          </li>\n        </ol>\n        <h1 className=\"page-header\">Terima Sepuhan </h1>\n        <Panel>\n          <PanelHeader>Terima Sepuhan</PanelHeader>\n          <PanelBody>\n            <HeadTerimaSepuh\n              isLoading={this.state.isLoading}\n              onSubmit={(data) => this.handleSubmit(data)}\n            />\n          </PanelBody>\n        </Panel>\n      </div>\n    );\n  }\n}\n\nTerimaBarangSepuh = reduxForm({\n  form: \"TerimaBarangSepuh\",\n  enableReinitialize: true,\n})(TerimaBarangSepuh);\nexport default connect()(TerimaBarangSepuh);\n"],"sourceRoot":""}