{"version":3,"sources":["pages/Barang/HancurDataBarang/HeadaHancurDataBarang.jsx","Validasi/Barang/PindahBarang/ValidasiPindahBarang.jsx"],"names":["HeadaHancurDataBarang","props","_this","Object","C_Users_Octavian_OneDrive_Documents_GitHub_tokopusatkresno_baru_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_super","call","state","date","Date","isLoadingBatal","isLoading","kondisi_barang","dispatch","getDataKondisiBarang","e","_this2","delay","clearTimeout","setTimeout","setState","getData","then","res","data","length","ToastNotification","change","forEach","list","index","no_pesanan","kode_barcode","kode_group","kode_dept","nama_barang","nama_atribut","berat","cek","JSON","parse","localStorage","getItem","findIndex","hasil","push","setItem","stringify","setHancurBarang","catch","err","response","_this3","_this4","react__WEBPACK_IMPORTED_MODULE_4___default","a","createElement","onSubmit","handleSubmit","autoComplete","onKeyPress","key","preventDefault","className","redux_form__WEBPACK_IMPORTED_MODULE_6__","label","name","onChange","options","datakondisi","filter","undefined","map","value","placeholder","component","ReanderSelect","getKodeBarcode","target","ReanderField","type","_components_helpers_tabel__WEBPACK_IMPORTED_MODULE_12__","keyField","pagination","exportCsv","columns","empty","textEmpty","disabled","Fragment","onClick","batalHancur","react_fullscreen_loading__WEBPACK_IMPORTED_MODULE_15___default","loading","background","loaderColor","Component","reduxForm","form","enableReinitialize","validate","ValidasiPindahBarang","connect","datamaster","databarang","errors","kode_gudang","kode_baki","statusAktif"],"mappings":"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","file":"static/js/22.9b51c649.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Field, reduxForm } from \"redux-form\";\r\nimport { setHancurBarang } from \"../../../actions/databarang_action\";\r\nimport { getDataKondisiBarang } from \"../../../actions/datamaster_action\";\r\nimport { ReanderSelect, ReanderField } from \"../../../components/helpers/field\";\r\nimport { ToastNotification } from \"../../../components/helpers/notification\";\r\nimport Tabel from \"../../../components/helpers/tabel\";\r\nimport { getData } from \"../../../config/axios\";\r\nimport ValidasiPindahBarang from \"../../../Validasi/Barang/PindahBarang/ValidasiPindahBarang\";\r\nimport Loading from 'react-fullscreen-loading';\r\nconst maptostate = (state) => {\r\n  return {\r\n    datakondisi: state.datamaster.getDataKondisiBarang,\r\n    setHancurBarang: state.databarang.setHancurBarang,\r\n  };\r\n};\r\nclass HeadaHancurDataBarang extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      date: new Date(),\r\n      isLoadingBatal: false,\r\n      isLoading: false,\r\n      kondisi_barang: \"kosong\",\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.props.dispatch(getDataKondisiBarang());\r\n  }\r\n  getKodeBarcode(e) {\r\n    if(this.delay){\r\n      clearTimeout(this.delay)\r\n    }\r\n    \r\n    this.delay = setTimeout(() => {\r\n      this.setState({\r\n        isLoading : true\r\n      })\r\n      if(e === \"\"){\r\n        return false;\r\n      }\r\n      getData(\"barang/open/kode-barcode?kode_barcode=\" + e)\r\n        .then((res) => {\r\n          if (res.data.length === 0) {\r\n            ToastNotification(\"info\", \"Data Yang Dicari Tidak Ada\");\r\n          } else {\r\n            this.setState({\r\n              isLoading : false\r\n            })\r\n            if (this.state.kondisi_barang ===\"kosong\") {\r\n                ToastNotification(\"info\", \"Kondisi Barang Harus Dipilih\");\r\n                this.props.change(\"kode_barcode\", \"\");\r\n            } else {\r\n              res.data.forEach((list, index) => {\r\n                let data = {\r\n                  no_pesanan: list.no_pesanan,\r\n                  kode_barcode: list.kode_barcode,\r\n                  kode_group: list.kode_group,\r\n                  kode_dept: list.kode_dept,\r\n                  nama_barang: list.nama_barang,\r\n                  nama_atribut: list.nama_atribut,\r\n                  berat: list.berat,\r\n                  kondisi_barang: this.state.kondisi_barang,\r\n                };\r\n                //   console.log(data);\r\n                let cek =\r\n                  JSON.parse(localStorage.getItem(\"data_barang_hancur_tmp\")) ||\r\n                  [];\r\n                let hasil_cek = cek.findIndex(\r\n                  (hasil) => hasil.kode_barcode === e\r\n                );\r\n                //   console.log(index);\r\n                if (hasil_cek === -1) {\r\n                  cek.push(data);\r\n                  localStorage.setItem(\r\n                    \"data_barang_hancur_tmp\",\r\n                    JSON.stringify(cek)\r\n                  );\r\n                    this.props.dispatch(setHancurBarang(cek));\r\n                   this.props.change(\"kode_barcode\", \"\");\r\n                }\r\n              });\r\n            }\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          this.setState({\r\n            isLoading : false\r\n          })\r\n          ToastNotification(\"info\", err.response && err.response.data);\r\n        });\r\n    }, 1500);\r\n  }\r\n\r\n  batalHancur() {\r\n    this.setState({ isLoadingBatal: true })\r\n    setTimeout(() => {\r\n      this.setState({ isLoadingBatal: false })\r\n      localStorage.setItem('data_barang_hancur_tmp', JSON.stringify([]))\r\n      this.props.dispatch(setHancurBarang([]));\r\n    }, 500);\r\n  }\r\n  render() {\r\n    return (\r\n      <form onSubmit={this.props.handleSubmit} autoComplete=\"off\"\r\n      onKeyPress={(e) => {\r\n        e.key === \"Enter\" && e.preventDefault();\r\n      }}\r\n      >\r\n        <div className=\"row\">\r\n          <div className=\"col-lg-6\">\r\n            <Field\r\n              label=\"Kondisi Barang\"\r\n              name=\"kondisi_barang\"\r\n              onChange={(e) => {\r\n                this.setState({ kondisi_barang: e });\r\n              }}\r\n              options={this.props.datakondisi\r\n                .filter((list) => list.kondisi_barang !== undefined)\r\n                .map((list) => {\r\n                  let data = {\r\n                    value: list.kondisi_barang,\r\n                    name: list.kondisi_barang,\r\n                  };\r\n                  return data;\r\n                })}\r\n              placeholder={\"Silahkan Pilih Kondisi Barang\"}\r\n              component={ReanderSelect}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"col-lg-6\">\r\n            <Field\r\n              onChange={(e) => this.getKodeBarcode(e.target.value)}\r\n              name=\"kode_barcode\"\r\n              component={ReanderField}\r\n              type=\"text\"\r\n              label=\"Kode Barcode\"\r\n              placeholder=\"Masukan Kode Barcode\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <Tabel\r\n          keyField=\"kode_barcode\"\r\n          pagination=\"off\"\r\n          exportCsv={false}\r\n          data={\r\n            this.props.setHancurBarang.length === 0\r\n              ? JSON.parse(localStorage.getItem(\"data_barang_hancur_tmp\"))\r\n              : this.props.setHancurBarang\r\n          }\r\n          columns={this.props.columns}\r\n          empty={true}\r\n          textEmpty=\"Data Barang Kosong\"\r\n        />\r\n        <div className=\"row\">\r\n          <div className=\"col-10\">\r\n            <button\r\n              className=\"btn btn-primary\"\r\n              type=\"submit\"\r\n              disabled={this.props.isLoading}\r\n            >\r\n              {this.props.isLoading ? (\r\n                <>\r\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Sedang\r\n                  Menyimpan\r\n                </>\r\n              ) : (\r\n                \"Simpan Data\"\r\n              )}\r\n            </button>\r\n            &nbsp;\r\n            <button\r\n              className=\"btn btn-warning\"\r\n              type=\"button\"\r\n              onClick={()=>this.batalHancur()}\r\n              disabled={this.props.isLoading}\r\n            >\r\n              {this.state.isLoadingBatal ? (\r\n                <>\r\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Sedang\r\n                  Membatal\r\n                </>\r\n              ) : (\r\n                \"Batal\"\r\n              )}\r\n            </button>\r\n          </div>\r\n          {/* <div className=\"2\">\r\n            {JSON.parse(localStorage.getItem(\"data_barang_hancur_tmp\")) ===\r\n            null ? null : (\r\n              <>\r\n                Total Barang :{\" \"}\r\n                {this.props.setHancurBarang.length === 0\r\n                  ? JSON.parse(localStorage.getItem(\"data_barang_hancur_tmp\"))\r\n                      .length || 0\r\n                  : this.props.setHancurBarang.length || 0}\r\n                <br />\r\n                Total Berat :\r\n                {this.props.setHancurBarang.length === 0\r\n                  ? JSON.parse(localStorage.getItem(\"data_barang_hancur_tmp\"))\r\n                      .map((column, key) => column.berat)\r\n                      .reduce((a, b) => a + b, 0)\r\n                      .toFixed(1)\r\n                  : this.props.setHancurBarang\r\n                      .map((column, key) => column.berat)\r\n                      .reduce((a, b) => a + b, 0)\r\n                      .toFixed(1)}\r\n              </>\r\n            )}\r\n          </div> */}\r\n        </div>\r\n        {this.props.isLoading || this.state.isLoading ? (\r\n        <Loading \r\n        loading\r\n        background=\"rgba(0, 0, 0, 0.35)\"\r\n         loaderColor=\"rgba(94, 147, 117, 1)\" />\r\n      ) : null}\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nHeadaHancurDataBarang = reduxForm({\r\n  form: \"HeadaHancurDataBarang\",\r\n  enableReinitialize: true,\r\n  validate: ValidasiPindahBarang,\r\n})(HeadaHancurDataBarang);\r\nexport default connect(maptostate, null)(HeadaHancurDataBarang);\r\n","const ValidasiPindahBarang = (value) => {\r\n    const errors = {};\r\n    if (!value.kode_gudang) {\r\n        errors.kode_gudang = \"Kode Gudang Tidak Boleh Kosong\";\r\n    }\r\n    if (!value.kode_baki) {\r\n        errors.kode_baki = \"Nama Baki Tidak Boleh Kosong\";\r\n    }\r\n\r\n    if (!value.statusAktif) {\r\n        errors.statusAktif = \"Status Tidak Boleh Kosong\";\r\n    }\r\n\r\n    return errors;\r\n}\r\nexport default ValidasiPindahBarang;\r\n\r\n\r\n"],"sourceRoot":""}