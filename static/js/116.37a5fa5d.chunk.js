(window.webpackJsonp=window.webpackJsonp||[]).push([[116],{1290:function(e,a,t){"use strict";t.r(a);var n=t(8),r=t(9),i=t(15),l=t(11),o=t(10),s=t(1),m=t.n(s),c=t(32),d=t(63),u=t(30),p=t(320),g=t(321),b=t(21),h=t(5),k=t(54),E=t(67),f=t.n(E),A=t(7),N=t(52),v=function(e){Object(l.a)(t,e);var a=Object(o.a)(t);function t(e){var r;return Object(n.a)(this,t),(r=a.call(this,e)).state={date:new Date,kondisi_barang:"kosong",isLoadingBatal:!1},r}return Object(r.a)(t,[{key:"setStartDate",value:function(e){this.setState({tgl_awal:new Date(e)})}},{key:"setLastDate",value:function(e){this.setState({tgl_akhir:new Date(e)})}},{key:"componentDidMount",value:function(){this.props.dispatch(Object(A.z)()),this.props.dispatch(Object(A.Kb)()),this.props.change("type_pencarian","BARU"),setTimeout(function(){document.getElementById("kode_member").focus()},100),this.props.change("kategori","ALL"),this.props.change("toko","ALL")}},{key:"render",value:function(){var e=this,a=[{value:"ALL",name:"SEMUA"}];this.props.GetDataGroup.forEach(function(e){var t={value:e.kode_group,name:e.kode_group};a.push(t)});var t=[{value:"ALL",name:"SEMUA"}];return this.props.getMasterToko.forEach(function(e){var a={value:e.kode_toko,name:e.kode_toko};t.push(a)}),m.a.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off"},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-8"},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-lg-6"},m.a.createElement(p.a,{onChange:function(a){return e.props.getKodeMember(a.target.value)},id:"kode_member",name:"kode_member",component:b.e,type:"text",label:"Kode Member",placeholder:"Masukan Kode Member"})),m.a.createElement("div",{className:"col-lg-6"},m.a.createElement(p.a,{id:"lihat_transaksi_nama_member",name:"nama_member",readOnly:!0,component:b.e,type:"text",label:"Nama Member",placeholder:"Masukan Nama Member"})))),m.a.createElement("div",{className:"col-4 text-center"},m.a.createElement(m.a.Fragment,null," \xa0 "),m.a.createElement("h1",{style:"POINT"===this.props.point?{fontSize:"4.875rem",position:"absolute",left:"90px",top:"100px"}:{fontSize:"4.875rem",position:"absolute",left:"150px",top:"100px"}}," ",this.props.point," ")),m.a.createElement("div",{className:"col-8"},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-lg-6"},m.a.createElement(p.a,{id:"lihat_transaksi_alamat",name:"alamat",readOnly:!0,component:b.e,type:"text",label:"Alamat",placeholder:"Masukan Alamat"})),m.a.createElement("div",{className:"col-lg-6"},m.a.createElement(p.a,{id:"lihat_transaksi_no_hp",name:"no_hp",readOnly:!0,component:b.e,type:"text",label:"No Hp",placeholder:"Masukan No Hp"})),m.a.createElement("div",{className:"col-lg-6"},m.a.createElement(p.a,{name:"dari_tanggal",component:b.c,type:"text",selected:this.state.tgl_awal,onChange:function(a){return e.setStartDate(a)},label:"Dari Tanggal",placeholder:"Masukan Dari Tanggal"})),m.a.createElement("div",{className:"col-lg-6"},m.a.createElement(p.a,{name:"sampai_tanggal",component:b.c,type:"text",selected:this.state.tgl_akhir,onChange:function(a){return e.setLastDate(a)},label:"Sampai Tanggal",placeholder:"Masukan Sampai Tanggal"})),m.a.createElement("div",{className:"col-lg-6"},m.a.createElement(p.a,{name:"berat_awal",component:b.e,type:"text",normalize:N.a,label:"Berat Awal",placeholder:"Masukan Berat Awal"})),m.a.createElement("div",{className:"col-lg-6"},m.a.createElement(p.a,{name:"berat_akhir",component:b.e,type:"text",normalize:N.a,label:"Berat Akhir",placeholder:"Masukan Berat Akhir"})))),m.a.createElement("div",{className:"col-4 text-center"}),m.a.createElement("div",{className:"col-lg-2"},m.a.createElement(p.a,{name:"kategori",component:b.f,type:"text",options:[{name:"SEMUA",value:"ALL"},{name:"PENJUALAN",value:"PENJUALAN"},{name:"PEMBELIAN UMUM",value:"PEMBELIAN UMUM"},{name:"PESANAN",value:"PESANAN"},{name:"PESANAN SERAH",value:"PESANAN SERAH"},{name:"PESANAN TAMBAH",value:"PESANAN TAMBAH"},{name:"PINJAMAN",value:"PINJAMAN"},{name:"PINJAMAN LUNAS",value:"PINJAMAN LUNAS"},{name:"SERVICE",value:"SERVICE"},{name:"SERVICE AMBIL",value:"SERVICE AMBIL"},{name:"TUKAR POINT",value:"TUKAR POINT"},{name:"TAMBAH POIN MANUAL",value:"TAMBAH POIN MANUAL"},{name:"AMBIL POIN MANUAL",value:"AMBIL POIN MANUAL"}],label:"Kategori",placeholder:"Masukan Kategori"})),m.a.createElement("div",{className:"col-lg-2"},m.a.createElement(p.a,{name:"toko",component:b.f,type:"text",options:t,label:"Toko",placeholder:"Masukan Toko"})),m.a.createElement("div",{className:"col-lg-4"},m.a.createElement(p.a,{name:"type_pencarian",component:b.f,type:"text",options:[{name:"LAMA",value:"LAMA"},{name:"BARU",value:"BARU"}],label:"Pilih Transaksi",placeholder:"Pilih Transaksi"})),m.a.createElement("div",{className:"col-lg-4"},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-lg-6"},m.a.createElement("label",null,"\xa0"),m.a.createElement("button",{type:"submit",value:"PDF",name:"type_btn",className:"btn btn-primary btn-block"},this.props.isLoading?m.a.createElement(m.a.Fragment,null,m.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Lihat"):"Lihat")),m.a.createElement("div",{className:"col-lg-6"},m.a.createElement("label",null,"\xa0"),m.a.createElement("button",{type:"button",onClick:this.props.batalLihatTransaksi,className:"btn btn-warning btn-block"},this.props.isLoadingBatal?m.a.createElement(m.a.Fragment,null,m.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Batal"):"Batal")))),m.a.createElement("div",{className:"col-12"},m.a.createElement(k.a,{keyField:"no_trx",exportCsv:!0,data:this.props.datatransaksimember,columns:this.props.columns,empty:!0,textEmpty:"Data Transaksi Member Kosong"}))),this.props.isLoadingBatal||this.props.isLoading?m.a.createElement(f.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}]),t}(s.Component);v=Object(g.a)({form:"HeadTransaksiMember",enableReinitialize:!0})(v);var _=Object(u.b)(function(e){return{initialValues:{dari_tanggal:Object(h.j)(),sampai_tanggal:Object(h.j)()},getMasterToko:e.datamaster.getMasterToko,GetDataGroup:e.datamaster.GetDataGroup,datakondisi:e.datamaster.getDataKondisiBarang,setHancurBarang:e.databarang.setHancurBarang}},null)(v),L=t(25),M=t(224),x=t(18),S=t(43),y=function(e){Object(l.a)(t,e);var a=Object(o.a)(t);function t(e){var r;return Object(n.a)(this,t),(r=a.call(this,e)).state={isLoading:!1,isLoadingBatal:!1,point:"POINT",datatransaksimember:[],columns:[{dataField:"tgl_trx",text:"Tanggal Trx",headerStyle:function(e,a){return{width:"100px"}}},{dataField:"kategori",text:"Kategori"},{dataField:"deskripsi",text:"Deskripsi"},{dataField:"berat",text:"Berat",headerStyle:function(e,a){return{width:"100px",textAlign:"right"}},formatter:function(e){return m.a.createElement("div",{className:"text-right"},parseFloat(e||0).toFixed(3))}},{dataField:"jumlah_rp",text:"Jumlah Rp",headerStyle:function(e,a){return{width:"100px",textAlign:"right"}},headerClasses:"text-right",formatter:function(e){return m.a.createElement("div",{className:"text-right"},parseFloat(e||0).toLocaleString("kr-KO"))}},{dataField:"poin_awal",text:"Poin Awal",headerStyle:function(e,a){return{width:"100px",textAlign:"right"}},formatter:function(e,a){return m.a.createElement("div",{className:"text-right"}," ",e||0," ")}},{dataField:"poin",text:"Poin",headerStyle:function(e,a){return{width:"100px",textAlign:"right"}},formatter:function(e,a){return m.a.createElement("div",{className:"text-right"}," ",e||0," ")}},{dataField:"poin_akhir",text:"Poin Akhir",headerStyle:function(e,a){return{width:"100px",textAlign:"right"}},formatter:function(e,a){return m.a.createElement("div",{className:"text-right"}," ",e||0," ")}}]},r.handleSubmit=r.handleSubmit.bind(Object(i.a)(r)),r}return Object(r.a)(t,[{key:"batalLihatTransaksi",value:function(){var e=this;this.setState({isLoadingBatal:!0}),setTimeout(function(){e.setState({isLoadingBatal:!1,datatransaksimember:[]}),e.props.dispatch(Object(S.d)("HeadTransaksiMember"))},1e3)}},{key:"getKodeMember",value:function(e){var a=this;this.delayTimer&&clearTimeout(this.delayTimer),this.delayTimer=setTimeout(function(){if(void 0===e)return!1;a.setState({isLoading:!0}),Object(x.d)("member/get/by-kode-member/"+e).then(function(e){a.setState({isLoading:!1}),e.data.forEach(function(e,t){document.getElementById("lihat_transaksi_nama_member").value=e.nama_customer,document.getElementById("lihat_transaksi_alamat").value=e.alamat_customer,document.getElementById("lihat_transaksi_no_hp").value=e.no_hp,a.setState({datatransaksimember:[],point:e.point||0,isLoading:!1})})}).catch(function(e){Object(L.e)("info","Data member tidak ada"),a.setState({datatransaksimember:[],isLoading:!1})})},1500)}},{key:"handleSubmit",value:function(e){var a=this;this.setState({isLoading:!0});var t={kode_member:e.kode_member,kode_group:e.kategori,kode_lokasi_gudang:e.toko,berat_awal:parseFloat(e.berat_awal||0),berat_akhir:parseFloat(e.berat_akhir||0),tgl_awal:Object(h.f)(M(new Date(e.dari_tanggal)).format("YYYY-MM-DD")),tgl_akhir:Object(h.f)(M(new Date(e.sampai_tanggal)).format("YYYY-MM-DD"))};"BARU"===e.type_pencarian?Object(x.h)("trxmember/get/by-tanggal",t).then(function(e){0===e.data.length?(Object(L.e)("info","Data Yang Di Cari Tidak Ada !!!"),a.setState({isLoading:!1,export:!1})):(Object(L.e)("success","Laporan Transaksi Member Tersedia"),Object(h.o)("tgl_laporan",JSON.stringify(t)),a.setState({export:!0,isLoading:!1,datatransaksimember:e.data}))}).catch(function(e){Object(L.e)("info","Data Yang Di Cari Tidak Ada !!!"),a.setState({isLoading:!1,export:!1})}):Object(x.f)("trxmember/reports/data-lama?tgl_from=".concat(t.tgl_awal,"&tgl_to=").concat(t.tgl_akhir,"&kode_member=").concat(t.kode_member,"&kode_group=").concat(t.kode_group,"&kode_lokasi_gudang=").concat(t.kode_lokasi_gudang,"&berat_awal=").concat(t.berat_awal,"&berat_akhir=").concat(t.berat_akhir)).then(function(e){0===e.data.length?(Object(L.e)("info","Data Yang Di Cari Tidak Ada !!!"),a.setState({isLoading:!1,export:!1,datatransaksimember:[]})):(Object(L.e)("success","Laporan Transaksi Member Tersedia"),Object(h.o)("tgl_laporan",JSON.stringify(t)),a.setState({datatransaksimember:[]}),a.setState({export:!0,isLoading:!1,datatransaksimember:e.data}))}).catch(function(e){Object(L.e)("info","Data Yang Di Cari Tidak Ada !!!"),a.setState({isLoading:!1,export:!1,datatransaksimember:[]})})}},{key:"render",value:function(){var e=this;return m.a.createElement("div",null,m.a.createElement("ol",{className:"breadcrumb float-xl-right"},m.a.createElement("li",{className:"breadcrumb-item"},m.a.createElement(c.b,{to:"#"},"Member")),m.a.createElement("li",{className:"breadcrumb-item active"},"Lihat Transaksi Member")),m.a.createElement("h1",{className:"page-header"},"Lihat Transaksi Member "),m.a.createElement(d.a,null,m.a.createElement(d.c,null,"Lihat Transaksi Member"),m.a.createElement("br",null),m.a.createElement("div",{className:"container"},m.a.createElement(_,{getKodeMember:function(a){return e.getKodeMember(a)},batalLihatTransaksi:function(){return e.batalLihatTransaksi()},onSubmit:function(a){return e.handleSubmit(a)},columns:this.state.columns,isLoading:this.state.isLoading,point:this.state.point,isLoadingBatal:this.state.isLoadingBatal,datatransaksimember:this.state.datatransaksimember}),m.a.createElement("br",null)),m.a.createElement("br",null)),this.state.isLoadingBatal||this.state.isLoading?m.a.createElement(f.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}]),t}(m.a.Component);y=Object(g.a)({form:"LihatTransaksiMember",enableReinitialize:!0})(y);a.default=Object(u.b)(null)(y)}}]);
//# sourceMappingURL=116.37a5fa5d.chunk.js.map