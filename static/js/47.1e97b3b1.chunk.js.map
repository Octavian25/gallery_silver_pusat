{"version":3,"sources":["pages/Barang/TambahBarang/ModalPesanan.jsx","pages/Barang/TambahBarang/TambahBarang.jsx"],"names":["ModalPesanan","props","_this","Object","classCallCheck","this","_super","call","state","setTimeout","document","getElementById","focus","_this2","react_default","a","createElement","Fragment","htmlFor","className","type","id","placeholder","aria-label","aria-describedby","onClick","getNomorPesanan","isLoadingPesanan","Component","reduxForm","form","enableReinitialize","connect","setCamera","databarang","hideModal","datamaster","modalDialog","TambahBarang","showBarangPesanan","setState","fromModalPesanan","formTambahBarang","dispatch","showModal","showModalPesanan","isEdit","isLoading","formEdit","loadingData","dataPesanan","noPesanan","columns","dataField","text","sort","csvExport","headerClasses","formatter","rowcontent","row","library","showModalDuplikatBarang","handleSubmit","bind","assertThisInitialized","showModalTambahBarang","tambahbarang","localStorage","removeItem","data","kode_baki","kode_lokasi_toko","split","data_post","no_kirim_bos","kode_baki_label","qty_input","id_barang_pesanan","kode_group","kode_kategori","kode_dept","kode_jenis","kode_gudang","kode_toko","susut_tukang","parseFloat","kode_intern","nama_barang","berat","berat_asli","status_pesanan","tipe_barang","kadar_modal","kadar","berat_cad","berat_susut","tujuan","kadar_cetak","toString","nama_atribut","berat_atribut","berat_plastik","harga_atribut","parseInt","tag_id","berat_bandrol","no_pesanan","postDataNoTImeOut2","then","res","file","undefined","foto","dataURLtoFile","postImage","kode_barcode","catch","err","ToastNotification","getData","length","reset","_err$response","_err$response$data","response","message","_this3","dataEdit","dataimage","console","log","setItem","showEditBarang","_this4","saveImage","hasil","postData","error","nomor_pesanan","_this5","postData2","value","trim","detail_barang","map","detail","attribut","perkiraan_kadar","estimasi","sub_total","keterangan","ongkos","perkiraan_berat","status","_this6","expandRow","renderer","stock_on_hand","showExpandColumn","expandByColumnOnly","to","keyField","exportCsv","handleClick","tambahData","btnText","empty","textEmpty","size","title","content","Module","onSubmit","TambahBarang_ModalPesanan","no","React"],"mappings":"8MAYMA,oDACJ,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACjBE,EAAAI,EAAAC,KAAAF,KAAMJ,IACDO,MAAQ,GAFIN,kEAKjBO,WAAW,WACTC,SAASC,eAAe,iBAAiBC,SACxC,sCAEI,IAAAC,EAAAR,KACP,OACES,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KAEIH,EAAAC,EAAAC,cAAA,SAAOE,QAAQ,IAAf,yBACAJ,EAAAC,EAAAC,cAAA,OAAKG,UAAU,oBACbL,EAAAC,EAAAC,cAAA,SACEI,KAAK,OACPC,GAAG,gBACDF,UAAU,eACVG,YAAY,gBACZC,aAAW,gBACXC,mBAAiB,iBAEnBV,EAAAC,EAAAC,cAAA,OAAKG,UAAU,sBACbL,EAAAC,EAAAC,cAAA,UACEG,UAAU,kBACVC,KAAK,SACLK,QAAS,kBACPZ,EAAKZ,MAAMyB,gBACThB,SAASC,eAAe,oBAI3BN,KAAKJ,MAAM0B,iBACVb,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAA,KAAGG,UAAU,2BADf,gBAIA,oBAvCSS,aA+D3B5B,EAAe6B,YAAU,CACvBC,KAAM,eACNC,oBAAoB,GAFPF,CAGZ7B,GACYgC,kBA1EI,SAACxB,GAClB,MAAO,CACLyB,UAAWzB,EAAM0B,WAAWD,UAC5BE,UAAW3B,EAAM4B,WAAWC,cAuEG,KAApBL,CAA0BhC,UC9CnCsC,oDACJ,SAAAA,EAAYrC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAiC,IACjBpC,EAAAI,EAAAC,KAAAF,KAAMJ,IAwORsC,kBAAoB,WAClBrC,EAAKsC,SAAS,CACZC,kBAAkB,EAClBC,kBAAkB,IAEpBxC,EAAKD,MAAM0C,SAASC,gBACpB1C,EAAKD,MAAM0C,SAASE,gBA7OpB3C,EAAKM,MAAQ,CACXsC,QAAQ,EACRT,aAAa,EACbU,WAAW,EACXC,UAAU,EACVC,aAAa,EACbf,WAAY,GACZgB,YAAa,GACbR,kBAAkB,EAClBD,kBAAkB,EAClBd,kBAAkB,EAClBwB,UAAW,GACXC,QAAS,CAMP,CACEC,UAAW,eACXC,KAAM,eACNC,MAAM,GAER,CACEF,UAAW,aACXC,KAAM,cAER,CACED,UAAW,YACXC,KAAM,aAER,CACED,UAAW,YACXC,KAAM,cAER,CACED,UAAW,cACXC,KAAM,eAER,CACED,UAAW,QACXC,KAAM,SAER,CACED,UAAW,SACXC,KAAM,SACNE,WAAW,EACXC,cAAe,cACfC,UAAW,SAACC,EAAYC,GAEtB,OACEC,EAAA,EAAA7C,cAAA,OAAKG,UAAU,mBACb0C,EAAA,EAAA7C,cAAA,OAAKG,UAAU,UACb0C,EAAA,EAAA7C,cAAA,UACEI,KAAK,SACLK,QAAS,kBAAMvB,EAAK4D,wBAAwBF,IAC5CzC,UAAU,wBAEV0C,EAAA,EAAA7C,cAAA,KAAGG,UAAU,sBAS7BjB,EAAK6D,aAAe7D,EAAK6D,aAAaC,KAAlB7D,OAAA8D,EAAA,EAAA9D,CAAAD,IACpBA,EAAKgE,sBAAwBhE,EAAKgE,sBAAsBF,KAA3B7D,OAAA8D,EAAA,EAAA9D,CAAAD,IAC7BA,EAAKiE,aAAejE,EAAKiE,aAAaH,KAAlB7D,OAAA8D,EAAA,EAAA9D,CAAAD,IAvEHA,kEA4EjBkE,aAAaC,WAAW,8DAUbC,GAAM,IAAAzD,EAAAR,KACjBA,KAAKmC,SAAS,CAAEO,WAAW,IAI3B,IAAIwB,EAAYD,EAAKE,iBAAiBC,MAAM,KACxCC,EAAY,CACdC,aAAc,IACdC,gBAAiB,IACjBC,UAAW,EACXC,kBAAmB,IACnBC,WAAYT,EAAKU,cACjBC,UAAWX,EAAKY,WAChBC,YAAab,EAAKa,YAClBC,UAAWb,EAAU,GACrBc,aAAcC,WAAWhB,EAAKe,cAC9BE,YAAajB,EAAKiB,aAAe,IACjCC,YAAalB,EAAKkB,YAClBC,MAAOH,WAAWhB,EAAKmB,OACvBC,WAAoC,YAAxBpB,EAAKqB,eAA+BL,WAAWhB,EAAKmB,OAASH,WAAWhB,EAAKoB,aAAe,EAExGE,YAActB,EAAKsB,YACnBC,YAAaP,WAAWhB,EAAKuB,cAAgB,EAC7CC,MAAOR,WAAWhB,EAAKwB,OACvBC,UAAWT,WAAWhB,EAAKyB,WAC3BC,YAAaV,WAAWhB,EAAK0B,aAC7BC,OAAQ3B,EAAK2B,OACbC,YAAa5B,EAAK4B,YAAYC,WAC9BC,aAAc9B,EAAK8B,cAAgB,IACnCC,cAAef,WAAWhB,EAAK+B,gBAAkB,EACjDC,cAAehB,WAAWhB,EAAKgC,gBAAkB,EACjDC,cAAeC,SAASlC,EAAKiC,gBAAkB,EAC/CE,OAAQ,IACRC,cAAe,EACfC,WAAYrC,EAAKqC,YAAc,KAGjClG,WAAW,WACTmG,YAAmB,uBAAwBlC,GACxCmC,KAAK,SAACC,GAEL,IAAMC,OAAqBC,IAAd1C,EAAK2C,KAAsBC,YAAc5C,EAAK2C,WAAQD,OACvDA,IAATD,GACDI,YAAUJ,EAAK,eAAezC,EAAK8C,cAAcP,KAAK,SAACC,MACpDO,MAAM,SAACC,GACRC,YAAkB,OAAQ,oDAG9BC,YAAQ,qCAAqClD,EAAKE,kBAC/CqC,KAAK,SAACC,GACmB,IAApBA,EAAIxC,KAAKmD,OACX5G,EAAK2B,SAAS,CAAEN,WAAY,KAE5BrB,EAAK2B,SAAS,CAAEN,WAAY4E,EAAIxC,OAElCzD,EAAK2B,SAAS,CAAEO,WAAW,MAE5BsE,MAAM,SAACC,GACNzG,EAAK2B,SAAS,CAAEO,WAAW,EAAOb,WAAY,KAC9CqF,YAAkB,OAAQ,0CAE9B1G,EAAKZ,MAAM0C,SAAS+E,aAAM,qBAC1B7G,EAAKZ,MAAM0C,SAASR,eACpBoF,YAAkB,UAAW,uCAE9BF,MAAM,SAACC,GAAQ,IAAAK,EAAAC,EACd/G,EAAK2B,SAAS,CAAEO,WAAW,IAC3BwE,YACE,QACA,QAAAI,EAAAL,EAAIO,gBAAJ,IAAAF,OAAA,UAAAC,EAAAD,EAAcrD,YAAd,IAAAsD,OAAA,EAAAA,EAAoBE,UAAW,6CAGpC,qDAGmBlE,GAAK,IAAAmE,EAAA1H,KAC3BmH,YAAQ,mCAAqC5D,EAAIwD,cAC9CP,KAAK,SAACC,GACL,IAAIkB,EAAW,CACbf,KAAMH,EAAIxC,KAAK2D,UACfb,aAAcxD,EAAIwD,aAClB5B,YAAa5B,EAAI4B,YACjBY,aAAcxC,EAAIwC,cAAgB,IAClCG,cAAe3C,EAAI2C,eAAiB,EACpChB,YAAa3B,EAAI2B,YACjBO,MAAOlC,EAAIkC,OAAS,EACpBI,YAAatC,EAAIsC,aAAe,EAChCL,YAAajC,EAAIiC,aAAe,EAChCb,cAAepB,EAAImB,WACnBG,WAAYtB,EAAIqB,UAChBT,iBAAkBZ,EAAIwB,UAAY,IAAMxB,EAAIuB,YAC5CM,MAAO7B,EAAI6B,MACXC,WAAY9B,EAAI8B,WAChBW,cAAezC,EAAIyC,eAAiB,EACpCC,cAAe1C,EAAI0C,eAAiB,EACpCG,OAAQ7C,EAAI6C,OACZC,cAAe,GAEjBwB,QAAQC,IAAIH,GACZI,aAAQ,sBAAuBJ,GAC/BD,EAAKvF,SAAS,CACZE,kBAAkB,IAEpBqF,EAAK9H,MAAM0C,SAASC,gBACpBmF,EAAK9H,MAAM0C,SAAS0F,YAAeL,MAEpCX,MAAM,SAACC,GACN,IAAIU,EAAW,CACbf,KAAM,IACNG,aAAcxD,EAAIwD,aAClB5B,YAAa5B,EAAI4B,YACjBY,aAAcxC,EAAIwC,cAAgB,IAClCG,cAAe3C,EAAI2C,eAAiB,EACpChB,YAAa3B,EAAI2B,YACjBO,MAAOlC,EAAIkC,OAAS,EACpBI,YAAatC,EAAIsC,aAAe,EAChCL,YAAajC,EAAIiC,aAAe,EAChCb,cAAepB,EAAImB,WACnBG,WAAYtB,EAAIqB,UAChBT,iBAAkBZ,EAAIwB,UAAY,IAAMxB,EAAIuB,YAC5CM,MAAO7B,EAAI6B,MACXC,WAAY9B,EAAI8B,WAChBW,cAAezC,EAAIyC,eAAiB,EACpCC,cAAe1C,EAAI0C,eAAiB,EACpCG,OAAQ7C,EAAI6C,OACZC,cAAe,GAEjB0B,aAAQ,sBAAuBJ,GAC/BD,EAAKvF,SAAS,CACZE,kBAAkB,IAEpBqF,EAAK9H,MAAM0C,SAASC,gBACpBmF,EAAK9H,MAAM0C,SAAS0F,YAAeL,oDAKnB1D,GAEpB8D,aAAQ,sBAAuB9D,GAC/BjE,KAAKmC,SAAS,CACZE,kBAAkB,IAEpBrC,KAAKJ,MAAM0C,SAASC,gBACpBvC,KAAKJ,MAAM0C,SAAS0F,YAAe/D,+CAanCkD,YAAQ,cAAgBnH,KAAKG,MAAM2C,WAChC0D,KAAK,SAACC,GAAD,OAASoB,QAAQC,IAAIrB,EAAIxC,QAC9B+C,MAAM,SAACC,GAAD,OAASC,YAAkB,OAAOD,EAAIO,SAASvD,6CAG7CA,GAAM,IAAAgE,EAAAjI,KACjBA,KAAKmC,SAAS,CAAEO,WAAW,IAC3B,IAAIwF,EAAY,CACdnB,aAAc9C,EAAK8C,aACnBa,UAAW3D,EAAK2C,MAGduB,EAAQ,CACVhD,YAAalB,EAAKkB,YAClBY,aAAc9B,EAAK8B,aACnBG,cAAejC,EAAKiC,cACpBhB,YAAajB,EAAKiB,YAClBO,MAAOxB,EAAKwB,MACZI,YAAa5B,EAAK4B,aAEpBuC,YAAS,eAAiBnE,EAAK8C,aAAcoB,GAC1C3B,KAAK,WACJyB,EAAKrI,MAAM0C,SAASR,iBAErB0E,KAAK,gBACcG,IAAd1C,EAAK2C,MAEPwB,YAAS,kBAAmBF,GACzB1B,KAAK,SAACC,MAGNO,MAAM,SAACqB,QAKb7B,KAAK,WACJyB,EAAK9F,SAAS,CAAEN,WAAY,KAC5BoG,EAAKrI,MAAM0C,SAAS+E,aAAM,uBAC1BY,EAAKrI,MAAM0C,SAASV,aAAU,MAE/B4E,KAAK,WACJU,YAAkB,UAAW,4BAE9BV,KAAK,WACJyB,EAAK9F,SAAS,CAAEO,WAAW,MAE5BsE,MAAM,SAACqB,GACNJ,EAAK9F,SAAS,CAAEO,WAAW,IAC3BwE,YAAkB,OAAQ,kEAIhBoB,GAAe,IAAAC,EAAAvI,KAC7BA,KAAKmC,SAAS,CACZb,kBAAkB,IAEpBkH,YAAU,mBAAoB,CAAElC,WAAYgC,EAAcG,MAAMC,SAC7DlC,KAAK,SAACC,GAEL8B,EAAKpG,SAAS,CACZb,kBAAkB,IAKpB,IAAIqG,EAAWlB,EAAIxC,KAAK0E,cAAcC,IAAI,SAACC,GAEvC,MAAO,CACL9B,aAAc8B,EAAO9B,aACrBhB,aAAc8C,EAAOC,UAAY,IACjC5C,cAAe2C,EAAO3C,eAAiB,EACvChB,YAAa,IACbF,aAAcyB,EAAIxC,KAAKe,cAAgB,EACvCS,MAAOoD,EAAOE,gBACdC,SAAUH,EAAOI,UACjB9D,YAAa0D,EAAOK,WACpBC,OAAQN,EAAOM,QAAU,EACzBxD,YAAakD,EAAOlD,aAAe,EACnCD,UAAWmD,EAAOnD,WAAa,EAC/BE,OAAQiD,EAAOjD,QAAU,IACzBC,YAAa,EACbL,YAAaqD,EAAOrD,aAAe,EACnCb,cAAekE,EAAOlE,cACtBE,WAAYgE,EAAOhE,YAAc,GACjCV,iBAAkB0E,EAAO9D,WAAa,GACtCK,MAAOyD,EAAOO,gBACd/D,WAAYwD,EAAOO,iBAAmB,EACtCpD,cAAe6C,EAAO7C,eAAiB,EACvCC,cAAe4C,EAAO5C,eAAiB,EACvCG,OAAQyC,EAAOzC,QAAU,IACzBC,cAAe,EACfC,WAAYgC,EAAcG,MAC1BY,OAAQ,aAIX,GAEHd,EAAK3I,MAAM0C,SAASC,gBACpBgG,EAAK3I,MAAM0C,SAAS0F,YAAeL,IACnCY,EAAKpG,SAAS,CACZE,kBAAkB,EAClBD,kBAAkB,MAIrB4E,MAAM,SAACC,GAENsB,EAAKpG,SAAS,CACZb,kBAAkB,IAEpB4F,YACE,YACiBP,IAAjBM,EAAIO,SACA,sCACAP,EAAIO,SAASvD,KAAKwD,4CAKrB,IAAA6B,EAAAtJ,KACDuJ,EAAY,CAChBC,SAAU,SAACjG,GAAD,OACRC,EAAA,EAAA7C,cAAA,OAAKG,UAAU,aACb0C,EAAA,EAAA7C,cAAA,OAAKG,UAAU,OACb0C,EAAA,EAAA7C,cAAA,OAAKG,UAAU,UAAf,kBACkByC,EAAIwC,aADtB,IACoCvC,EAAA,EAAA7C,cAAA,WADpC,mBAEmB4C,EAAIyC,cAFvB,IAEsCxC,EAAA,EAAA7C,cAAA,WAFtC,mBAGmB4C,EAAI0C,cAHvB,IAGsCzC,EAAA,EAAA7C,cAAA,WAHtC,mBAImB4C,EAAI2C,cAJvB,IAIsC1C,EAAA,EAAA7C,cAAA,WAJtC,iBAKiB4C,EAAI2B,YALrB,IAKkC1B,EAAA,EAAA7C,cAAA,WALlC,WAMW4C,EAAIkC,MANf,IAMsBjC,EAAA,EAAA7C,cAAA,WANtB,iBAOiB4C,EAAIsC,YAPrB,IAOkCrC,EAAA,EAAA7C,cAAA,WAPlC,eAQe4C,EAAIwB,UARnB,IAQ8BvB,EAAA,EAAA7C,cAAA,WAR9B,iBASiB4C,EAAIuB,YATrB,IASkCtB,EAAA,EAAA7C,cAAA,WATlC,WAUW4C,EAAIkG,cAVf,IAU8BjG,EAAA,EAAA7C,cAAA,eAKpC+I,kBAAkB,EAClBC,oBAAoB,GAEtB,OACEnG,EAAA,EAAA7C,cAAA,WACE6C,EAAA,EAAA7C,cAAA,MAAIG,UAAU,6BACZ0C,EAAA,EAAA7C,cAAA,MAAIG,UAAU,mBACZ0C,EAAA,EAAA7C,cAAC6C,EAAA,EAAD,CAAMoG,GAAG,KAAT,YAEFpG,EAAA,EAAA7C,cAAA,MAAIG,UAAU,0BAAd,oBAEF0C,EAAA,EAAA7C,cAAA,MAAIG,UAAU,eAAd,oBAYA0C,EAAA,EAAA7C,cAAC6C,EAAA,EAAD,KACEA,EAAA,EAAA7C,cAAC6C,EAAA,EAAD,oBACAA,EAAA,EAAA7C,cAAA,WACA6C,EAAA,EAAA7C,cAAC6C,EAAA,EAAD,KACEA,EAAA,EAAA7C,cAAC6C,EAAA,EAAD,CACEqG,SAAS,cACTC,WAAW,EACXC,YAAa,kBAAIT,EAAKpH,qBACtB8H,YAAY,EACZC,QAAQ,kBACRhG,KAAMjE,KAAKG,MAAM0B,WACjBkB,QAAS/C,KAAKG,MAAM4C,QACpBmH,OAAO,EACPC,UACEnK,KAAKG,MAAMyC,YACTY,EAAA,EAAA7C,cAAA6C,EAAA,EAAA5C,SAAA,KACG,IACD4C,EAAA,EAAA7C,cAAA,KAAGG,UAAU,2BAFf,oCAMA,qBAGJyI,UAAWA,KAIf/F,EAAA,EAAA7C,cAAA,WAEA6C,EAAA,EAAA7C,cAAC6C,EAAA,EAAD,CACE4G,KAAK,IACLC,MACErK,KAAKG,MAAMkC,iBACP,gBACArC,KAAKG,MAAMiC,iBACT,iBACA,cAERkI,QACEtK,KAAKG,MAAMkC,iBACTmB,EAAA,EAAA7C,cAAC4J,EAAA,EAAD,CACE7H,UAAW1C,KAAKG,MAAMuC,UACtB8H,SAAU,SAACvG,GAAD,OAAUqF,EAAKxF,aAAaG,MAEtCjE,KAAKG,MAAMiC,iBACboB,EAAA,EAAA7C,cAAC8J,EAAD,CACEnJ,iBAAkBtB,KAAKG,MAAMmB,iBAC7BD,gBAAiB,SAACqJ,GAAD,OAAQpB,EAAKjI,gBAAgBqJ,IAC9CF,SAAU,SAACvG,GAAD,OAAUqF,EAAKxF,aAAaG,MAGxCT,EAAA,EAAA7C,cAAC4J,EAAA,EAAD,CACE7H,UAAW1C,KAAKG,MAAMuC,UACtB8H,SAAU,SAACvG,GAAD,OAAUqF,EAAK5F,aAAaO,iBA9c7B0G,IAAMpJ,WA0dlBI,wBAAUM","file":"static/js/47.1e97b3b1.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { reduxForm } from \"redux-form\";\n// import { ReanderSelect } from \"../../../components/helpers/field\";\n\nconst maptostate = (state) => {\n  return {\n    setCamera: state.databarang.setCamera,\n    hideModal: state.datamaster.modalDialog,\n  };\n};\n\nclass ModalPesanan extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n  componentDidMount() {\n    setTimeout(() => {\n      document.getElementById(\"nomor_pesanan\").focus();\n    }, 100);\n  }\n  render() {\n    return (\n      <>\n        {/* <form onSubmit={this.props.handleSubmit} autoComplete=\"off\"> */}\n          <label htmlFor=\"\">Masukan Nomor Pesanan</label>\n          <div className=\"input-group mb-3\">\n            <input\n              type=\"text\"\n            id=\"nomor_pesanan\"\n              className=\"form-control\"\n              placeholder=\"Nomor Pesanan\"\n              aria-label=\"Nomor Pesanan\"\n              aria-describedby=\"basic-addon2\"\n            />\n            <div className=\"input-group-append\">\n              <button\n                className=\"btn btn-primary\"\n                type=\"button\"\n                onClick={() =>\n                  this.props.getNomorPesanan(\n                    document.getElementById(\"nomor_pesanan\")\n                  )\n                }\n              >\n                {this.props.isLoadingPesanan ? (\n                  <>\n                    <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Search\n                  </>\n                ) : (\n                  \"Search\"\n                )}\n              </button>\n            </div>\n          </div>\n          {/* <div>\n          <Field\n              id=\"list_barang\"\n              name=\"list_barang\"\n              label=\"List Barang\"\n              placeholder=\"Silahkan List Barang\"\n              options={[]}\n              component={ReanderSelect}\n            />\n          </div>\n          <div className=\"mt-2\">\n            <button type=\"submit\" className=\"btn btn-primary\">Simpan</button>\n          </div> */}\n        {/* </form> */}\n      </>\n    );\n  }\n}\n\nModalPesanan = reduxForm({\n  form: \"ModalPesanan\",\n  enableReinitialize: true,\n})(ModalPesanan);\nexport default connect(maptostate, null)(ModalPesanan);\n","import {\n  React,\n  Link,\n  ModalGlobal,\n  setItem,\n  reset,\n  Panel,\n  ToastNotification,\n  PanelHeader,\n  connect,\n  Tabel,\n  hideModal,\n  showModal,\n  postData,\n  // getItem,\n  PanelBody,\n  // lazy\n} from \"../../../components/helpers/library\";\n\nimport {\n  setCamera,\n  showEditBarang,\n  HeadEditDataBarang,\n  FormTambahBarang,\n} from \"./Module\";\n\nimport { getData, postData2, postDataNoTImeOut2 } from \"../../../config/axios\";\nimport { showModalPesanan } from \"../../../actions/databarang_action\";\nimport ModalPesanan from \"./ModalPesanan\";\nimport { dataURLtoFile, postImage } from \"../../../components/helpers/function\";\n\n// const FIlterPencarianBarang = lazy(() => import( \"./FIlterPencarianBarang.jsx\"));\n\nclass TambahBarang extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEdit: false,\n      modalDialog: false,\n      isLoading: false,\n      formEdit: false,\n      loadingData: false,\n      databarang: [],\n      dataPesanan: [],\n      formTambahBarang: false,\n      fromModalPesanan: false,\n      isLoadingPesanan: false,\n      noPesanan: \"\",\n      columns: [\n        // {\n        //   dataField: \"kode_barang\",\n        //   text: \"Kode Barang \",\n        //   sort: true,\n        // },\n        {\n          dataField: \"kode_barcode\",\n          text: \"Kode Barcode\",\n          sort: true\n        },\n        {\n          dataField: \"kode_group\",\n          text: \"Kode Group\",\n        },\n        {\n          dataField: \"kode_toko\",\n          text: \"Kode Baki\",\n        },\n        {\n          dataField: \"kode_dept\",\n          text: \"Kode Jenis\",\n        },\n        {\n          dataField: \"nama_barang\",\n          text: \"Nama Barang\",\n        },\n        {\n          dataField: \"berat\",\n          text: \"Berat\",\n        },\n        {\n          dataField: \"action\",\n          text: \"Action\",\n          csvExport: false,\n          headerClasses: \"text-center\",\n          formatter: (rowcontent, row) => {\n\n            return (\n              <div className=\"row text-center\">\n                <div className=\"col-12\">\n                  <button\n                    type=\"button\"\n                    onClick={() => this.showModalDuplikatBarang(row)}\n                    className=\"btn btn-primary mr-3\"\n                  >\n                    <i className=\"fa fa-copy\"></i>\n                  </button>\n                </div>\n              </div>\n            );\n          },\n        },\n      ],\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.showModalTambahBarang = this.showModalTambahBarang.bind(this);\n    this.tambahbarang = this.tambahbarang.bind(this);\n    // this.getBarangKodeBaki = this.getBarangKodeBaki.bind(this);\n  }\n\n  componentDidMount() {\n    localStorage.removeItem(\"estimasi_harga_tambah\")\n    // getData(\"barang/get/by-kode-baki/SEM-01\").then((res) => {\n    //   if (res.data.length === 0) {\n    //     this.setState({ databarang: [] });\n    //   } else {\n    //     this.setState({ databarang: res.data });\n    //   }\n    //   this.setState({ isLoading: false });\n    // });\n  }\n  tambahbarang(data) {\n    this.setState({ isLoading: true });\n    // console.log(data);\n\n    // return false;\n    let kode_baki = data.kode_lokasi_toko.split(\"~\");\n    let data_post = {\n      no_kirim_bos: \"-\",\n      kode_baki_label: \"-\",\n      qty_input: 1,\n      id_barang_pesanan: \"-\",\n      kode_group: data.kode_kategori,\n      kode_dept: data.kode_jenis,\n      kode_gudang: data.kode_gudang,\n      kode_toko: kode_baki[0],\n      susut_tukang: parseFloat(data.susut_tukang),\n      kode_intern: data.kode_intern || \"-\",\n      nama_barang: data.nama_barang,\n      berat: parseFloat(data.berat),\n      berat_asli: data.status_pesanan === \"PESANAN\" ? parseFloat(data.berat) : parseFloat(data.berat_asli) || 0,\n      // berat_awal: parseFloat(data.berat_awal) || 0,\n      tipe_barang : data.tipe_barang,\n      kadar_modal: parseFloat(data.kadar_modal) || 0,\n      kadar: parseFloat(data.kadar),\n      berat_cad: parseFloat(data.berat_cad),\n      berat_susut: parseFloat(data.berat_susut),\n      tujuan: data.tujuan,\n      kadar_cetak: data.kadar_cetak.toString(),\n      nama_atribut: data.nama_atribut || \"-\",\n      berat_atribut: parseFloat(data.berat_atribut) || 0,\n      berat_plastik: parseFloat(data.berat_plastik) || 0,\n      harga_atribut: parseInt(data.harga_atribut) || 0,\n      tag_id: \"-\",\n      berat_bandrol: 0,\n      no_pesanan: data.no_pesanan || \"-\",\n    };\n  \n    setTimeout(() => {\n      postDataNoTImeOut2(\"tambah-barang/create\", data_post)\n        .then((res) => {\n         \n          const file = data.foto !== undefined  ? dataURLtoFile(data.foto) : undefined ;\n          if(file !== undefined){\n            postImage(file,'foto_produk/'+data.kode_barcode).then((res)=>{\n            }).catch((err)=>{\n              ToastNotification('info', \"upload Foto Gagal, Silahkan Edit Didata Barang\")\n            })\n          }\n          getData(\"barang/get/by-kode-baki?kode_baki=\"+data.kode_lokasi_toko)\n            .then((res) => {\n              if (res.data.length === 0) {\n                this.setState({ databarang: [] });\n              } else {\n                this.setState({ databarang: res.data });\n              }\n              this.setState({ isLoading: false });\n            })\n            .catch((err) => {\n              this.setState({ isLoading: false, databarang: [] });\n              ToastNotification(\"info\", \"Kode Baki Yang Anda Dicari Tidak Ada\");\n            });\n          this.props.dispatch(reset(\"FormTambahBarang\"));\n          this.props.dispatch(hideModal());\n          ToastNotification(\"success\", \"Data Barang Berhasil Di Tambahkan\");\n        })\n        .catch((err) => {\n          this.setState({ isLoading: false });\n          ToastNotification(\n            \"info\",\n            err.response?.data?.message || \"Gagal Tambah Barang Silahkan Coba Lagi\"\n          );\n        });\n    }, 300);\n  }\n\n  showModalDuplikatBarang(row) {\n    getData(\"imagebarang/get/by-kode-barcode/\" + row.kode_barcode)\n      .then((res) => {\n        let dataEdit = {\n          foto: res.data.dataimage,\n          kode_barcode: row.kode_barcode,\n          nama_barang: row.nama_barang,\n          nama_atribut: row.nama_atribut || \"-\",\n          harga_atribut: row.harga_atribut || 0,\n          kode_intern: row.kode_intern,\n          kadar: row.kadar || 0,\n          kadar_cetak: row.kadar_cetak || 0,\n          kadar_modal: row.kadar_modal || 0,\n          kode_kategori: row.kode_group,\n          kode_jenis: row.kode_dept,\n          kode_lokasi_toko: row.kode_toko + \"~\" + row.kode_gudang,\n          berat: row.berat,\n          berat_asli: row.berat_asli,\n          berat_atribut: row.berat_atribut || 0,\n          berat_plastik: row.berat_plastik || 0,\n          tag_id: row.tag_id,\n          berat_bandrol: 0,\n        };\n        console.log(dataEdit);\n        setItem(\"data_kategori_jenis\", dataEdit);\n        this.setState({\n          formTambahBarang: true,\n        });\n        this.props.dispatch(showModal());\n        this.props.dispatch(showEditBarang(dataEdit));\n      })\n      .catch((err) => {\n        let dataEdit = {\n          foto: '-',\n          kode_barcode: row.kode_barcode,\n          nama_barang: row.nama_barang,\n          nama_atribut: row.nama_atribut || \"-\",\n          harga_atribut: row.harga_atribut || 0,\n          kode_intern: row.kode_intern,\n          kadar: row.kadar || 0,\n          kadar_cetak: row.kadar_cetak || 0,\n          kadar_modal: row.kadar_modal || 0,\n          kode_kategori: row.kode_group,\n          kode_jenis: row.kode_dept,\n          kode_lokasi_toko: row.kode_toko + \"~\" + row.kode_gudang,\n          berat: row.berat,\n          berat_asli: row.berat_asli,\n          berat_atribut: row.berat_atribut || 0,\n          berat_plastik: row.berat_plastik || 0,\n          tag_id: row.tag_id,\n          berat_bandrol: 0,\n        };\n        setItem(\"data_kategori_jenis\", dataEdit);\n        this.setState({\n          formTambahBarang: true,\n        });\n        this.props.dispatch(showModal());\n        this.props.dispatch(showEditBarang(dataEdit));\n      });\n\n  }\n\n  showModalTambahBarang(data) {\n    // console.log(data);\n    setItem(\"data_kategori_jenis\", data);\n    this.setState({\n      formTambahBarang: true,\n    });\n    this.props.dispatch(showModal());\n    this.props.dispatch(showEditBarang(data));\n  }\n\n  showBarangPesanan = () => {\n    this.setState({\n      fromModalPesanan: true,\n      formTambahBarang: false,\n    });\n    this.props.dispatch(showModal());\n    this.props.dispatch(showModalPesanan());\n  };\n\n  getBarangPesanan() {\n    getData(\"pesanan/no/\" + this.state.noPesanan)\n      .then((res) => console.log(res.data))\n      .catch((err) => ToastNotification('info',err.response.data));\n  }\n\n  handleSubmit(data) {\n    this.setState({ isLoading: true });\n    let saveImage = {\n      kode_barcode: data.kode_barcode,\n      dataimage: data.foto,\n    };\n    // console.log(data.foto);\n    let hasil = {\n      nama_barang: data.nama_barang,\n      nama_atribut: data.nama_atribut,\n      harga_atribut: data.harga_atribut,\n      kode_intern: data.kode_intern,\n      kadar: data.kadar,\n      kadar_cetak: data.kadar_cetak,\n    };\n    postData(\"barang/edit/\" + data.kode_barcode, hasil)\n      .then(() => {\n        this.props.dispatch(hideModal());\n      })\n      .then(() => {\n        if (data.foto === undefined) {\n        } else {\n          postData(\"imagebarang/add\", saveImage)\n            .then((res) => {\n              // console.log(res.data);\n            })\n            .catch((error) => {\n              // console.log(error.response.data);\n            });\n        }\n      })\n      .then(() => {\n        this.setState({ databarang: [] });\n        this.props.dispatch(reset(\"HeadEditDataBarang\"));\n        this.props.dispatch(setCamera(false));\n      })\n      .then(() => {\n        ToastNotification(\"success\", \"Data Berhasil Disimpan\");\n      })\n      .then(() => {\n        this.setState({ isLoading: false });\n      })\n      .catch((error) => {\n        this.setState({ isLoading: false });\n        ToastNotification(\"info\", \"Barang Gagal Di Edit\");\n      });\n  }\n\n  getNomorPesanan(nomor_pesanan) {\n    this.setState({\n      isLoadingPesanan: true\n    })\n    postData2(\"pesanan/valid/no\", { no_pesanan: nomor_pesanan.value.trim() })\n      .then((res) => {\n        // console.log(res.data);\n        this.setState({\n          isLoadingPesanan: false,\n        })\n        \n       \n\n        let dataEdit = res.data.detail_barang.map((detail) => {\n     \n            return {\n              kode_barcode: detail.kode_barcode,\n              nama_atribut: detail.attribut || \"-\",\n              harga_atribut: detail.harga_atribut || 0,\n              kode_intern: \"-\",\n              susut_tukang: res.data.susut_tukang || 0,\n              kadar: detail.perkiraan_kadar,\n              estimasi: detail.sub_total,\n              nama_barang: detail.keterangan,\n              ongkos: detail.ongkos || 0,\n              berat_susut: detail.berat_susut || 0,\n              berat_cad: detail.berat_cad || 0,\n              tujuan: detail.tujuan || '-',\n              kadar_cetak: 0,\n              kadar_modal: detail.kadar_modal || 0,\n              kode_kategori: detail.kode_kategori,\n              kode_jenis: detail.kode_jenis || '',\n              kode_lokasi_toko: detail.kode_toko || '',\n              berat: detail.perkiraan_berat,\n              berat_asli: detail.perkiraan_berat || 0,\n              berat_atribut: detail.berat_atribut || 0,\n              berat_plastik: detail.berat_plastik || 0,\n              tag_id: detail.tag_id || \"-\",\n              berat_bandrol: 0,\n              no_pesanan: nomor_pesanan.value,\n              status: \"PESANAN\",\n            };\n            \n           \n        })[0];\n       \n        this.props.dispatch(showModal());\n        this.props.dispatch(showEditBarang(dataEdit));\n        this.setState({\n          formTambahBarang: true,\n          fromModalPesanan: false,\n        });\n\n      })\n      .catch((err) => {\n        // console.log(err);\n        this.setState({\n          isLoadingPesanan: false,\n        })\n        ToastNotification(\n          \"info\",\n          err.response === undefined\n            ? \"Terjadi Kesalahan Saat Request Data\"\n            : err.response.data.message\n        );\n      });\n  }\n\n  render() {\n    const expandRow = {\n      renderer: (row) => (\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-12\">\n              Nama Atribut : {row.nama_atribut} <br />\n              Berat Atribut : {row.berat_atribut} <br />\n              Berat Plastik : {row.berat_plastik} <br />\n              Harga Atribut : {row.harga_atribut} <br />\n              Kode Intern : {row.kode_intern} <br />\n              Kadar : {row.kadar} <br />\n              Kadar Cetak : {row.kadar_cetak} <br />\n              Kode Toko : {row.kode_toko} <br />\n              Kode Gudang : {row.kode_gudang} <br />\n              Stock : {row.stock_on_hand} <br />\n            </div>\n          </div>\n        </div>\n      ),\n      showExpandColumn: true,\n      expandByColumnOnly: true,\n    };\n    return (\n      <div>\n        <ol className=\"breadcrumb float-xl-right\">\n          <li className=\"breadcrumb-item\">\n            <Link to=\"#\">Pesanan</Link>\n          </li>\n          <li className=\"breadcrumb-item active\">Pesanan Selesai</li>\n        </ol>\n        <h1 className=\"page-header\">Pesanan Selesai </h1>\n\n        {/* <Panel>\n          <PanelHeader>Pesanan Selesai</PanelHeader>\n          <br />\n            <PanelBody>\n            <FIlterPencarianBarang\n              onSubmit={(data) => this.showModalTambahBarang(data)}\n              barangPesanan={this.showBarangPesanan}\n            />\n          </PanelBody>\n        </Panel> */}\n        <Panel>\n          <PanelHeader>Data Barang</PanelHeader>\n          <br />\n          <PanelBody>\n            <Tabel\n              keyField=\"kode_barang\"\n              exportCsv={true}\n              handleClick={()=>this.showBarangPesanan()}\n              tambahData={true}\n              btnText=\"Pesanan Selesai\"\n              data={this.state.databarang}\n              columns={this.state.columns}\n              empty={true}\n              textEmpty={\n                this.state.loadingData ? (\n                  <>\n                    {\" \"}\n                    <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Sedang\n                    Mencari Data Barang\n                  </>\n                ) : (\n                  \"Data Barang Kosong\"\n                )\n              }\n              expandRow={expandRow}\n            />\n            </PanelBody>\n\n          <br />\n          {/* End Data Barang */}\n          <ModalGlobal\n            size=\"l\"\n            title={\n              this.state.formTambahBarang\n                ? \"Tambah Barang\"\n                : this.state.fromModalPesanan\n                  ? \"Barang Pesanan\"\n                  : \"Edit Barang\"\n            }\n            content={\n              this.state.formTambahBarang ? (\n                <FormTambahBarang\n                  isLoading={this.state.isLoading}\n                  onSubmit={(data) => this.tambahbarang(data)}\n                />\n              ) : this.state.fromModalPesanan ? (\n                <ModalPesanan\n                  isLoadingPesanan={this.state.isLoadingPesanan}\n                  getNomorPesanan={(no) => this.getNomorPesanan(no)}\n                  onSubmit={(data) => this.tambahbarang(data)}\n                />\n              ) : (\n                <HeadEditDataBarang\n                  isLoading={this.state.isLoading}\n                  onSubmit={(data) => this.handleSubmit(data)}\n                />\n              )\n            }\n          />\n          {/* End Tambah Data Barang  */}\n        </Panel>\n      </div>\n    );\n  }\n}\n\nexport default connect()(TambahBarang);\n"],"sourceRoot":""}