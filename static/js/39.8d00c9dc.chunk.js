(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{1228:function(e,a,t){"use strict";t.r(a);var n=t(48),r=t.n(n),o=t(103),i=t(66),s=t(8),c=t(9),l=t(15),u=t(11),d=t(10),m=t(1),g=t(36),p=t(742),b=t(4),h=Object(m.O)(function(){return t.e(22).then(t.bind(null,1194))}),f=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).state={isEdit:!1,modalDialog:!1,isLoading:!1,isLoadingOtorisasi:!1,columns:[{dataField:"kode_barcode",text:"Kode Barcode",footerAttrs:{colSpan:"5"},footer:function(e,a,t,r){return m.o.createElement("div",null,"Total Barang :"," ",0===n.props.setHancurBarang.length?null===JSON.parse(localStorage.getItem("data_barang_hancur_tmp"))?0:JSON.parse(localStorage.getItem("data_barang_hancur_tmp")).length||0:n.props.setHancurBarang.length||0," ")}},{dataField:"kode_group",text:"Gudang Asal"},{dataField:"kode_dept",text:"Baki Asal"},{dataField:"nama_barang",text:"Nama Barang"},{dataField:"nama_atribut",text:"Nama Atribut"},{dataField:"berat",text:"Berat",formatter:function(e){return e.toFixed(3)},footer:function(e){return e.reduce(function(e,a){return e+a},0).toFixed(3)}},{dataField:"kondisi_barang",text:"Kondisi Barang",footer:""},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:function(e,a,t){return m.o.createElement("div",{className:"row text-center"},m.o.createElement("div",{className:"col-12"},m.o.createElement("button",{type:"button",onClick:function(){return n.hapusdata(t)},className:"btn btn-danger mr-3"},m.o.createElement("i",{className:"fa fa-trash"}))))},footer:""}]},n.handleSubmit=n.handleSubmit.bind(Object(l.a)(n)),n}return Object(c.a)(t,[{key:"hapusdata",value:function(e){var a=this;m.t.fire({title:"Anda Yakin !!",text:"Ingin Menghapus Data Ini ?",icon:"warning",position:"top-center",cancelButtonText:"Tidak",showCancelButton:!0,confirmButtonText:"OK",showConfirmButton:!0}).then(function(t){if(t.isConfirmed){var n=JSON.parse(localStorage.getItem("data_barang_hancur_tmp"));n.splice(e,1),localStorage.setItem("data_barang_hancur_tmp",JSON.stringify(n)),a.props.dispatch(Object(g.v)(n))}})}},{key:"handleSubmit",value:function(e){this.props.dispatch(Object(m.bb)())}},{key:"hancurBarang",value:function(e){var a=this;this.setState({isLoadingOtorisasi:!0});var t={user_id:e.username,password:e.password,kategori:"HANCUR BARANG",description:"SIMPAN HANCUR BARANG",keterangan:e.keterangan.toUpperCase()||"-"};Object(m.T)("authorization",t).then(function(e){Object(m.v)("success","Otorisasi Berhasil"),a.setState({isLoading:!0});var t=0===a.props.setHancurBarang.length?JSON.parse(localStorage.getItem("data_barang_hancur_tmp"))||0:a.props.setHancurBarang||0,n={detail_barang:t};Object(m.T)("hancurbarang/add",n).then(Object(i.a)(r.a.mark(function e(){var n,i,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(o.a)(t);try{for(s=function(){var e=i.value;Object(b.h)("foto_produk/"+e.kode_barcode).then(function(t){Object(b.e)("foto_produk/"+e.kode_barcode).then(function(e){}).catch(function(e){return a.setState({isLoading:!1,isLoadingOtorisasi:!1}),Object(m.v)("info","Terjadi Kesalahan Saat Hancur Barang Silahkan Ulangi Kembali"),!1})}).catch(function(e){console.clear()})},n.s();!(i=n.n()).done;)s()}catch(r){n.e(r)}finally{n.f()}a.setState({isLoading:!1,isLoadingOtorisasi:!1});case 3:case"end":return e.stop()}},e)}))).then(function(){localStorage.setItem("data_barang_hancur_tmp",JSON.stringify([]))}).then(function(){a.props.dispatch(Object(g.v)([]))}).then(function(){a.setState({isLoadingOtorisasi:!1}),a.props.dispatch(Object(m.K)()),Object(m.v)("success","Data Berhasil Dihancur")}).catch(function(e){a.setState({isLoading:!1,isLoadingOtorisasi:!1}),a.errorhandling(e)})}).catch(function(e){var t,n;Object(m.v)("info",(null===(t=e.response)||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.message)||"Terjadi Kesalhan Saat Mengirim Data"),a.setState({isLoading:!1,isLoadingOtorisasi:!1})})}},{key:"errorhandling",value:function(e){var a,t;Object(m.v)("info",/conflict/i.test(null===(a=e.response)||void 0===a?void 0:a.data.message)?"Terjadi Kesalahan Saat Mengirim Data":(null===(t=e.response)||void 0===t?void 0:t.data.message)||"Terjadi Kesalahan Saat Mengirim Data")}},{key:"render",value:function(){var e=this;return m.o.createElement("div",null,m.o.createElement("ol",{className:"breadcrumb float-xl-right"},m.o.createElement("li",{className:"breadcrumb-item"},m.o.createElement(m.h,{to:"#"},"Barang")),m.o.createElement("li",{className:"breadcrumb-item active"},"Hancur Barang")),m.o.createElement("h1",{className:"page-header"},"Hancur Barang "),m.o.createElement(m.l,null,m.o.createElement(m.n,null,"Hancur Barang"),m.o.createElement("br",null),m.o.createElement(m.m,null,m.o.createElement(h,{isLoading:this.state.isLoading,onSubmit:function(a){return e.handleSubmit(a)},columns:this.state.columns})),m.o.createElement("br",null),m.o.createElement(m.j,{size:"L",title:"Otorisasi Hancur Barang",content:m.o.createElement(p.a,{keterangan:!0,isLoadingOtorisasi:this.state.isLoadingOtorisasi,onSubmit:function(a){return e.hancurBarang(a)}})})))}}]),t}(m.o.Component);a.default=Object(m.w)(function(e){return{setHancurBarang:e.databarang.setHancurBarang}},null)(f)},742:function(e,a,t){"use strict";var n=t(8),r=t(9),o=t(11),i=t(10),s=t(0),c=t.n(s),l=t(30),u=t(320),d=t(321),m=t(20),g=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(e){var r;return Object(n.a)(this,t),(r=a.call(this,e)).state={},r}return Object(r.a)(t,[{key:"componentDidMount",value:function(){setTimeout(function(){document.getElementById("username").focus()},100)}},{key:"render",value:function(){return c.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()},autoComplete:"off"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-6"},c.a.createElement(u.a,{name:"no_faktur_group",component:m.b,type:"hidden"}),c.a.createElement(u.a,{name:"alasan",component:m.b,type:"hidden"}),c.a.createElement(u.a,{id:"username",name:"username",component:m.e,type:"text",nouperCase:!0,label:"Username",placeholder:"Masukan Username"})),c.a.createElement("div",{className:"col-lg-6"},c.a.createElement(u.a,{name:"password",component:m.e,type:"password",nouperCase:!0,label:"Password",placeholder:"Masukan Password"})),c.a.createElement("div",{className:this.props.keterangan?"col-lg-12":"col-lg-12 d-none"},c.a.createElement(u.a,{name:"keterangan",component:m.e,label:"Keterangan",placeholder:"Masukan Keterangan"})),c.a.createElement("div",{className:"col-lg-12"},c.a.createElement("label",null," \xa0 "),c.a.createElement("button",{type:"submit",name:"type_btn",className:"btn btn-primary btn-block",disabled:this.props.isLoadingOtorisasi},this.props.isLoadingOtorisasi?c.a.createElement(c.a.Fragment,null,c.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Otorisasi"):"Otorisasi"))))}}]),t}(s.Component);g=Object(d.a)({form:"OtorisasiHancur",enableReinitialize:!0})(g),a.a=Object(l.b)(null)(g)}}]);
//# sourceMappingURL=39.8d00c9dc.chunk.js.map