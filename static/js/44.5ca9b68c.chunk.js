(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{1247:function(a,e,t){"use strict";t.r(e);var n=t(227),r=t(8),i=t(9),o=t(14),l=t(11),c=t(10),s=t(1),d=t.n(s),m=t(32),p=t(45),b=t(25),u=t(49),g=t(16),h=t(19),k=t(39),f=t(6),v=t(51),_=t.n(v),E=t(67),O=t(152),j=t.n(O),y=t(322),N=t(323),S=t(103),B=t(20),D=t(2),T=t(110),K=t.n(T),w=Object(S.createNumberMask)({prefix:"Rp. ",locale:"kr-KO"}),C=function(a){Object(l.a)(t,a);var e=Object(c.a)(t);function t(a){var n;return Object(r.a)(this,t),(n=e.call(this,a)).tgl_awalChange=function(a){n.setState({tgl_awal:a})},n.tgl_akhirChange=function(a){n.setState({tgl_akhir:a})},n.getValue=function(){var a=Object(E.a)(_.a.mark(function a(e){var t,r;return _.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.target.files[0],a.next=4,Object(D.y)(t);case 4:r=a.sent,n.props.dispatch(Object(k.t)(r)),n.props.change("foto",r),a.next=11;break;case 9:a.prev=9,a.t0=a.catch(0);case 11:case"end":return a.stop()}},a,null,[[0,9]])}));return function(e){return a.apply(this,arguments)}}(),n.state={visible:!0,ModalWebCam:!1,isLoadingBaki:!1,isLoadingJenis:!1,tgl_awal:new Date,tgl_akhir:new Date,databaki:[],DataGroup:[],DataJenis:[],loadimage:K.a},n}return Object(i.a)(t,[{key:"showModalWebcam",value:function(){this.props.dispatch(Object(k.t)(!1)),this.props.dispatch(Object(f.Zb)()),this.setState({ModalWebCam:!0})}},{key:"handleTakePhoto",value:function(){var a=Object(E.a)(_.a.mark(function a(e){var t,n;return _.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=Object(D.j)(e),a.next=4,Object(D.y)(t);case 4:n=a.sent,console.log(n),this.props.dispatch(Object(k.t)(n)),this.props.change("foto",n),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:case"end":return a.stop()}},a,this,[[0,10]])}));return function(e){return a.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var a=this;Object(g.d)("group/get/all").then(function(e){a.setState({DataGroup:e.data})}).catch(function(a){console.log(a)})}},{key:"getJenis",value:function(a){var e=this;this.setState({isLoadingJenis:!0}),Object(g.d)("jenis/get/by-kode-kategori/"+a).then(function(a){e.setState({DataJenis:a.data})}).then(function(a){e.setState({isLoadingJenis:!1})}).catch(function(a){Object(h.b)(a.data),console.log(a)})}},{key:"getBaki",value:function(a){var e=this;this.setState({isLoadingBaki:!0}),Object(g.d)("baki/get/by-kode-baki/"+a).then(function(a){e.setState({databaki:""===a.data?[]:[a.data]})}).then(function(a){e.setState({isLoadingBaki:!1})}).catch(function(a){Object(h.b)(a.data),console.log(a)})}},{key:"loadcamera",value:function(){var a=this;return d.a.createElement(j.a,{onTakePhoto:function(e){a.handleTakePhoto(e)}})}},{key:"render",value:function(){var a=this;return d.a.createElement(d.a.Fragment,null,d.a.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-8"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-6"},d.a.createElement(y.a,{readOnly:!0,name:"foto_lama",type:"hidden",component:B.b}),d.a.createElement(y.a,{readOnly:!0,name:"foto",type:"hidden",component:B.b}),d.a.createElement(y.a,{readOnly:!0,name:"kode_barcode",component:B.e,label:"Kode Barcode",placeholder:"Masukan Kode Barcode"})),d.a.createElement("div",{className:"col-lg-6"},d.a.createElement(y.a,{name:"nama_barang",component:B.e,label:"Nama Barang",placeholder:"Masukan Nama Barang"}))),d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-8"},d.a.createElement(y.a,{name:"nama_atribut",component:B.e,label:"Nama Atribut",placeholder:"Masukan Nama Atribut"})),d.a.createElement("div",{className:"col-lg-4"},d.a.createElement(y.a,Object.assign({name:"harga_atribut",component:B.e,label:"Harga Atribut"},w,{placeholder:"Masukan Harga Atribut"})))),d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-6"},d.a.createElement(y.a,{name:"kadar",component:B.e,label:"Kadar",placeholder:"Masukan Kadar"})),d.a.createElement("div",{className:"col-lg-6"},d.a.createElement(y.a,{name:"kadar_cetak",component:B.e,label:"Kadar Cetak",placeholder:"Masukan Kadar Cetak"})),d.a.createElement("div",{className:"col-lg-3"},d.a.createElement(y.a,{name:"kode_intern",component:B.e,label:"Kode Intern",placeholder:"Masukan Kode Intern"})),d.a.createElement("div",{className:"col-lg-3"},d.a.createElement(y.a,{name:"tipe_barang",component:B.f,options:[{name:"SP",value:"SP"},{name:"A",value:"A"}],label:"Tipe Barang",placeholder:"Pilih Tipe Barang"})),d.a.createElement("div",{className:"col-lg-6"},d.a.createElement("div",{className:"form-group"},d.a.createElement("label",null," \xa0 "),!0===this.props.isLoading?d.a.createElement(D.k,{className:"btn btn-block btn-primary",text:"Sedang Menyimpan Data"}):d.a.createElement(d.a.Fragment,null,d.a.createElement("button",{type:"submit",className:"btn btn-block btn-primary"},"Simpan Barang")))))),d.a.createElement("div",{className:"col-lg-4"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-4"},!0===this.state.ModalWebCam&&!1===this.props.setCamera?d.a.createElement("div",{className:"container"},this.loadcamera()):d.a.createElement(d.a.Fragment,null,d.a.createElement("img",{src:void 0===this.props.foto?!1===this.props.setCamera?K.a:this.props.setCamera:this.props.setCamera?this.props.setCamera:this.props.foto,alt:"img",height:"245px",width:"355px"})))),d.a.createElement("div",{className:"row mt-2"},d.a.createElement("div",{className:"col-lg-12 mb-8"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-8"},d.a.createElement("div",{className:"input-group"},d.a.createElement("div",{className:"custom-file"},d.a.createElement("input",{type:"file",name:"photo",autoComplete:"off",className:"custom-file-input",id:"exampleInputFile",onChange:function(e){return a.getValue(e)}}),d.a.createElement("label",{className:"custom-file-label",htmlFor:"exampleInputFile"},"Pilih gambar")))),d.a.createElement("div",{className:"col-4"},d.a.createElement("button",{className:"btn btn-block btn-primary",type:"button",onClick:function(){return a.showModalWebcam()}}," ","WebCam"," ")))))))))}}]),t}(s.Component);C=Object(N.a)({form:"HeadEditDataBarang",enableReinitialize:!0})(C);var M=Object(b.b)(function(a){return{initialValues:{foto_lama:a.databarang.showEditBarang.foto_lama,kode_barcode:a.databarang.showEditBarang.kode_barcode,nama_barang:a.databarang.showEditBarang.nama_barang,nama_atribut:a.databarang.showEditBarang.nama_atribut,harga_atribut:a.databarang.showEditBarang.harga_atribut,kode_intern:a.databarang.showEditBarang.kode_intern,kadar:a.databarang.showEditBarang.kadar,kadar_cetak:a.databarang.showEditBarang.kadar_cetak,tipe_barang:a.databarang.showEditBarang.tipe_barang},foto:a.databarang.showEditBarang.foto,setCamera:a.databarang.setCamera,hideModal:a.datamaster.modalDialog}},null)(C),F=t(102),A=t(34),x=t(52),J=t.n(x),L=t(0),P=t(1154),G=function(a){Object(l.a)(t,a);var e=Object(c.a)(t);function t(a){var n;return Object(r.a)(this,t),(n=e.call(this,a)).state={},n}return Object(i.a)(t,[{key:"componentDidMount",value:function(){setTimeout(function(){document.getElementById("jml_barang").focus()},100)}},{key:"render",value:function(){var a=this;return L.p.createElement(L.p.Fragment,null,L.p.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off",onKeyPress:function(a){"Enter"===a.key&&a.preventDefault()}},L.p.createElement("div",{className:"row"},L.p.createElement("div",{className:"col-lg-6"},L.p.createElement(L.e,{id:"jml_barang",normalize:L.l,name:"jml_barang",component:L.r,label:"Jumlah Tambah",placeholder:"Masukan Jumlah Barang"})),L.p.createElement("div",{className:"col-lg-3"},L.p.createElement(L.e,{name:"kode_barang_awal",component:L.r,label:"Kode Barang Awal",readOnly:!0})),L.p.createElement("div",{className:"col-lg-3"},L.p.createElement(L.e,{name:"kode_barang_akhir",component:L.r,label:"Kode Barang Akhir",readOnly:!0})),L.p.createElement("div",{className:"col-lg-6"},L.p.createElement(L.e,{name:"nama_barang",component:L.r,label:"Nama Barang",placeholder:"Masukan Nama Barang"})),L.p.createElement("div",{className:"col-lg-3"},L.p.createElement(L.e,{name:"kode_barcode_awal",component:L.r,label:"Kode Barcode Awal",readOnly:!0})),L.p.createElement("div",{className:"col-lg-3"},L.p.createElement(L.e,{name:"kode_barcode_akhir",component:L.r,label:"Kode Barcode Akhir",readOnly:!0})),L.p.createElement("div",{className:"col-lg-6 text-right"}),L.p.createElement("div",{className:"col-lg-6 text-right"},L.p.createElement("button",{type:"button",className:"btn btn-primary mt-1"},L.p.createElement("i",{className:"fa fa-plus"})," Simpan"," ")," ","\xa0",L.p.createElement("button",{type:"button",onClick:function(){return a.props.FormBatal()},className:"btn btn-warning mt-1"},"Batal"," ")," "))))}}]),t}(L.c);G=Object(L.Z)({form:"TambahBarangBanyak",enableReinitialize:!0})(G);var I=Object(L.w)()(G),R=function(a){Object(l.a)(t,a);var e=Object(c.a)(t);function t(a){var n;return Object(r.a)(this,t),(n=e.call(this,a)).state={},n}return Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(f.Lb)())}},{key:"render",value:function(){var a=this;return L.p.createElement(L.p.Fragment,null,L.p.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off",onKeyPress:function(a){"Enter"===a.key&&a.preventDefault()}},L.p.createElement("div",{className:"row"},L.p.createElement("div",{className:"col-lg-3"},L.p.createElement(L.e,{name:"level1",component:L.s,options:this.props.DataAtribut.filter(function(a){return void 0!==a._id}).map(function(a){return{value:a.nama_atribut,name:a.nama_atribut}}),label:"Level 1",placeholder:"Silahkan Pilih Level 1"})),L.p.createElement("div",{className:"col-lg-3"},L.p.createElement(L.e,{name:"level2",component:L.s,options:this.props.DataAtribut.filter(function(a){return void 0!==a._id}).map(function(a){return{value:a.nama_atribut,name:a.nama_atribut}}),label:"Level 2",placeholder:"Silahkan Pilih Level 2"})),L.p.createElement("div",{className:"col-lg-3"},L.p.createElement(L.e,{name:"level3",component:L.s,options:this.props.DataAtribut.filter(function(a){return void 0!==a._id}).map(function(a){return{value:a.nama_atribut,name:a.nama_atribut}}),label:"Level 3",placeholder:"Silahkan Pilih Level 3"})),L.p.createElement("div",{className:"col-lg-3"},L.p.createElement(L.e,{name:"level4",component:L.s,options:this.props.DataAtribut.filter(function(a){return void 0!==a._id}).map(function(a){return{value:a.nama_atribut,name:a.nama_atribut}}),label:"Level 4",placeholder:"Silahkan Pilih Level 4"})),L.p.createElement("div",{className:"col-lg-6"},L.p.createElement(L.e,{name:"custome",component:L.r,label:"Custome",placeholder:"Masukan Custome"})),L.p.createElement("div",{className:"col-lg-3"},L.p.createElement(L.e,{name:"kadar",component:L.r,label:"Kadar",placeholder:"Silahkan Masukan Kadar"})),L.p.createElement("div",{className:"col-lg-3"},L.p.createElement(L.e,{name:"pabrik",component:L.s,options:"-"===Object(L.Q)("pabrik")?this.props.DataPabrik.map(function(a){return{value:a.nama_pabrik,name:a.nama_pabrik}}):[{value:Object(L.Q)("pabrik"),name:Object(L.Q)("pabrik")}],label:"Pabrik",placeholder:"Silahkan Masukan Pabrik"})),L.p.createElement("div",{className:"col-lg-6"},L.p.createElement("label",null,L.p.createElement(L.e,{name:"model",component:"input",type:"checkbox",defaultChecked:this.props.model,value:"1"})," \xa0 Model")),L.p.createElement("div",{className:"col-lg-6 text-right"},L.p.createElement("button",{type:"submit",className:"btn btn-primary mt-1"},L.p.createElement("i",{className:"fa fa-plus"})," Simpan"," ")," ","\xa0",L.p.createElement("button",{type:"button",onClick:function(){return a.props.FormBatal()},className:"btn btn-warning mt-1"},"Batal"," ")," "))))}}]),t}(L.c);R=Object(L.Z)({form:"FormDataAtribut",enableReinitialize:!0})(R);var W=Object(L.w)(function(a){var e={};return 0!==Object(L.Q)("dataattr").length&&(e=JSON.parse(Object(L.Q)("dataattr"))),{initialValues:{level1:e.level1,level2:e.level2,level3:e.level3,level4:e.level4,custome:e.custome,kadar:e.kadar,pabrik:e.pabrik,model:e.model},model:e.model,DataAtribut:a.datamaster.getMasterAtribut,DataPabrik:a.datamaster.getMasterPabrik}})(R),z=t(132),H=function(a){var e={};return a.berat||(e.berat="Berat Harus Diisi"),a.baki||(e.baki="Baki Harus Dipilih"),e},Y=Object(L.z)({prefix:"Rp. ",locale:"id-ID"}),Q=function(a){Object(l.a)(t,a);var e=Object(c.a)(t);function t(a){var n;return Object(r.a)(this,t),(n=e.call(this,a)).onValChange=function(a){n.setState({name_type:a.target.value}),Object(L.R)("kadar_type",a.target.value)},n.state={visible:!0,ModalWebCam:!1,isLoadingBaki:!1,isLoadingJenis:!1,showModalForm:!1,loadingData:!1,cekStatus:!1,tgl_awal:new Date,tgl_akhir:new Date,databaki:[],DataLabeling:[],DataGroup:[],DataJenis:[],loadimage:L.M,name_type:"SP",kode_gudang:"TOKO",stock_input:"NISA1"},n}return Object(i.a)(t,[{key:"loadcamera",value:function(){var a=this;return L.p.createElement(L.b,{onTakePhoto:function(e){a.handleTakePhoto(e)}})}},{key:"handleTakePhoto",value:function(a){this.props.dispatch(Object(z.e)(a)),this.props.change("foto",a)}},{key:"shofFormModal",value:function(a){this.setState({showModalForm:a}),this.props.dispatch(Object(L.cb)())}},{key:"getDataDetailBarangBos",value:function(a){var e=this;a.length>=14&&(this.delayTimer&&clearTimeout(this.delayTimer),this.delayTimer=setTimeout(function(){if(e.setState({loadingData:!0}),void 0===e.state.stock_input)return e.setState({loadingData:!1}),Object(h.e)("info","Kode Baki Belum Dipilih"),!1;e.setState({no_kirim:a.trim()}),Object(L.H)("kirim-labeling/jenises?no_kirim="+a.trim()+"&kode_toko="+e.state.stock_input).then(function(a){if(0===a.data.length)e.setState({loadingData:!1}),Object(h.e)("info","No Kirim Barang Sudah Tidak Ada");else{var t=[];a.data.forEach(function(a){var e={value:a.kode_dept,name:a.kode_dept};t.push(e)});var n=e.props.DataJenis.find(function(e){return e.kode_dept===a.data[0].kode_dept});e.props.change("jenis_bos",a.data[0].kode_dept),e.props.change("nama_barang",n.nama_dept),Object(L.F)("kirim-labeling?kode_toko="+e.state.stock_input+"&no_kirim="+e.state.no_kirim+"&kode_dept="+a.data[0].kode_dept).then(function(a){document.getElementById("sales_pabrik_bos").focus(),e.props.change("kode_group",a.data.kode_group),e.props.change("qty_bos",a.data.stock_akhir),e.props.change("berat_bos",a.data.berat_akhir.toFixed(3)),e.setState({name_type:a.data.kadar}),Object(L.R)("kadar_type",a.data.kadar);var t=e.props.DataGroup.find(function(e){return e.kode_group===a.data.kode_group});e.props.change("kadar_cetak",t.kadar||0),e.props.change("sales_pabrik_bos",void 0===a.data.sales_pabrik?"-":a.data.sales_pabrik)}).catch(function(a){var e;console.log(a),Object(h.e)("info",(null===(e=a.response)||void 0===e?void 0:e.data.message)||"Terjadi Kesalahan Saat Request Data")}),e.setState({DataJenis:t,loadingData:!1})}}).catch(function(a){var t;Object(h.e)("info",(null===(t=a.response)||void 0===t?void 0:t.data.message)||"Gagal Mengirim Data Keserver"),e.setState({loadingData:!1})})},1500))}},{key:"FormBatal",value:function(a){!0===a?(this.props.dispatch(Object(L.L)()),this.props.dispatch(Object(L.ab)("TambahBarangBanyak"))):(this.props.dispatch(Object(L.L)()),this.props.dispatch(Object(L.ab)("FormDataAtribut")))}},{key:"resetKamera",value:function(){this.props.change("foto",""),this.props.dispatch(Object(z.e)(!1))}},{key:"componentDidMount",value:function(){var a=this;this.props.change("stock_input","NISA1"),this.props.change("gudang","TOKO"),this.props.change("kadar",100),this.props.change("atribut","0"),P.io.connect("http://147.139.193.169:5011/api/v1/".replace("/api/v1/","")).on("timbangan",function(e){Object(D.s)().user_id===e.user_id&&a.props.change("berat_asli",e.value)}),this.props.dispatch(Object(f.A)()),Object(L.E)("baki/get/by-kode-gudang/KC").then(function(e){a.setState({DataLabeling:e.data})}),this.props.change("jumlah_barang",1),Object(D.z)("dataattr",[]),Object(L.R)("kadar_type",this.state.name_type),Object(L.R)("pabrik","-"),this.props.dispatch(Object(f.Nb)()),this.props.dispatch(Object(f.Lb)()),this.props.dispatch(Object(f.A)()),this.props.dispatch(Object(f.A)()),this.props.dispatch(Object(f.Cb)()),this.props.dispatch(Object(f.Ab)()),this.props.dispatch(Object(f.yb)())}},{key:"simpanDataAtrr",value:function(a){var e=this,t={level1:a.level1||"",level2:a.level2||"",level3:a.level3||"",level4:a.level4||"",custome:a.custome||"",kadar:a.kadar||"",pabrik:a.pabrik||"",model:a.model||!1};Object(D.z)("dataattr",t),Object(h.d)("Berhasil Menambahkan Data Attribut !").then(function(){return e.props.dispatch(Object(L.L)())});var n=Object(D.p)("dataattr"),r="-",i="";n.model&&(i="MDL"),0!==n.length&&(r=i+" "+n.level1+" "+n.level2+" "+n.level3+" "+n.level4+" "+n.custome+" "+n.kadar+" "+n.pabrik),this.props.change("atribut",r)}},{key:"tampilModalWebCam",value:function(){this.props.dispatch(Object(z.e)(!1)),this.props.dispatch(Object(f.cc)(!0)),this.setState({ModalWebCam:!0})}},{key:"checkQty",value:function(a){if(""!==a){var e=document.getElementById("qty").value;if(""===e)return this.setState({cekStatus:!0}),Object(h.e)("info","Qty Tidak Boleh Kosong"),this.props.change("jumlah_barang",0),!1;if(this.setState({cekStatus:!1}),parseInt(a)>parseInt(e))return this.setState({cekStatus:!0}),Object(h.e)("info","Jumlah Tidak Boleh Lebih Dari Qty"),this.props.change("jumlah_barang",0),!1;this.setState({cekStatus:!1})}}},{key:"carikategori",value:function(a){var e=this;Object(L.F)("kirim-labeling?kode_toko="+this.state.stock_input+"&no_kirim="+this.state.no_kirim+"&kode_dept="+a).then(function(a){document.getElementById("sales_pabrik_bos").focus(),e.props.change("kode_group",a.data.kode_group),e.props.change("qty_bos",a.data.stock_akhir),e.props.change("berat_bos",a.data.berat_akhir.toFixed(3)),e.props.change("sales_pabrik_bos",void 0===a.data.sales_parbik?"-":a.data.sales_parbik)}).catch(function(a){var e;console.log(a),Object(h.e)("info",(null===(e=a.response)||void 0===e?void 0:e.data.message)||"Terjadi Kesalahan Saat Request Data")})}},{key:"componentDidUpdate",value:function(){this.props.change("stock_input","NISA1"),this.props.change("gudang","TOKO"),this.props.change("kadar",100),this.props.change("atribut","0")}},{key:"render",value:function(){var a=this;return L.p.createElement(L.p.Fragment,null,L.p.createElement(L.m,null,L.p.createElement(L.o,null,"Filter Pencarian Barang"),L.p.createElement(L.n,null,L.p.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off",onKeyPress:function(a){"Enter"===a.key&&a.preventDefault()}},L.p.createElement("div",{className:"row"},L.p.createElement("div",{className:"col-lg-8"},L.p.createElement("div",{className:"row"},L.p.createElement("div",{className:"col-lg-4"},L.p.createElement(L.e,{name:"gudang",onChange:function(e){return a.setState({kode_gudang:e})},component:L.s,options:this.props.DataGudang.map(function(a){return{value:a.kode_gudang,name:a.kode_gudang}}),label:"Gudang",placeholder:"Silahkan Pilih Gudang"})),L.p.createElement("div",{className:"col-lg-4"},L.p.createElement(L.e,{name:"baki",component:L.s,options:this.props.DataBaki.filter(function(e){return e.kode_gudang===a.state.kode_gudang}).map(function(a){return{value:a.kode_baki,name:a.kode_baki}}),onChange:function(){return document.getElementById("nama_barang").focus()},label:"Kode Baki",placeholder:"Silahkan Pilih Kode Baki"})),L.p.createElement("div",{className:"col-lg-4"},L.p.createElement(L.e,{name:"kode_group",component:L.s,options:this.props.DataGroup.map(function(a){return{value:a.kode_group,name:a.kode_group+" - "+a.nama_group}}),onChange:function(){return document.getElementById("nama_barang").focus()},label:"Kode Group",placeholder:"Silahkan Pilih Kode Group"})),L.p.createElement("div",{className:"col-lg-4"},L.p.createElement(L.e,{name:"kode_jenis",component:L.s,options:this.props.DataJenis.map(function(a){return{value:a.kode_dept,name:a.kode_dept+" - "+a.nama_dept}}),onChange:function(){return document.getElementById("nama_barang").focus()},label:"Kode Jenis",placeholder:"Silahkan Pilih Kode Jenis"})),L.p.createElement("div",{className:"col-lg-8"}),L.p.createElement("div",{className:"col-lg-8"},L.p.createElement(L.e,{id:"nama_barang",name:"nama_barang",component:L.r,label:"Nama Barang",placeholder:"Masukan Nama Barang"})),L.p.createElement("div",{className:"col-lg-4"},L.p.createElement(L.e,{id:"kadar_modal",name:"kadar_modal",component:L.r,label:"Kadar Modal",placeholder:"Masukan Kadar Modal"})),L.p.createElement("div",{className:"col-lg-8"},L.p.createElement(L.e,{name:"atribut",component:L.r,label:"Nama Atribut",placeholder:"Masukan Atribut"})),L.p.createElement("div",{className:"col-lg-4"},L.p.createElement(L.e,Object.assign({name:"harga_atribut",component:L.r,label:"Harga Atribut"},Y,{placeholder:"Masukan Harga Atribut"}))),L.p.createElement("div",{className:"col-lg-6 d-none"},L.p.createElement(L.e,{name:"kadar_cetak",component:L.r,label:"Kadar Cetak",normalize:L.f,placeholder:"Masukan Kadar Cetak"})),L.p.createElement("div",{className:"col-lg-4 d-none"},L.p.createElement(L.e,{name:"kadar",component:L.r,label:"Kadar",normalize:L.f,placeholder:"Masukan Kadar"})),L.p.createElement("div",{className:"col-lg-6"},L.p.createElement(L.e,{name:"berat_asli",component:L.r,label:"Berat Asli",normalize:L.f,placeholder:"Masukan Berat"})),L.p.createElement("div",{className:"col-lg-4 d-none"},L.p.createElement(L.e,{name:"berat_atribut",component:L.r,label:"Berat Atribut",normalize:L.f,placeholder:"Masukan Berat Atribut"})),L.p.createElement("div",{className:"col-lg-8"}),L.p.createElement("div",{className:"col-lg-6"},L.p.createElement(L.e,{name:"is_markis",onChange:function(e){return a.setState({kode_gudang:e})},component:L.s,options:[{value:"TRUE",name:"MARKIS"},{value:"FALSE",name:"NORMAL"}],label:"Markis",placeholder:"Silahkan Pilih Markis"})),L.p.createElement("div",{className:"col-lg-6"},L.p.createElement(L.e,{name:"kode_intern",component:L.r,label:"Kode Intern",placeholder:"Masukan Kode Intern"})))),L.p.createElement("div",{className:"col-lg-4"},L.p.createElement("div",{className:"row"},L.p.createElement("div",{className:"col-lg-1 text-center"}," \xa0 "),L.p.createElement("div",{className:"col-lg-4 text-center"},!0===this.props.modalwebcam&&!1===this.props.setCamera?L.p.createElement("div",{className:"container"},this.loadcamera()):L.p.createElement(L.p.Fragment,null,L.p.createElement("img",{src:void 0===this.props.foto?!1===this.props.setCamera?L.M:this.props.setCamera:this.props.setCamera?this.props.setCamera:this.props.foto,alt:"img",height:"245px",width:"300px"})))),L.p.createElement("div",{className:"row mt-2"},L.p.createElement("div",{className:"col-lg-12 mb-8"},L.p.createElement("div",{className:"row"},L.p.createElement("div",{className:"col-6"},L.p.createElement("button",{className:"btn btn-block btn-primary",type:"button",onClick:function(){return a.tampilModalWebCam(a.props)}}," ","Ambil Foto"," ")),L.p.createElement("div",{className:"col-6"},L.p.createElement("button",{className:"btn btn-block btn-warning",type:"button",onClick:function(){return a.resetKamera()}},"Reset")))))),L.p.createElement("div",{className:"col-lg-12"},L.p.createElement("div",{className:"row justify-content-end"},L.p.createElement("div",{className:"col-6"},L.p.createElement("button",{type:"submit",disabled:this.state.cekStatus,className:"btn btn-primary btn-block mt-1"},L.p.createElement("i",{className:"fa fa-plus"})," Simpan"," ")," "),L.p.createElement("div",{className:"col-6"},L.p.createElement("button",{type:"button",onClick:function(){return a.props.kembali()},className:"btn btn-block btn-secondary mt-1"},"Kembali"," "))))))),L.p.createElement(L.k,{title:!0===this.state.showModalForm?"Tambah Data Barang Banyak":"Form Data Atribut",content:!0===this.state.showModalForm?L.p.createElement(I,{FormBatal:function(){return a.FormBatal(!0)}}):L.p.createElement(W,{FormBatal:function(){return a.FormBatal(!1)},onSubmit:function(e){return a.simpanDataAtrr(e)}})})),this.state.loadingData?L.p.createElement(L.j,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}]),t}(L.c);Q=Object(L.Z)({form:"FormTambahDataBarang",enableReinitialize:!0,destroyOnUnmount:!1,validate:H})(Q);var q=Object(L.w)(function(a){return{modalwebcam:a.datamaster.showModalWebcam,foto:a.databarang.showEditBarang.foto,isLoading:a.datamaster.isLoading,setCamera:a.databarang.setCamera,hideModal:a.datamaster.modalDialog,DataGroup:a.datamaster.GetDataGroup,DataJenis:a.datamaster.getDataJenis,DataGudang:a.datamaster.getDataGudang,DataBaki:a.datamaster.getDataBaki,initialValues:{is_markis:"FALSE"}}})(Q),V=Object(s.lazy)(function(){return t.e(45).then(t.bind(null,1236))}),Z=function(a){Object(l.a)(t,a);var e=Object(c.a)(t);function t(a){var n;return Object(r.a)(this,t),(n=e.call(this,a)).state={isEdit:!1,modalDialog:!1,formTambahBarang:!1,setfocus:!1,formEdit:!1,simpanBarang:!1,loadingData:!1,databarang:[]},n.handleSubmit=n.handleSubmit.bind(Object(o.a)(n)),n}return Object(i.a)(t,[{key:"getBarangKodeBaki",value:function(a){var e=this;this.delayTimer&&clearTimeout(this.delayTimer),this.delayTimer=setTimeout(function(){if(Object(D.v)("databarangall",JSON.stringify([])),e.setState({loadingData:!0}),""===a)return e.setState({loadingData:!1,databarang:[]}),!1;Object(g.d)("barang/get/by-kode-baki?limit=1000&kode_baki="+a).then(function(a){0===a.data.length?(e.setState({databarang:[]}),Object(D.v)("databarangall",JSON.stringify([])),Object(h.e)("info","Kode Baki Yang Dicari Tidak Ada")):(e.setState({databarang:a.data}),Object(D.v)("databarangall",JSON.stringify(a.data))),e.setState({loadingData:!1})}).catch(function(a){e.setState({loadingData:!1,databarang:[]}),Object(g.a)(a.message)&&(e.setState({loadingData:!1,databarang:[]}),Object(D.v)("databarangall",JSON.stringify([])),Object(h.e)("info","Kode Baki Yang Dicari Tidak Ada"))})},1500)}},{key:"showEditBarang",value:function(a){var e=this;Object(D.o)("foto_produk/"+a.kode_barcode).then(function(t){var n={foto:t,kode_barcode:a.kode_barcode,nama_barang:a.nama_barang,nama_atribut:a.nama_atribut,harga_atribut:a.harga_atribut,kode_intern:a.kode_intern,kadar:a.kadar,kadar_cetak:a.kadar_cetak,tipe_barang:a.tipe_barang};e.props.dispatch(Object(k.x)(n)),setTimeout(function(){e.props.dispatch(Object(f.Zb)())},500)}).catch(function(t){var n={kode_barcode:a.kode_barcode,nama_barang:a.nama_barang,nama_atribut:a.nama_atribut,harga_atribut:a.harga_atribut,kode_intern:a.kode_intern,kadar:a.kadar,kadar_cetak:a.kadar_cetak};e.props.dispatch(Object(k.x)(n)),setTimeout(function(){e.props.dispatch(Object(f.Zb)())},500)})}},{key:"getKodeBarcode",value:function(a){var e=this;a.length>=8&&(this.delayTimer&&clearTimeout(this.delayTimer),this.delayTimer=setTimeout(function(){if(Object(D.v)("databarangall",JSON.stringify([])),e.setState({loadingData:!0}),""===a)return e.setState({loadingData:!1,databarang:[]}),!1;Object(g.d)("barang/open/kode-barcode?limit=1000&kode_barcode="+a).then(function(a){0===a.data.length?(e.setState({databarang:[]}),Object(D.v)("databarangall",JSON.stringify([])),Object(h.e)("info","Kode Barcode Yang Dicari Tidak Ada")):(e.setState({databarang:a.data}),Object(D.v)("databarangall",JSON.stringify(a.data))),e.setState({loadingData:!1})}).catch(function(a){e.setState({loadingData:!1,databarang:[]}),Object(g.a)(a.message)&&(e.setState({loadingData:!1,databarang:[]}),Object(D.v)("databarangall",JSON.stringify([])),Object(h.e)("info","Kode Barcode Yang Dicari Tidak Ada"))})},1500))}},{key:"getKodeBarcodenoTimout",value:function(a){var e=this;if(Object(D.v)("databarangall",JSON.stringify([])),this.setState({loadingData:!0}),""===a)return this.setState({loadingData:!1,databarang:[]}),!1;Object(g.d)("barang/open/kode-barcode?limit=1000&kode_barcode="+a).then(function(a){0===a.data.length?(e.setState({databarang:[]}),Object(D.v)("databarangall",JSON.stringify([])),Object(h.e)("info","Kode Barcode Yang Dicari Tidak Ada")):(e.setState({databarang:a.data}),Object(D.v)("databarangall",JSON.stringify(a.data))),e.setState({loadingData:!1})}).catch(function(a){e.setState({loadingData:!1,databarang:[]}),Object(g.a)(a.message)&&(e.setState({loadingData:!1,databarang:[]}),Object(D.v)("databarangall",JSON.stringify([])),Object(h.e)("info","Kode Barcode Yang Dicari Tidak Ada"))})}},{key:"getNamaBarang",value:function(a){var e=this;this.delayTimer&&clearTimeout(this.delayTimer),this.delayTimer=setTimeout(function(){if(Object(D.v)("databarangall",JSON.stringify([])),e.setState({loadingData:!0}),""===a)return e.setState({loadingData:!1,databarang:[]}),!1;Object(g.d)("barang/get/by-nama-barang?limit=1000&nama_barang="+a).then(function(a){0===a.data.length?(e.setState({databarang:[]}),Object(D.v)("databarangall",JSON.stringify([])),Object(h.e)("info","Nama Barang Yang Dicari Tidak Ada")):(e.setState({databarang:a.data}),Object(D.v)("databarangall",JSON.stringify(a.data))),e.setState({loadingData:!1})}).catch(function(a){e.setState({loadingData:!1,databarang:[]}),Object(g.a)(a.message)&&(e.setState({loadingData:!1,databarang:[]}),Object(D.v)("databarangall",JSON.stringify([])),Object(h.e)("info","Nama Barang Yang Dicari Tidak Ada"))})},1500)}},{key:"showFormTambahDataBarang",value:function(){this.setState({formTambahBarang:!0})}},{key:"getByKodeGroup",value:function(a){var e=this;this.delayTimer&&clearTimeout(this.delayTimer),this.delayTimer=setTimeout(function(){if(Object(D.v)("databarangall",JSON.stringify([])),e.setState({loadingData:!0}),""===a)return e.setState({loadingData:!1,databarang:[]}),!1;Object(g.d)("barang/get/by-kode-group?limit=1000&kode_group="+a).then(function(a){0===a.data.length?(e.setState({databarang:[]}),Object(D.v)("databarangall",JSON.stringify([])),Object(h.e)("info","Kode Group Yang Dicari Tidak Ada")):(e.setState({databarang:a.data}),Object(D.v)("databarangall",JSON.stringify(a.data))),e.setState({loadingData:!1})}).catch(function(a){e.setState({loadingData:!1,databarang:[]}),Object(g.a)(a.message)&&(e.setState({loadingData:!1,databarang:[]}),Object(D.v)("databarangall",JSON.stringify([])),Object(h.e)("info","Kode Group Yang Dicari Tidak Ada"))})},1500)}},{key:"handleSubmit",value:function(a){var e=this;this.setState({isLoading:!0});var t={nama_barang:a.nama_barang,nama_atribut:a.nama_atribut||"-",harga_atribut:a.harga_atribut||0,kode_intern:a.kode_intern,kadar:a.kadar,kadar_cetak:a.kadar_cetak,tipe_barang:a.tipe_barang},n=void 0===a.foto?a.foto_lama:Object(D.j)(a.foto);Object(g.k)("barang/edit/"+a.kode_barcode,t).then(function(){e.props.dispatch(Object(A.d)("FIlterPencarianBarang")),e.getKodeBarcodenoTimout(a.kode_barcode),e.props.dispatch(Object(k.u)(!0)),e.props.dispatch(Object(f.Ub)())}).then(function(){void 0!==a.foto&&Object(D.x)(n,"foto_produk/"+a.kode_barcode).then(function(a){}).catch(function(a){Object(h.e)("info","upload Foto Gagal, Silahkan Edit Didata Barang")})}).then(function(){e.setState({databarang:[]}),e.props.dispatch(Object(A.d)("HeadEditDataBarang")),e.props.dispatch(Object(k.x)([])),e.props.dispatch(Object(k.t)(!1))}).then(function(){Object(h.e)("success","Data Berhasil Disimpan")}).then(function(){e.setState({isLoading:!1})}).catch(function(a){e.setState({isLoading:!1}),Object(h.e)("info","Barang Gagal Di Edit")})}},{key:"simpanDataBarang",value:function(a){var e=this;if(void 0===a.berat_asli)return Object(h.e)("info","Berat Harus Diisi"),!1;this.props.dispatch(Object(f.Wb)(!0)),this.setState({simpanBarang:!0});var t=Object(D.u)("kadar_type"),r=void 0!==a.foto?Object(D.j)(a.foto):void 0,i={kode_group:a.kode_group||"-",kode_dept:a.kode_jenis||"-",kode_gudang:a.gudang||"-",kode_toko:a.baki||"-",kode_baki_label:"-",kode_intern:a.kode_intern||"-",nama_barang:a.nama_barang||"-",berat:parseFloat(a.berat_asli)||0,berat_asli:parseFloat(a.berat_asli)||0,kadar_modal:parseFloat(a.kadar_emas)||0,kadar:parseInt(100)||0,kadar_cetak:a.kadar_cetak||"0",nama_atribut:a.atribut||"-",tipe_barang:t||"SP",berat_atribut:parseFloat(a.berat_atribut)||0,berat_plastik:0,berat_susut:0,berat_cad:0,tujuan:"-",harga_atribut:a.harga_atribut||0,tag_id:a.stock_input||"-",berat_bandrol:0,no_pesanan:"-",id_barang_pesanan:"-",no_kirim_bos:"-",qty_input:parseInt(a.jumlah_barang)||1,is_markis:"TRUE"===a.is_markis};Object(g.l)("tambah-barang/create",i).then(function(a){var t,i=Object(n.a)(a.data.kode_barcode);try{for(i.s();!(t=i.n()).done;){var o=t.value;void 0!==r&&Object(D.x)(r,"foto_produk/"+o).then(function(a){}).catch(function(a){Object(h.e)("info","upload Foto Gagal, Silahkan Edit Didata Barang")})}}catch(l){i.e(l)}finally{i.f()}Object(h.e)("success",a.data.message),e.props.dispatch(Object(A.d)("FormTambahDataBarang"))}).then(function(){e.props.dispatch(Object(f.Wb)(!1)),e.props.dispatch(Object(k.t)(!1)),e.props.dispatch(Object(A.d)("FormDataAtribut")),localStorage.removeItem("dataattr"),e.setState({simpanBarang:!1})}).catch(function(a){var t;e.props.dispatch(Object(f.Wb)(!1)),e.setState({simpanBarang:!1}),Object(h.e)("info",(null===(t=a.response)||void 0===t?void 0:t.data.message)||"Terjadi Kesalhaan Saat Mengirim Data")})}},{key:"kembali",value:function(){this.setState({formTambahBarang:!1})}},{key:"render",value:function(){var a=this,e=[{dataField:"kode_barcode",text:"Kode Barcode"},{dataField:"tipe_barang",text:"Tipe Barang"},{dataField:"kode_group",text:"Kode Group"},{dataField:"kode_toko",text:"Kode Baki"},{dataField:"kode_dept",text:"Kode Jenis"},{dataField:"nama_barang",text:"Nama Barang"},{dataField:"berat",text:"Berat",headerClasses:"text-right",formatter:function(a){return d.a.createElement("div",{className:"text-right"}," ",null===a?a:a.toFixed(3)," ")}},{dataField:"input_date",text:"Tgl Input"},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:function(e,t){return d.a.createElement("div",{className:"row text-center"},d.a.createElement("div",{className:"col-12"},d.a.createElement("button",{type:"button",onClick:function(){return a.showEditBarang(t)},className:"btn btn-primary mr-3"},d.a.createElement("i",{className:"fa fa-edit"}))))}}],t={renderer:function(a){return d.a.createElement("div",{className:"container"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-12"},"Nama Atribut : ",a.nama_atribut," ",d.a.createElement("br",null),"Betat Atribut : ",a.berat_atribut," ",d.a.createElement("br",null),"Harga Atribut : ",a.harga_atribut," ",d.a.createElement("br",null),"Kode Intern : ",a.kode_intern," ",d.a.createElement("br",null),"Kadar : ",a.kadar," ",d.a.createElement("br",null),"Kadar Cetak : ",a.kadar_cetak," ",d.a.createElement("br",null),"Kode Toko : ",a.kode_toko," ",d.a.createElement("br",null),"Kode Gudang : ",a.kode_gudang," ",d.a.createElement("br",null),"Stock : ",a.stock_on_hand," ",d.a.createElement("br",null))))},showExpandColumn:!0,expandByColumnOnly:!0};return d.a.createElement("div",null,d.a.createElement("ol",{className:"breadcrumb float-xl-right"},d.a.createElement("li",{className:"breadcrumb-item"},d.a.createElement(m.b,{to:"#"},"Barang")),d.a.createElement("li",{className:"breadcrumb-item active"},!0===this.state.formTambahBarang?"Tambah Data Barang":"Data Barang"," ")),d.a.createElement("h1",{className:"page-header"},!0===this.state.formTambahBarang?"Tambah Data Barang":"Data Barang"," "),!0===this.state.formTambahBarang?d.a.createElement(q,{kembali:function(){return a.kembali()},isLoading:this.state.isLoading,onSubmit:function(e){return a.simpanDataBarang(e)}}):d.a.createElement(d.a.Fragment,null,d.a.createElement(p.a,null,d.a.createElement(p.c,null,"Filter Pencarian Barang"),d.a.createElement("br",null),d.a.createElement(p.b,null,d.a.createElement(V,{getKodeBarcode:function(e){return a.getKodeBarcode(e)},getNamaBarang:function(e){return a.getNamaBarang(e)},getByKodeGroup:function(e){return a.getByKodeGroup(e)},getBarangKodeBaki:function(e){return a.getBarangKodeBaki(e)}}))),d.a.createElement(p.a,null,d.a.createElement(p.c,null,this.state.loadingData?d.a.createElement(d.a.Fragment,null," ",d.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Mencari Data Barang"," "):"Data Barang"),d.a.createElement("br",null),d.a.createElement(p.b,null,d.a.createElement(u.a,{btnText:"Tambah Data Barang",handleClick:function(){return a.showFormTambahDataBarang()},tambahData:!0,keyField:"kode_barang",exportCsv:!0,data:this.state.databarang,columns:e,empty:!0,textEmpty:this.state.loadingData?d.a.createElement(d.a.Fragment,null," ",d.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Mencari Data Barang"):"Data Barang Kosong",expandRow:t})),d.a.createElement("br",null),d.a.createElement(F.a,{title:"Edit Barang",content:d.a.createElement(M,{isLoading:this.state.isLoading,onSubmit:function(e){return a.handleSubmit(e)}})}))),this.state.loadingData?d.a.createElement(J.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null,this.state.simpanBarang?d.a.createElement(J.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}]),t}(d.a.Component);e.default=Object(b.b)(function(a){return{showEditBarang:a.databarang.showEditBarang,hideModal:a.datamaster.modalDialog}},null)(Z)}}]);
//# sourceMappingURL=44.5ca9b68c.chunk.js.map