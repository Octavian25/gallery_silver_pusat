{"version":3,"sources":["pages/Sepuhan/TerimaBarangSepuh/HeadTerimaSepuh.jsx","pages/Sepuhan/TerimaBarangSepuh/index.jsx"],"names":["HeadTerimaSepuh","props","_this","Object","classCallCheck","this","_super","call","state","isLoadingReset","isLoadingSimpanDataTerima","disabled","isShowingMore","databarang","columns","dataField","text","editable","headerClasses","formatter","data","react_default","a","createElement","className","undefined","toFixed","e","_this2","clearTimeout","delayTimer","setTimeout","setState","loadingData","getDataNoTimeOut2","then","res","length","ToastNotification","setItem","catch","err","document","getElementById","focus","date","tanggal_kirim","Date","_this3","_this4","onSubmit","handleSubmit","onKeyPress","key","preventDefault","autoComplete","Field","label","id","name","placeholder","component","ReanderField","onChange","getDataKirimSepuh","target","value","lib_default","keyField","getItem","cellEdit","cellEditFactory","mode","blurToSave","afterSaveCell","oldValue","newValue","row","column","hasil","parseFloat","berat_sepuh","berat_terima","isi","tgl_system","no_sepuh","kode_baki","kode_dept","kode_group","qty_sepuh","qty_terima","berat_rusak","qty_rusak","berat_selisih","Number","cek","hasil_cek","findIndex","push","Berhasil","type","isLoading","Fragment","onClick","reset","data-tut","loading_default","loading","background","loaderColor","Component","reduxForm","form","enableReinitialize","connect","initialValues","tanggal_terima","getToday","TerimaBarangSepuh","closeTour","isTourOpen","openTour","detail_sepuh","forEach","element","parseInt","berat_timbangan","nokirim_sepuh_sepuh","getTglSystem","total_qty","reduce","b","total_berat","total_qty_rusak","total_berat_rusak","total_qty_terima","total_berat_terima","total_berat_timbang","postDataNoTImeOut2","console","log","message","dispatch","datasepuh","index","feedback","concat","buktiSlip","no_terima_sepuh","tgl_terima","jenis","baki","join","file","Blob","href","URL","createObjectURL","download","body","appendChild","click","_err$response","response","style","display","rows","cols","react_router_dom","to","panel","TerimaBarangSepuh_HeadTerimaSepuh","React"],"mappings":"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","file":"static/js/120.a34911c7.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Field, reduxForm } from \"redux-form\";\r\nimport { getToday,setItem,getItem } from \"../../../components/helpers/function\";\r\nimport { ReanderField } from \"../../../components/helpers/field.jsx\";\r\nimport { getDataNoTimeOut2 } from \"../../../config/axios\";\r\nimport { ToastNotification } from \"../../../components/helpers/notification\";\r\nimport Loading from \"react-fullscreen-loading\";\r\nimport BootstrapTable from \"react-bootstrap-table-next\";\r\nimport cellEditFactory from \"react-bootstrap-table2-editor\";\r\n\r\nconst maptostate = (state) => {\r\n  return {\r\n    initialValues: {\r\n      tanggal_terima: getToday(),\r\n    },\r\n  };\r\n};\r\nclass HeadTerimaSepuh extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isLoadingReset: false,\r\n      isLoadingSimpanDataTerima: false,\r\n      disabled: true,\r\n      isShowingMore: false,\r\n      databarang: [],\r\n      columns: [\r\n        {\r\n          dataField: \"kode_baki\",\r\n          text: \"Baki\",\r\n          editable: false,\r\n        },\r\n        {\r\n          dataField: \"kode_dept\",\r\n          text: \"Jenis\",\r\n          editable: false,\r\n        },\r\n        {\r\n          dataField: \"qty_sepuh\",\r\n          text: \"Qty Sepuh\",\r\n          editable: false,\r\n          headerClasses: 'text-right',\r\n          formatter: (data) => {\r\n            return <div className=\"text-right\"> {data === undefined || null ? 0 : data}</div>;\r\n          },\r\n        },\r\n        {\r\n          dataField: \"berat_sepuh\",\r\n          text: \"Berat Sepuh\",\r\n          editable: false,\r\n          headerClasses: 'text-right',\r\n          formatter: (data) => {\r\n            return <div className=\"text-right\"> {data === undefined || null ? 0 : data.toFixed(2)}</div>;\r\n          },\r\n        },\r\n        {\r\n          dataField: \"berat_terima\",\r\n          text: \"Berat Terima\",\r\n          headerClasses: 'text-right',\r\n          formatter: (data) => {\r\n            return <div className=\"text-right\"> {data === undefined || null ? 0 : data.toFixed(2)}</div>;\r\n          },\r\n        },\r\n        {\r\n          dataField: \"qty_terima\",\r\n          text: \"Qty Terima\",\r\n          headerClasses: 'text-right',\r\n          formatter: (data) => {\r\n            return <div className=\"text-right\"> {data === undefined || null ? 0 : data}</div>;\r\n          },\r\n        },\r\n       \r\n        {\r\n          dataField: \"berat_rusak\",\r\n          text: \"Berat Rusak\",\r\n          headerClasses: 'text-right',\r\n          formatter: (data) => {\r\n            return <div className=\"text-right\"> {data === undefined || null ? 0 : data.toFixed(2)}</div>;\r\n          },\r\n        },\r\n        {\r\n          dataField: \"qty_rusak\",\r\n          text: \"Qty Rusak\",\r\n          headerClasses: 'text-right',\r\n          formatter: (data) => {\r\n            return <div className=\"text-right\"> {data === undefined || null ? 0 : data}</div>;\r\n          },\r\n        },\r\n       \r\n        {\r\n          dataField: \"berat_selisih\",\r\n          text: \"Berat Selisih\",\r\n          headerClasses: 'text-right',\r\n          formatter: (data) => {\r\n            return <div className=\"text-right\"> {data === undefined || null ? 0 : data}</div>;\r\n          },\r\n          editable: false,\r\n        },\r\n      ],\r\n    };\r\n  }\r\n\r\n  getDataKirimSepuh(e) {\r\n    clearTimeout(this.delayTimer);\r\n    this.delayTimer = setTimeout(() => {\r\n      this.setState({ loadingData: true });\r\n      if (e === \"\") {\r\n        this.setState({ loadingData: false });\r\n        return false;\r\n      }\r\n      getDataNoTimeOut2(\"kirim-sepuh?no_sepuh=\" + e)\r\n        .then((res) => {\r\n          if (res.data.length === 0) {\r\n            ToastNotification(\"info\", \"Data Kosong !\");\r\n            setItem(\"data_terima_barang_sepuh\", [])\r\n            this.setState({ loadingData: false });\r\n            return false;\r\n          }\r\n          \r\n          setItem(\"data_terima_barang_sepuh\", res.data)\r\n          this.setState({\r\n            loadingData: false,\r\n          });\r\n        })\r\n        .catch((err) => {\r\n          setItem(\"data_terima_barang_sepuh\", [])\r\n          this.setState({\r\n            loadingData: false,\r\n          });\r\n          ToastNotification(\"info\", \"Data Kosong !\");\r\n        });\r\n    }, 1500);\r\n  }\r\n\r\n  componentDidMount() {\r\n    setItem(\"data_terima_barang_sepuh\",[])\r\n    setTimeout(() => {\r\n        document.getElementById(\"nokirim_sepuh_sepuh\").focus()\r\n    }, 100);\r\n  }\r\n  setStartDate(date) {\r\n    this.setState({\r\n      tanggal_kirim: new Date(date),\r\n    });\r\n  }\r\n  reset(){\r\n    this.setState({\r\n      isLoadingReset : true\r\n    });\r\n\r\n    setTimeout(() => {\r\n      setItem(\"data_terima_barang_sepuh\",[])\r\n      this.setState({\r\n        isLoadingReset : false\r\n      })\r\n    }, 200);\r\n  }\r\n  render() {\r\n    return (\r\n      <form\r\n        onSubmit={this.props.handleSubmit}\r\n        onKeyPress={(e) => {\r\n          e.key === \"Enter\" && e.preventDefault();\r\n        }}\r\n        autoComplete=\"off\"\r\n      >\r\n        <div className=\"row\">\r\n          <div className=\"col-10\">\r\n            <div className=\"row\">\r\n              <div className=\"col-4\">\r\n                <Field\r\n                  label=\"No Kirim Sepuh\"\r\n                  id=\"nokirim_sepuh_sepuh\"\r\n                  name=\"nokirim_sepuh_sepuh\"\r\n                  placeholder=\"Silahkan Pilih No Kirim\"\r\n                  component={ReanderField}\r\n                  onChange={(e) => this.getDataKirimSepuh(e.target.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {/* <div className=\"col-5 text-right\">\r\n              <button className=\"btn btn-success\">Terima</button>\r\n            </div> */}\r\n        </div>\r\n        &nbsp;\r\n        <BootstrapTable\r\n          keyField=\"kode_dept\"\r\n          data={getItem(\"data_terima_barang_sepuh\") || []}\r\n          columns={this.state.columns || []}\r\n          cellEdit={cellEditFactory({\r\n            mode: \"click\",\r\n            blurToSave: true,\r\n            afterSaveCell: (oldValue, newValue, row, column) => {\r\n              let hasil = parseFloat(row.berat_sepuh) - parseFloat(row.berat_terima)\r\n              let isi = 0;\r\n              if(hasil < 0){\r\n                ToastNotification(\"info\",\"Berat Terima Tidak Boleh Melebih Dari Berat Sepuh\")\r\n              }else{\r\n                isi = (parseFloat(row.berat_sepuh) - parseFloat(row.berat_terima)).toFixed(2) || 0\r\n              }\r\n              let data = {\r\n                tgl_system: row.tgl_system,\r\n                no_sepuh: row.no_sepuh,\r\n                kode_baki: row.kode_baki,\r\n                kode_dept: row.kode_dept,\r\n                kode_group: row.kode_group,\r\n                qty_sepuh: row.qty_sepuh,\r\n                qty_terima: row.qty_terima,\r\n                berat_sepuh: row.berat_sepuh,\r\n                berat_terima: row.berat_terima,\r\n                berat_rusak: row.berat_rusak,\r\n                qty_rusak: row.qty_rusak,\r\n                berat_selisih: isi\r\n              };\r\n\r\n              switch (column.dataField) {\r\n                case \"berat_terima\":\r\n                  if(hasil < 0){\r\n                    data[\"berat_terima\"] = 0\r\n                  }else{\r\n                    data[\"berat_terima\"] = Number(newValue);\r\n                  }\r\n                  break;\r\n\r\n                case \"qty_sepuh\":\r\n                  data[\"qty_sepuh\"] = Number(newValue);\r\n                  break;\r\n\r\n                case \"qty_terima\":\r\n                  if(Number(newValue) + row.qty_rusak !== row.qty_sepuh){\r\n                    ToastNotification(\"info\", \"Harap Masukan Qty Dengan Benar\")\r\n                    this.setState({\r\n                      disabled : true\r\n                    })\r\n                   return false; \r\n                  }else{\r\n                    data[\"qty_terima\"] = Number(newValue);\r\n                    this.setState({\r\n                      disabled : false\r\n                    })\r\n                  }\r\n                  break;\r\n\r\n                case \"berat_rusak\":\r\n                  data[\"berat_rusak\"] = Number(newValue);\r\n                  break;\r\n\r\n                case \"qty_rusak\":\r\n                  data[\"qty_rusak\"] = Number(newValue);\r\n                  break;\r\n\r\n\r\n                default:\r\n                  break;\r\n              }\r\n\r\n              let cek = getItem(\"data_terima_barang_sepuh\").length === 0 ? [] : getItem(\"data_terima_barang_sepuh\");\r\n              let hasil_cek = cek.findIndex(\r\n                (hasil) => hasil.kode_dept === data.kode_dept\r\n              );\r\n              if (hasil_cek === -1) {\r\n                cek.push(data);\r\n                setItem(\"data_terima_barang_sepuh\",cek)\r\n                this.setState({\r\n                  Berhasil : true\r\n                })\r\n\r\n              } else {\r\n                cek[hasil_cek] = data;\r\n                setItem(\"data_terima_barang_sepuh\",cek)\r\n                this.setState({\r\n                  Berhasil : true\r\n                })\r\n              }\r\n            },\r\n          })}\r\n        />\r\n        <div className=\"row\">\r\n          <div className=\"col-12 text-right\">\r\n            <button type=\"submit\" disabled={this.state.disabled} className=\"btn btn-primary\">\r\n               {this.props.isLoading ? (\r\n                <>\r\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Sedang\r\n                  Menuimpan\r\n                </>\r\n              ) : (\r\n                \"Simpan\"\r\n              )}\r\n            </button> \r\n            &nbsp;\r\n            <button type=\"button\" onClick={()=>this.reset()} data-tut=\"resetData\" className=\"btn btn-warning\">\r\n            {this.props.isLoadingReset ? (\r\n                <>\r\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Reset\r\n                </>\r\n              ) : (\r\n                \"Reset\"\r\n              )}\r\n            </button>\r\n          </div>\r\n        </div>\r\n        {this.state.loadingData ? (\r\n          <Loading\r\n            loading\r\n            background=\"rgba(0, 0, 0, 0.35)\"\r\n            loaderColor=\"rgba(94, 147, 117, 1)\"\r\n          />\r\n        ) : null}\r\n        {this.state.isLoadingReset ? (\r\n          <Loading\r\n            loading\r\n            background=\"rgba(0, 0, 0, 0.35)\"\r\n            loaderColor=\"rgba(94, 147, 117, 1)\"\r\n          />\r\n        ) : null}\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nHeadTerimaSepuh = reduxForm({\r\n  form: \"HeadTerimaSepuh\",\r\n  enableReinitialize: true,\r\n  // validate: HeadStockPembelian,\r\n})(HeadTerimaSepuh);\r\nexport default connect(maptostate)(HeadTerimaSepuh);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { reduxForm, reset } from \"redux-form\";\r\nimport {\r\n  Panel,\r\n  PanelHeader,\r\n  PanelBody,\r\n} from \"../../../components/panel/panel.jsx\";\r\nimport HeadTerimaSepuh from \"./HeadTerimaSepuh.jsx\";\r\nimport {\r\n  getTglSystem,\r\n  getItem,\r\n  ToastNotification,\r\n  postDataNoTImeOut2,\r\n  setItem,\r\n} from \"../../../components/helpers/library\";\r\n// import { disableBodyScroll, enableBodyScroll } from \"body-scroll-lock\";\r\n\r\nclass TerimaBarangSepuh extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isLoading: false,\r\n    };\r\n  }\r\n\r\n  closeTour = () => {\r\n    this.setState({ isTourOpen: false });\r\n  };\r\n\r\n  openTour = () => {\r\n    this.setState({ isTourOpen: true });\r\n  };\r\n\r\n  // disableBody = (target) => disableBodyScroll(target);\r\n  // enableBody = (target) => enableBodyScroll(target);\r\n  handleSubmit(data) {\r\n    let detail_sepuh = [];\r\n    this.setState({\r\n      isLoading: true,\r\n    });\r\n    getItem(\"data_terima_barang_sepuh\").forEach((element) => {\r\n      let row = {\r\n        kode_baki: element.kode_baki,\r\n        kode_dept: element.kode_dept,\r\n        kode_group: element.kode_group,\r\n        qty_sepuh: parseInt(element.qty_sepuh),\r\n        berat_timbangan: parseFloat(element.berat_sepuh),\r\n        berat_terima: parseFloat(element.berat_terima),\r\n        qty_terima: parseInt(element.qty_terima),\r\n        berat_rusak: parseFloat(element.berat_rusak),\r\n        qty_rusak: parseInt(element.qty_rusak),\r\n        berat_selisih: parseFloat(element.berat_selisih),\r\n      };\r\n      detail_sepuh.push(row);\r\n    });\r\n\r\n    let hasil = {\r\n      no_sepuh: data.nokirim_sepuh_sepuh,\r\n      tgl_system: getTglSystem(),\r\n      detail_sepuh: detail_sepuh,\r\n      total_qty: getItem(\"data_terima_barang_sepuh\").reduce(\r\n        (a, b) => a + b.qty_sepuh,\r\n        0\r\n      ),\r\n      total_berat: getItem(\"data_terima_barang_sepuh\").reduce(\r\n        (a, b) => a + b.berat_sepuh,\r\n        0\r\n      ),\r\n      total_qty_rusak: getItem(\"data_terima_barang_sepuh\").reduce(\r\n        (a, b) => a + b.qty_rusak,\r\n        0\r\n      ),\r\n      total_berat_rusak: getItem(\"data_terima_barang_sepuh\").reduce(\r\n        (a, b) => a + b.berat_rusak,\r\n        0\r\n      ),\r\n      total_qty_terima: getItem(\"data_terima_barang_sepuh\").reduce(\r\n        (a, b) => a + b.qty_terima,\r\n        0\r\n      ),\r\n      total_berat_terima: getItem(\"data_terima_barang_sepuh\").reduce(\r\n        (a, b) => a + b.berat_terima,\r\n        0\r\n      ),\r\n      total_berat_timbang: getItem(\"data_terima_barang_sepuh\").reduce(\r\n        (a, b) => a + b.berat_sepuh,\r\n        0\r\n      ),\r\n    };\r\n  \r\n    postDataNoTImeOut2(\"terima-sepuh\", hasil)\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        ToastNotification(\"success\", res.data.message);\r\n        setItem(\"data_terima_barang_sepuh\",[])\r\n        this.setState({\r\n          isLoading: false,\r\n        });\r\n        this.props.dispatch(reset(\"HeadTerimaSepuh\"))\r\n        let datasepuh = [];\r\nfor (let index = 0; index < 2; index++) {\r\nlet feedback = '';\r\nfeedback += `========================================\\n`\r\nfeedback += `            TERIMA SEPUHAN              \\n`\r\nfeedback += `========================================\r\nNo Sepuh         : ${res.data.buktiSlip.no_sepuh}\r\nNo Terima Sepuh  : ${res.data.buktiSlip.no_terima_sepuh}\r\nTgl Terima       : ${res.data.buktiSlip.tgl_terima}`\r\nres.data.buktiSlip.jenis.forEach((row, index) => {\r\nfeedback += `\\n========================================`\r\nrow.baki.forEach((baki, index) => {\r\nif(index > 0){\r\nfeedback += `\r\n                 : ${baki}`\r\n}else{\r\nfeedback += `\r\nKode Baki        : ${baki}`\r\n}\r\n})\r\nfeedback += `\r\nKode Jenis       : ${row.jenis}`\r\nfeedback += `\r\nBerat Rusak      : ${row.berat_rusak}`\r\nfeedback += `\r\nBerat Sepuh      : ${row.berat_sepuh}`\r\nfeedback += `\r\nBerat Terima     : ${row.berat_terima}`\r\nfeedback += `\r\nQty Rusak        : ${row.qty_rusak}`\r\nfeedback += `\r\nQty Sepuh        : ${row.qty_sepuh}`\r\nfeedback += `\r\nQty Terima       : ${row.qty_terima}`\r\n})\r\nfeedback += `\\n========================================`\r\nfeedback += `\r\nTotal Qty SP     : ${res.data.buktiSlip.jenis.reduce((a,b)=>a+b.qty_sepuh,0)}\r\nTotal Berat SP   : ${res.data.buktiSlip.jenis.reduce((a,b)=>a+b.berat_sepuh,0)}\r\n`\r\nfeedback += `========================================\\n`\r\nfeedback += `              TERIMA KASIH              \\n`\r\nfeedback += `========================================`\r\nfeedback += `\r\n\r\n\r\n\r\n\r\n\r\n\r\n`\r\ndatasepuh.push(feedback);\r\n}\r\n// console.log(datasepuh);\r\ndocument.getElementById(\"myInput\").value = datasepuh.join('');\r\n      }).then(()=>{\r\nconst element = document.createElement(\"a\");\r\nconst file = new Blob([document.getElementById(\"myInput\").value], {\r\ntype: \"text/plain;charset=utf-8\",\r\n});\r\nelement.href = URL.createObjectURL(file);\r\nelement.download = \"autoprint_kirim_sepuhan.txt\";\r\ndocument.body.appendChild(element);\r\nelement.click();\r\n\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        ToastNotification(\"info\", err.response?.data.message || \"Terjadi Kesalahan Saat Request Data\");\r\n        this.setState({\r\n          isLoading: false,\r\n        });\r\n      });\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n         <textarea\r\n            style={{ display: \"none\" }}\r\n            id=\"myInput\"\r\n            rows=\"100\"\r\n            cols=\"100\"\r\n          />\r\n        <ol className=\"breadcrumb float-xl-right\">\r\n          <li className=\"breadcrumb-item\">\r\n            <Link to=\"#\">Sepuhan</Link>\r\n          </li>\r\n          <li className=\"breadcrumb-item active\">\r\n            Terima Sepuhan\r\n          </li>\r\n        </ol>\r\n        <h1 className=\"page-header\">Terima Sepuhan </h1>\r\n        <Panel>\r\n          <PanelHeader>Terima Sepuhan</PanelHeader>\r\n          <PanelBody>\r\n            <HeadTerimaSepuh\r\n              isLoading={this.state.isLoading}\r\n              onSubmit={(data) => this.handleSubmit(data)}\r\n            />\r\n          </PanelBody>\r\n        </Panel>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nTerimaBarangSepuh = reduxForm({\r\n  form: \"TerimaBarangSepuh\",\r\n  enableReinitialize: true,\r\n})(TerimaBarangSepuh);\r\nexport default connect()(TerimaBarangSepuh);\r\n"],"sourceRoot":""}