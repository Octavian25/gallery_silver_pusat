(window.webpackJsonp=window.webpackJsonp||[]).push([[116],{1273:function(e,a,t){"use strict";t.r(a);var n=t(8),r=t(9),i=t(14),o=t(11),l=t(10),s=t(1),c=t.n(s),m=t(32),d=t(45),p=t(25),u=t(322),g=t(323),h=t(20),b=t(2),k=t(49),f=t(52),E=t.n(f),A=t(6),_=t(58),v=t(16),L=t(19),N=t(0),y=function(e){Object(o.a)(t,e);var a=Object(l.a)(t);function t(e){var r;return Object(n.a)(this,t),(r=a.call(this,e)).state={isLoading:!1,settings:""},r}return Object(r.a)(t,[{key:"render",value:function(){return N.p.createElement("div",null,N.p.createElement("img",{src:this.props.gambar||N.M,alt:"Gambar Barang",width:"460px",height:"300px"}))}}]),t}(N.p.Component);y=Object(N.Z)({form:"ModalGambar",enableReinitialize:!0})(y);var M=Object(N.w)(null)(y),S=t(102),O=function(e){Object(o.a)(t,e);var a=Object(l.a)(t);function t(e){var r;return Object(n.a)(this,t),(r=a.call(this,e)).state={date:new Date,point:"POINT",kondisi_barang:"kosong",isLoading:!1,isLoadingBatal:!1,readOnly:!1,gambar:N.M,kategori:"SEMUA",columns:[{dataField:"tgl_trx",text:"Tanggal Trx",headerStyle:function(e,a){return{width:"100px"}}},{dataField:"kategori",text:"Kategori"},{dataField:"kode_barcode",text:"Barcode"},{dataField:"deskripsi",text:"Deskripsi"},{dataField:"berat",text:"Berat",headerStyle:function(e,a){return{width:"100px",textAlign:"right"}},formatter:function(e){return c.a.createElement("div",{className:"text-right"},parseFloat(e||0).toFixed(3))}},{dataField:"jumlah_rp",text:"Jumlah Rp",headerStyle:function(e,a){return{width:"100px",textAlign:"right"}},headerClasses:"text-right",formatter:function(e){return c.a.createElement("div",{className:"text-right"},parseFloat(e||0).toLocaleString("kr-KO"))}},{dataField:"poin_awal",text:"Poin Awal",headerStyle:function(e,a){return{width:"100px",textAlign:"right"}},formatter:function(e,a){return c.a.createElement("div",{className:"text-right"}," ",e||0," ")}},{dataField:"poin",text:"Poin",headerStyle:function(e,a){return{width:"100px",textAlign:"right"}},formatter:function(e,a){return c.a.createElement("div",{className:"text-right"}," ",e||0," ")}},{dataField:"poin_akhir",text:"Poin Akhir",headerStyle:function(e,a){return{width:"100px",textAlign:"right"}},formatter:function(e,a){return c.a.createElement("div",{className:"text-right"}," ",e||0," ")}},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:function(e,a){return c.a.createElement("div",{className:"row text-center"},c.a.createElement("div",{className:"PENJUALAN"===a.kategori?"col-12":"col-12 d-none"},c.a.createElement("button",{type:"button",onClick:function(){return r.getImages(a)},className:"btn btn-success"},c.a.createElement("i",{className:"fa fa-eye"}))))}}]},r}return Object(r.a)(t,[{key:"getImages",value:function(e){var a=this,t=this.state.type_pencarian;this.setState({isLoading:!0}),"LAMA"===t?Object(v.f)("barang/image/lama?kode_barcode="+e.kode_barcode.trim()).then(function(e){a.setState({gambar:e.data.url,isLoading:!1}),a.props.dispatch(Object(A.Zb)())}).catch(function(e){a.setState({isLoading:!1,gambar:N.M}),Object(L.e)("info","Gambar Tidak Ada")}):Object(b.o)("foto_produk/"+e.kode_barcode.trim()).then(function(e){a.setState({isLoading:!1,gambar:e}),a.props.dispatch(Object(A.Zb)())}).catch(function(e){a.setState({isLoading:!1,gambar:N.M}),Object(L.e)("info","Gambar Tidak Ada")})}},{key:"setStartDate",value:function(e){this.setState({tgl_awal:new Date(e)})}},{key:"setLastDate",value:function(e){this.setState({tgl_akhir:new Date(e)})}},{key:"componentDidMount",value:function(){this.props.dispatch(Object(A.A)()),this.props.dispatch(Object(A.Cb)()),this.props.dispatch(Object(A.Ob)()),this.props.change("type_pencarian","BARU"),setTimeout(function(){document.getElementById("kode_member").focus()},100),this.props.change("kategori","ALL"),this.props.change("toko","ALL"),this.props.change("history","TIDAK"),this.props.change("kode_dept","ALL"),this.props.change("kode_group","ALL"),this.props.change("tipe_barang","ALL")}},{key:"chnageDataGroup",value:function(e){this.props.change("kode_dept","ALL"),this.setState({kode_group:e})}},{key:"history",value:function(e){console.log(e),"YA"===e?this.setState({readOnly:!0}):this.setState({readOnly:!1})}},{key:"getKodeMember",value:function(e){var a=this;if(e.length<10)return this.props.change("nama_member",""),this.props.change("alamat",""),this.props.change("no_hp",""),this.setState({point:0}),!1;this.props.getKodeMember(e),this.delayTimer&&clearTimeout(this.delayTimer),this.delayTimer=setTimeout(function(){if(void 0===e)return!1;a.setState({isLoading:!0}),Object(v.d)("member/get/by-kode-member/"+e).then(function(e){a.setState({isLoading:!1}),e.data.forEach(function(e,t){a.props.change("nama_member",e.nama_customer),a.props.change("alamat",e.alamat_customer),a.props.change("no_hp",e.no_hp),a.setState({datatransaksimember:[],point:e.point||0,isLoading:!1})})}).catch(function(e){Object(L.e)("info","Data member tidak ada"),a.setState({datatransaksimember:[],isLoading:!1})})},1500)}},{key:"render",value:function(){var e=this,a=[{value:"ALL",name:"SEMUA"}];this.props.GetDataGroup.forEach(function(e){var t={value:e.kode_group,name:e.kode_group};a.push(t)});var t=[{value:"ALL",name:"SEMUA"}];this.props.getMasterToko.forEach(function(e){var a={value:e.kode_toko,name:e.kode_toko};t.push(a)});var n=[{value:"ALL",name:"SEMUA"}];this.props.GetDataGroup.forEach(function(e){var a={value:e.kode_group,name:e.kode_group};n.push(a)});var r=[{value:"ALL",name:"SEMUA"}];return this.props.getDataJenis.filter(function(a){return a.kode_group===e.state.kode_group}).forEach(function(e){var a={value:e.kode_dept,name:e.kode_dept};r.push(a)}),c.a.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-8"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-6"},c.a.createElement(u.a,{onChange:function(a){return e.getKodeMember(a.target.value)},id:"kode_member",name:"kode_member",component:h.e,type:"text",label:"Kode Member",placeholder:"Masukan Kode Member"})),c.a.createElement("div",{className:"col-lg-6"},c.a.createElement(u.a,{id:"lihat_transaksi_nama_member",name:"nama_member",readOnly:!0,component:h.e,type:"text",label:"NAMA CUSTOMER",placeholder:"Masukan NAMA CUSTOMER"})))),c.a.createElement("div",{className:"col-4 text-center"},c.a.createElement(c.a.Fragment,null," \xa0 "),c.a.createElement("h1",{style:"POINT"===this.state.point?{fontSize:"4.875rem",position:"absolute",left:"90px",top:"100px"}:{fontSize:"4.875rem",position:"absolute",left:"150px",top:"100px"}}," ",this.state.point," ")),c.a.createElement("div",{className:"col-8"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-6"},c.a.createElement(u.a,{id:"lihat_transaksi_alamat",name:"alamat",readOnly:!0,component:h.e,type:"text",label:"Alamat",placeholder:"Masukan Alamat"})),c.a.createElement("div",{className:"col-lg-6"},c.a.createElement(u.a,{id:"lihat_transaksi_no_hp",name:"no_hp",readOnly:!0,component:h.e,type:"text",label:"No Hp",placeholder:"Masukan No Hp"})),c.a.createElement("div",{className:"col-lg-4"},c.a.createElement(u.a,{name:"dari_tanggal",component:h.c,type:"text",selected:this.state.tgl_awal,onChange:function(a){return e.setStartDate(a)},label:"Dari Tanggal",readOnly:this.state.readOnly,placeholder:"Masukan Dari Tanggal"})),c.a.createElement("div",{className:"col-lg-4"},c.a.createElement(u.a,{name:"sampai_tanggal",component:h.c,type:"text",selected:this.state.tgl_akhir,onChange:function(a){return e.setLastDate(a)},label:"Sampai Tanggal",readOnly:this.state.readOnly,placeholder:"Masukan Sampai Tanggal"})),c.a.createElement("div",{className:"col-lg-4"},c.a.createElement(u.a,{name:"history",component:h.f,type:"text",onChange:function(a){return e.history(a)},options:[{name:"YA",value:"YA"},{name:"TIDAK",value:"TIDAK"}],label:"History",placeholder:"Masukan History"})),c.a.createElement("div",{className:"col-lg-2"},c.a.createElement(u.a,{name:"berat_awal",component:h.e,type:"text",normalize:_.a,label:"Berat Awal",placeholder:"Masukan Berat Awal"})),c.a.createElement("div",{className:"col-lg-2"},c.a.createElement(u.a,{name:"berat_akhir",component:h.e,type:"text",normalize:_.a,label:"Berat Akhir",placeholder:"Masukan Berat Akhir"})),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(u.a,{name:"kode_group",component:h.f,onChange:function(a){e.chnageDataGroup(a)},options:n,type:"text",label:"Kode Group",placeholder:"Masukan Kode Group"})),c.a.createElement("div",{className:"col-lg-3"},c.a.createElement(u.a,{name:"kode_dept",component:h.f,type:"text",options:r,label:"Kode Jenis",placeholder:"Masukan Kode Jenis"})),c.a.createElement("div",{className:"col-lg-2"},c.a.createElement(u.a,{name:"tipe_barang",component:h.f,type:"text",options:[{value:"ALL",name:"SEMUA"},{value:"SP",name:"SP"},{value:"A",name:"A"}],label:"Tipe Barang",placeholder:"Masukan Tipe Barang"})))),c.a.createElement("div",{className:"col-4 text-center"}),c.a.createElement("div",{className:"col-lg-2"},c.a.createElement(u.a,{id:"kategori_trx",name:"kategori",component:h.f,onChange:function(a){e.setState({kategori:a})},type:"text",options:[{name:"SEMUA",value:"ALL"},{name:"PENJUALAN",value:"PENJUALAN"},{name:"PEMBELIAN UMUM",value:"PEMBELIAN UMUM"},{name:"PESANAN",value:"PESANAN"},{name:"PESANAN SERAH",value:"PESANAN SERAH"},{name:"PESANAN TAMBAH",value:"PESANAN TAMBAH"},{name:"PINJAMAN",value:"PINJAMAN"},{name:"PINJAMAN LUNAS",value:"PINJAMAN LUNAS"},{name:"SERVICE",value:"SERVICE"},{name:"SERVICE AMBIL",value:"SERVICE AMBIL"},{name:"TUKAR POINT",value:"TUKAR POINT"},{name:"TAMBAH POIN MANUAL",value:"TAMBAH POIN MANUAL"},{name:"AMBIL POIN MANUAL",value:"AMBIL POIN MANUAL"}],label:"Kategori",placeholder:"Masukan Kategori"})),c.a.createElement("div",{className:"col-lg-2"},c.a.createElement(u.a,{name:"toko",component:h.f,type:"text",options:t,label:"Toko",placeholder:"Masukan Toko"})),c.a.createElement("div",{className:"col-lg-4"},c.a.createElement(u.a,{name:"type_pencarian",component:h.f,onChange:function(a){e.setState({type_pencarian:a})},type:"text",options:[{name:"LAMA",value:"LAMA"},{name:"BARU",value:"BARU"}],label:"Pilih Transaksi",placeholder:"Pilih Transaksi"})),c.a.createElement("div",{className:"col-lg-4"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-6"},c.a.createElement("label",null,"\xa0"),c.a.createElement("button",{type:"submit",value:"PDF",name:"type_btn",className:"btn btn-primary btn-block"},this.props.isLoading?c.a.createElement(c.a.Fragment,null,c.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Lihat"):"Lihat")),c.a.createElement("div",{className:"col-lg-6"},c.a.createElement("label",null,"\xa0"),c.a.createElement("button",{type:"button",onClick:this.props.batalLihatTransaksi,className:"btn btn-warning btn-block"},this.props.isLoadingBatal?c.a.createElement(c.a.Fragment,null,c.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Batal"):"Batal")))),c.a.createElement("div",{className:"col-12"},c.a.createElement(k.a,{keyField:"kode_barcode",exportCsv:!0,data:this.props.datatransaksimember,columns:this.state.columns,empty:!0,textEmpty:"Data Transaksi Member Kosong"}))),c.a.createElement(S.a,{size:"P",title:"Data Gambar",content:c.a.createElement(M,{isLoading:this.state.isLoading,gambar:this.state.gambar,onSubmit:function(a){return e.handleSubmit(a)}})}),this.props.isLoadingBatal||this.state.isLoading?c.a.createElement(E.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}]),t}(s.Component);O=Object(g.a)({form:"HeadTransaksiMember",enableReinitialize:!0})(O);var x=Object(p.b)(function(e){return{initialValues:{dari_tanggal:Object(b.q)(),sampai_tanggal:Object(b.q)()},getMasterToko:e.datamaster.getMasterToko,GetDataGroup:e.datamaster.GetDataGroup,getDataJenis:e.datamaster.getDataJenis,datakondisi:e.datamaster.getDataKondisiBarang,setHancurBarang:e.databarang.setHancurBarang}},null)(O),T=t(141),j=t(34),D=function(e){Object(o.a)(t,e);var a=Object(l.a)(t);function t(e){var r;return Object(n.a)(this,t),(r=a.call(this,e)).state={isLoading:!1,isLoadingBatal:!1,point:"POINT",datatransaksimember:[]},r.handleSubmit=r.handleSubmit.bind(Object(i.a)(r)),r}return Object(r.a)(t,[{key:"batalLihatTransaksi",value:function(){var e=this;this.setState({isLoadingBatal:!0}),setTimeout(function(){e.setState({isLoadingBatal:!1,datatransaksimember:[]}),e.props.dispatch(Object(j.d)("HeadTransaksiMember"))},1e3)}},{key:"getKodeMember",value:function(e){var a=this;if(e.length<10)return this.props.change("nama_customer",""),this.props.change("no_hp",""),this.props.change("alamat_customer",""),!1;this.delayTimer&&clearTimeout(this.delayTimer),this.delayTimer=setTimeout(function(){if(void 0===e)return!1;Object(v.d)("member/get/by-kode-member/"+e).then(function(e){a.setState({datatransaksimember:[],isLoading:!1})}).catch(function(e){Object(L.e)("info","Data member tidak ada"),a.setState({datatransaksimember:[],isLoading:!1})})},1500)}},{key:"handleSubmit",value:function(e){var a=this;this.setState({isLoading:!0});var t={kode_member:e.kode_member,kode_group:e.kategori,kode_dept:e.kode_dept,kode_group_barang:e.kode_group,kode_lokasi_gudang:e.toko,tipe_barang:e.tipe_barang,history:"YA"===e.history,berat_awal:parseFloat(e.berat_awal||0),berat_akhir:parseFloat(e.berat_akhir||0),tgl_awal:Object(b.m)(T(new Date(e.dari_tanggal)).format("YYYY-MM-DD")),tgl_akhir:Object(b.m)(T(new Date(e.sampai_tanggal)).format("YYYY-MM-DD"))};"BARU"===e.type_pencarian?Object(v.k)("trxmember/get/by-tanggal",t).then(function(e){0===e.data.length?(Object(L.e)("info","Data Yang Di Cari Tidak Ada !!!"),a.setState({isLoading:!1,export:!1,datatransaksimember:[]})):(Object(L.e)("success","Laporan Transaksi Member Tersedia"),Object(b.v)("tgl_laporan",JSON.stringify(t)),a.setState({export:!0,isLoading:!1,datatransaksimember:e.data}))}).catch(function(e){Object(L.e)("info","Data Yang Di Cari Tidak Ada !!!"),a.setState({isLoading:!1,export:!1})}):Object(v.f)("trxmember/reports/data-lama?tipe_barang=".concat(t.tipe_barang,"kode_dept=").concat(e.kode_dept,"&kode_group_barang=").concat(e.kode_group_barang,"&history=").concat(t.history,"&tgl_from=").concat(t.tgl_awal,"&tgl_to=").concat(t.tgl_akhir,"&kode_member=").concat(t.kode_member,"&kode_group=").concat(t.kode_group,"&kode_lokasi_gudang=").concat(t.kode_lokasi_gudang,"&berat_awal=").concat(t.berat_awal,"&berat_akhir=").concat(t.berat_akhir)).then(function(e){0===e.data.length?(Object(L.e)("info","Data Yang Di Cari Tidak Ada !!!"),a.setState({isLoading:!1,export:!1,datatransaksimember:[]})):(Object(L.e)("success","Laporan Transaksi Member Tersedia"),Object(b.v)("tgl_laporan",JSON.stringify(t)),a.setState({datatransaksimember:[]}),a.setState({export:!0,isLoading:!1,datatransaksimember:e.data}))}).catch(function(e){Object(L.e)("info","Data Yang Di Cari Tidak Ada !!!"),a.setState({isLoading:!1,export:!1,datatransaksimember:[]})})}},{key:"componentWillUnmount",value:function(){Object(b.z)("data_member",[])}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement("ol",{className:"breadcrumb float-xl-right"},c.a.createElement("li",{className:"breadcrumb-item"},c.a.createElement(m.b,{to:"#"},"Member")),c.a.createElement("li",{className:"breadcrumb-item active"},"Lihat Transaksi Member")),c.a.createElement("h1",{className:"page-header"},"Lihat Transaksi Member "),c.a.createElement(d.a,null,c.a.createElement(d.c,null,"Lihat Transaksi Member"),c.a.createElement("br",null),c.a.createElement(d.b,null,c.a.createElement(x,{getKodeMember:function(a){return e.getKodeMember(a)},batalLihatTransaksi:function(){return e.batalLihatTransaksi()},onSubmit:function(a){return e.handleSubmit(a)},columns:this.state.columns,isLoading:this.state.isLoading,point:this.state.point,isLoadingBatal:this.state.isLoadingBatal,datatransaksimember:this.state.datatransaksimember}),c.a.createElement("br",null)),c.a.createElement("br",null)),this.state.isLoadingBatal||this.state.isLoading?c.a.createElement(E.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}]),t}(c.a.Component);D=Object(g.a)({form:"LihatTransaksiMember",enableReinitialize:!0})(D);a.default=Object(p.b)(null)(D)}}]);
//# sourceMappingURL=116.0a6049c4.chunk.js.map